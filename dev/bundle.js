!function(n){var l={};function t(c){if(l[c])return l[c].exports;var e=l[c]={i:c,l:!1,exports:{}};return n[c].call(e.exports,e,e.exports,t),e.l=!0,e.exports}t.m=n,t.c=l,t.d=function(n,l,c){t.o(n,l)||Object.defineProperty(n,l,{configurable:!1,enumerable:!0,get:c})},t.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},t.n=function(n){var l=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(l,"a",l),l},t.o=function(n,l){return Object.prototype.hasOwnProperty.call(n,l)},t.p="",t(t.s=8)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/* global d3 */\n\n// Setting up data and data objects\nvar MAX_AUTO = 1;\nvar MIN_AUTO = 0;\n\nvar VERTICAL_LABEL_POSITION_SHORTER = null;\nvar VERTICAL_LABEL_POSITION_TALLER = null;\nvar LINE_HEIGHT_LEAST_SIMILAR_JOB = null;\nvar LINE_HEIGHT_MOST_SIMILAR_JOB = null;\nvar INTRO_Y_AXIS_LOCATION = null;\nvar X_AXIS_LABEL_HEIGHT = null;\n\nvar viewportWidth = window.innerWidth;\nvar viewportHeight = window.innerHeight;\nvar svgWidth = null;\nvar xMaxScaleValue = null;\nvar widthPercentage = null;\nvar xPadding = null;\n\nvar isMobile = false;\nvar dropdownDefaultTrigger = false;\n\nvar yScale = null;\nvar yMaxScaleValue = null;\nvar yPadding = null;\nvar tooltipXScale = d3.scaleLinear().domain([0, 100]);\nvar chartTooltipClosingTrigger = false;\n\nvar yAxisGroup = null;\nvar yAxisLabel = null;\n\nvar $truckerDeveloperXAxis = null;\nvar $automatability_LABEL = null;\nvar $jobCircles = null;\nvar $automatabilityBisectingGroup = null;\n\nvar $xAxisTextLabel = null;\nvar maxSimilarityLabel = null;\nvar minSimilarityLabel = null;\nvar $similarityAnnotations = null;\n\nvar scalesObject = {};\n\nvar $legendWages = null;\nvar $legendjobNumber = null;\n\n// let allData = null;\nvar similarity = null;\nvar selectedJobData = null;\nvar selectedJobID = 415;\n\nvar jobTooltip = null;\nvar jobSkillsContainer = null;\n\nvar $jobDropdownMenu = null;\nvar $similarityAxisLabel = null;\n\nvar defaultSceneSetting = { 'cx': '',\n\t'cy': '',\n\t'r': '',\n\t'fill': '',\n\t'yScale': '',\n\t'opacityCircles': '',\n\t'opacityAnnotations': ''\n\n\t// Key objects for displaying values based on job id\n};var keyObjectJobName = {};\nvar keyObjectJobNumber = {};\nvar keyObjectJobAuto = {};\nvar keyObjectJobWage = {};\nvar keyObjectSkillName = {};\n\nvar crosswalk = null;\nvar crosswalkSkills = null;\nvar selectedJobSkills = [0, 0, 0, 0, 0];\nvar skills = [];\n\n// creating array of files to load\nvar pathData = 'assets/data/';\nvar fileNames = ['crosswalk_jobs', 'similarity', 'crosswalk_skills', 'skills'];\nvar files = [];\nfileNames.forEach(function (category) {\n\tfiles.push(pathData + category + '.csv');\n});\n\nvar $chartContainer = d3.select('figure.svg-container');\nvar $chartSvg = $chartContainer.select('svg.scatter');\n\nvar xScale = null;\n\nvar wageRatioArray = [0.2, 0.5, 0.75, 0.9, 1.1, 1.25, 2, 5];\nvar wageColors = ['#a50026', '#d73027', '#f46d43', '#fee090', '#e0f3f8', '#74add1', '#4575b4', '#313695'];\n\nfunction setupAnnotations() {\n\n\tvar ambulanceDriversCoords = {};\n\tvar sailorsCoords = {};\n\tvar electricalPowerLineInstallersAndRepairersCoords = {};\n\tvar shipEngineersCoords = {};\n\tvar electriciansCoords = {};\n\tvar supervisorsCoords = {};\n\n\tvar aD_id = 218;\n\tvar s_id = 445;\n\tvar ePLIAR_id = 161;\n\tvar sE_id = 125;\n\tvar e_id = 187;\n\tvar sup_id = 194;\n\n\tvar auto_ambulanceDrivers = keyObjectJobAuto[aD_id];\n\tvar auto_sailors = keyObjectJobAuto[s_id];\n\tvar auto_electricalPowerLineInstallersAndRepairers = keyObjectJobAuto[ePLIAR_id];\n\tvar auto_shipEngineers = keyObjectJobAuto[sE_id];\n\tvar auto_electricians = keyObjectJobAuto[e_id];\n\tvar auto_supervisors = keyObjectJobAuto[sup_id];\n\n\tvar similarity_ambulanceDrivers = selectedJobData.filter(function (job) {\n\t\treturn +job.id_compared === +aD_id;\n\t});\n\tvar similarity_sailors = selectedJobData.filter(function (job) {\n\t\treturn +job.id_compared === +s_id;\n\t});\n\tvar similarity_electricalPowerLineInstallersAndRepairers = selectedJobData.filter(function (job) {\n\t\treturn +job.id_compared === +ePLIAR_id;\n\t});\n\tvar similarity_shipEngineers = selectedJobData.filter(function (job) {\n\t\treturn +job.id_compared === +sE_id;\n\t});\n\tvar similarity_electricians = selectedJobData.filter(function (job) {\n\t\treturn +job.id_compared === +e_id;\n\t});\n\tvar similarity_supervisors = selectedJobData.filter(function (job) {\n\t\treturn +job.id_compared === +sup_id;\n\t});\n\n\tambulanceDriversCoords.xCoord = xScale(+similarity_ambulanceDrivers[0].similarity);\n\tsailorsCoords.xCoord = xScale(+similarity_sailors[0].similarity);\n\t// electricalPowerLineInstallersAndRepairersCoords.xCoord = xScale(similarity_electricalPowerLineInstallersAndRepairers[0].similarity)\n\tshipEngineersCoords.xCoord = xScale(similarity_shipEngineers[0].similarity);\n\telectriciansCoords.xCoord = xScale(similarity_electricians[0].similarity);\n\tsupervisorsCoords.xCoord = xScale(similarity_supervisors[0].similarity);\n\n\tyScale.domain([0, 1]);\n\tsailorsCoords.yCoord = yScale(+auto_sailors);\n\n\tyScale.domain([0, 0.79]);\n\tambulanceDriversCoords.yCoord = yScale(+auto_ambulanceDrivers);\n\t// electricalPowerLineInstallersAndRepairersCoords.yCoord = yScale(auto_electricalPowerLineInstallersAndRepairers)\n\tshipEngineersCoords.yCoord = yScale(auto_shipEngineers);\n\telectriciansCoords.yCoord = yScale(auto_electricians);\n\tsupervisorsCoords.yCoord = yScale(auto_supervisors);\n\n\tvar ambulance_AnnotationYBump = -40;\n\tvar ambulance_AnnotationXBump = 5;\n\n\tvar sailors_AnnotationYBump = -40;\n\tvar sailors_AnnotationXBump = 0;\n\n\tvar powerline_AnnotationYBump = -15;\n\tvar powerline_AnnotationXBump = 15;\n\n\tvar ship_AnnotationYBump = -15;\n\tvar ship_AnnotationXBump = 0;\n\n\tvar electrician_AnnotationYBump = -30;\n\tvar electrician_AnnotationXBump = 30;\n\n\tvar supervisors_AnnotationYBump = 30;\n\tvar supervisors_AnnotationXBump = 30;\n\n\tvar annoConnector = \"arrow\";\n\n\tvar ambulanceAnno = [{ note: { title: 'Ambulance Drivers', wrap: 100, align: \"middle\" },\n\t\tconnector: { end: annoConnector },\n\t\tx: ambulanceDriversCoords.xCoord, y: ambulanceDriversCoords.yCoord, dx: ambulance_AnnotationXBump, dy: ambulance_AnnotationYBump\n\t}];\n\n\tvar sailorsAnno = [{ note: { title: 'Sailors', wrap: 100, align: \"middle\" },\n\t\tconnector: { end: annoConnector },\n\t\tx: sailorsCoords.xCoord, y: sailorsCoords.yCoord, dx: sailors_AnnotationXBump, dy: sailors_AnnotationYBump\n\t}];\n\n\tvar shipEngineersAnno = [{ note: { title: 'Ship Engineers', wrap: 100, align: \"middle\" },\n\t\tconnector: { end: annoConnector },\n\t\tx: shipEngineersCoords.xCoord, y: shipEngineersCoords.yCoord, dx: ship_AnnotationXBump, dy: ship_AnnotationYBump\n\t}];\n\n\tvar electriciansAnno = [{ note: { title: 'Electricians', wrap: 100, align: \"middle\" },\n\t\tconnector: { end: annoConnector },\n\t\tx: electriciansCoords.xCoord, y: electriciansCoords.yCoord, dx: electrician_AnnotationXBump, dy: electrician_AnnotationYBump\n\t}];\n\n\tvar supervisorsAnno = [{ note: { title: 'Construction Supervisors', wrap: 100, align: \"middle\" },\n\t\tconnector: { end: annoConnector },\n\t\tx: supervisorsCoords.xCoord, y: supervisorsCoords.yCoord, dx: supervisors_AnnotationXBump, dy: supervisors_AnnotationYBump\n\t}];\n\n\tvar makeAmbulanceJobAnno = d3.annotation().type(d3.annotationCallout).annotations(ambulanceAnno);\n\n\tvar makeSailorsJobAnno = d3.annotation().type(d3.annotationCallout).annotations(sailorsAnno);\n\n\tvar makeShipEngineersJobAnno = d3.annotation().type(d3.annotationCallout).annotations(shipEngineersAnno);\n\n\tvar makeElectriciansJobAnno = d3.annotation().type(d3.annotationCallout).annotations(electriciansAnno);\n\n\tvar makeSupervisorsJobAnno = d3.annotation().type(d3.annotationCallout).annotations(supervisorsAnno);\n\n\t$chartSvg.append(\"g\")\n\t// .attr(\"transform\",`translate(\"${0}\",\"${-30}\")`)\n\t.attr(\"class\", \"anno-group-ambulance anno-group\").call(makeAmbulanceJobAnno);\n\n\t$chartSvg.append(\"g\")\n\t// .attr(\"transform\",`translate(\"${0}\",\"${-30}\")`)\n\t.attr(\"class\", \"anno-group-sailors anno-group\").call(makeSailorsJobAnno);\n\n\t$chartSvg.append(\"g\")\n\t// .attr(\"transform\",`translate(\"${0}\",\"${-30}\")`)\n\t.attr(\"class\", \"anno-group-shipengineers anno-group\").call(makeShipEngineersJobAnno);\n\n\t$chartSvg.append(\"g\")\n\t// .attr(\"transform\",`translate(\"${0}\",\"${-30}\")`)\n\t.attr(\"class\", \"anno-group-electricians anno-group anno-group-final\").call(makeElectriciansJobAnno);\n\n\t$chartSvg.append(\"g\")\n\t// .attr(\"transform\",`translate(\"${0}\",\"${-30}\")`)\n\t.attr(\"class\", \"anno-group-supervisors anno-group anno-group-final\").call(makeSupervisorsJobAnno);\n\n\t$chartSvg.selectAll('g.anno-group').st('opacity', 0);\n}\n\nfunction numberWithCommas(x) {\n\treturn x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction selectJobData(data, selectedJobID) {\n\tvar selectedJobDataAllJobs = data.filter(function (item) {\n\t\treturn +item.id_selected === +selectedJobID;\n\t});\n\tvar selectedJobData = selectedJobDataAllJobs.filter(function (item) {\n\t\treturn +item.id_compared != +item.id_selected;\n\t});\n\treturn selectedJobData;\n}\n\nfunction setupXScale(selectedJobData) {\n\tsvgWidth = $chartSvg.at('width');\n\twidthPercentage = 0.9;\n\txMaxScaleValue = svgWidth * widthPercentage;\n\txPadding = isMobile ? (1 - widthPercentage + 0.1) * svgWidth : (1 - widthPercentage) * svgWidth;\n\n\tvar xScale = d3.scaleLinear().domain(d3.extent(selectedJobData, function (d) {\n\t\treturn d.similarity;\n\t})).range([0 + xPadding, xMaxScaleValue]);\n\treturn xScale;\n}\n\nfunction compare(a, b) {\n\tif (a.imp < b.imp) return 1;\n\tif (a.imp > b.imp) return -1;\n\treturn 0;\n}\n\nfunction compareJobNames(a, b) {\n\tif (a.job_name < b.job_name) return -1;\n\tif (a.job_name > b.job_name) return 1;\n\treturn 0;\n}\n\nfunction findLeastSimilarJob(selectedJobData) {\n\tvar leastSimilarJobValue = d3.min(selectedJobData, function (d) {\n\t\treturn d.similarity;\n\t});\n\tvar leastSimilarJob = selectedJobData.filter(function (job) {\n\t\treturn job.similarity === leastSimilarJobValue;\n\t});\n\treturn leastSimilarJob;\n}\n\nfunction findMostSimilarJob(selectedJobData) {\n\tvar mostSimilarJobValue = d3.max(selectedJobData, function (d) {\n\t\treturn d.similarity;\n\t});\n\tvar mostSimilarJob = selectedJobData.filter(function (job) {\n\t\treturn job.similarity === mostSimilarJobValue;\n\t});\n\treturn mostSimilarJob;\n}\n\nfunction formatCrosswalk(crosswalk) {\n\tcrosswalk.forEach(function (item) {\n\t\titem.id = +item.id;\n\t\titem.auto = +item.auto;\n\t\titem.wage = +item.wage;\n\t\titem.number = +item.number;\n\t});\n}\n\nfunction formatSimilarityValues(similarity) {\n\tsimilarity.forEach(function (item) {\n\t\titem.similarity = +item.similarity;\n\t\titem.id_compared = +item.id_compared;\n\t\titem.id_selected = +item.id_selected;\n\t});\n}\n\nfunction formatCrosswalkSkills(crosswalkSkills) {\n\tcrosswalkSkills.forEach(function (item) {\n\t\titem.skill_id = +item.skill_id;\n\t});\n}\n\nfunction formatTopSkillsByJob(skills) {\n\tskills.forEach(function (item) {\n\t\titem.id_selected = +item.id_selected;\n\t\titem.imp = +item.imp;\n\t\titem.skill_id = +item.skill_id;\n\t\titem.rank = +item.rank;\n\t});\n}\n\nfunction keySetupJobName(crosswalk, keyObject) {\n\tcrosswalk.forEach(function (job) {\n\t\tkeyObject[job.id] = job.job_name;\n\t});\n}\n\nfunction keySetupJobNumber(crosswalk, keyObject) {\n\tcrosswalk.forEach(function (job) {\n\t\tkeyObject[job.id] = job.number;\n\t});\n}\n\nfunction keySetupJobAutomation(crosswalk, keyObject) {\n\tcrosswalk.forEach(function (job) {\n\t\tkeyObject[job.id] = job.auto;\n\t});\n}\n\nfunction keySetupJobWage(crosswalk, keyObject) {\n\tcrosswalk.forEach(function (job) {\n\t\tkeyObject[job.id] = job.wage;\n\t});\n}\n\nfunction keySetupJobSkills(crosswalkSkills, keyObject) {\n\tcrosswalkSkills.forEach(function (skill) {\n\t\treturn keyObject[skill.skill_id] = skill.skill;\n\t});\n}\n\nfunction setupScales() {\n\n\tscalesObject.radiusScale = d3.scaleSqrt().domain([0, d3.max(crosswalk, function (d) {\n\t\treturn d.wage;\n\t})]).range([2, 8]);\n\n\tscalesObject.colorScale = d3.scaleLinear().domain(wageRatioArray).range(wageColors);\n\n\treturn scalesObject;\n}\n\nfunction setupLegends(radiusScale, colorScale) {\n\n\t// Label arrays for wage and job number\n\tvar wageRatioIncreaseArray = [{ 'value': 1.1, 'label': '10' }, { 'value': 1.25, 'label': '25' }, { 'value': 2, 'label': '100' }, { 'value': 5, 'label': '400%' }];\n\n\tvar jobNumberLabelArray = [{ 'size': 10000, 'label': '10K' }, { 'size': 100000, 'label': '500K' }, { 'size': 1000000, 'label': '1M' }];\n\n\t// LEGENDS\n\t// Creating and positioning the wage legend\n\t$legendWages = $chartSvg.append('g.legend__wages');\n\n\t$legendWages.at('transform', 'translate(' + svgWidth * 0.75 + ',' + yPadding / 6 + ')');\n\n\tvar $legendWages_title = $legendWages.append('text.legend-wages__title');\n\n\tvar $legendWages_category_groups = $legendWages.selectAll('g.legend-wages__category').data(wageRatioIncreaseArray).enter().append('g.legend-wages__category');\n\n\tvar LEGEND_WAGE_RECTANGLE_WIDTH = isMobile ? svgWidth / 15 : svgWidth / 40;\n\tvar LEGEND_WAGE_RECTANGLE_HEIGHT = yPadding / 10;\n\n\tvar $legendWages_groups_y_coord = radiusScale(1000000);\n\n\t// Moving each category group\n\t$legendWages_category_groups.at('transform', function (d, i) {\n\t\tvar xTranslate = isMobile ? i * LEGEND_WAGE_RECTANGLE_WIDTH - LEGEND_WAGE_RECTANGLE_WIDTH : i * LEGEND_WAGE_RECTANGLE_WIDTH;\n\t\tvar yTranslate = $legendWages_groups_y_coord;\n\t\treturn 'translate(' + xTranslate + ',' + yTranslate + ')';\n\t});\n\n\tvar $legendWages_rectangles = $legendWages_category_groups.append('rect.legend-wages__rectangle');\n\n\t$legendWages_rectangles.at('width', LEGEND_WAGE_RECTANGLE_WIDTH).at('height', yPadding / 10).st('fill', function (d) {\n\t\treturn colorScale(d.value);\n\t});\n\n\tvar $legendWages_text_annotations = $legendWages_category_groups.append('text.legend-wages__text-annotation');\n\n\tvar $legendWages_text_annotations_y_coord = LEGEND_WAGE_RECTANGLE_HEIGHT * 3;\n\n\t$legendWages_text_annotations.text(function (d) {\n\t\treturn d.label;\n\t}).at('y', $legendWages_text_annotations_y_coord).at('x', LEGEND_WAGE_RECTANGLE_WIDTH).st('text-anchor', function (d, i) {\n\t\tif (i === 3) {\n\t\t\treturn 'start';\n\t\t} else {\n\t\t\treturn 'middle';\n\t\t}\n\t});\n\n\tvar legendWagesZeroValue = $legendWages.append('text.legend-wages__zero');\n\n\tlegendWagesZeroValue.text('1%').at('y', $legendWages_text_annotations_y_coord + $legendWages_groups_y_coord).at('x', function (d, i) {\n\t\tif (isMobile) {\n\t\t\treturn -LEGEND_WAGE_RECTANGLE_WIDTH;\n\t\t} else {}\n\t});\n\n\tvar WAGE_LABEL_LOCATION = isMobile ? wageRatioIncreaseArray.length / 2 * LEGEND_WAGE_RECTANGLE_WIDTH - LEGEND_WAGE_RECTANGLE_WIDTH : wageRatioIncreaseArray.length / 2 * LEGEND_WAGE_RECTANGLE_WIDTH;\n\n\t$legendWages_title.text('SALARY INCREASE %').at('x', WAGE_LABEL_LOCATION);\n\n\t// LEGENDS\n\t// rendering job number legend\n\t$legendjobNumber = $chartSvg.append('g.legend-job-number');\n\n\t$legendjobNumber.at('transform', 'translate(' + xPadding + ',' + yPadding / 6 + ')');\n\n\tvar $legendjobNumber_category_groups = $legendjobNumber.selectAll('g.legend-job-number__category').data(jobNumberLabelArray).enter().append('g.legend-job-number__category');\n\n\tvar RADIUS_MULTIPLIER = 4;\n\n\t$legendjobNumber_category_groups.at('transform', function (d, i) {\n\t\tvar xTranslate = RADIUS_MULTIPLIER * i * radiusScale(1000000);\n\t\tvar yTranslate = radiusScale(1000000);\n\t\treturn 'translate(' + xTranslate + ',' + yTranslate + ')';\n\t});\n\n\tvar $legendjobNumber_circles = $legendjobNumber_category_groups.append('circle.legend-job-number__circle');\n\n\t$legendjobNumber_circles.at('r', function (d) {\n\t\treturn radiusScale(d.size);\n\t}).st('fill', '#FFF').st('stroke', '#C6C6C6');\n\n\tvar $legendjobNumber_text_annotations = $legendjobNumber_category_groups.append('text.legend-job-number__text');\n\n\t$legendjobNumber_text_annotations.text(function (d) {\n\t\treturn d.label;\n\t}).at('y', RADIUS_MULTIPLIER / 2 * radiusScale(1000000));\n\n\tvar JOB_NUMBER_LABEL_LOCATION = RADIUS_MULTIPLIER * Math.round((jobNumberLabelArray.length - 1) / 2) * radiusScale(1000000);\n\n\tvar $legendjobNumber_title_background = $legendjobNumber.append('text.job-number-title-background');\n\tvar $legendjobNumber_title = $legendjobNumber.append('text.job-number-title');\n\n\t$legendjobNumber_title_background.text('JOBS IN 2026').at('x', JOB_NUMBER_LABEL_LOCATION).st('stroke', '#FFF').st('stroke-width', '1px');\n\n\t$legendjobNumber_title.text('JOBS IN 2026').at('x', JOB_NUMBER_LABEL_LOCATION);\n\n\t$legendjobNumber.st('opacity', 0);\n\t// .st('visibility','hidden')\n\n\t$legendWages.st('visibility', 'hidden');\n}\n\nfunction resize() {\n\n\tvar fullSVGHeight = $chartSvg.at('height');\n\tvar REDUCED_VIEWPORT_HEIGHT_PERCENTAGE = 0.875;\n\tvar REMAINING_VIEWPORT_HEIGHT_PERCENTAGE = 1 - REDUCED_VIEWPORT_HEIGHT_PERCENTAGE;\n\n\t// Mobile check\n\n\tisMobile = viewportWidth < 700 ? true : false;\n\n\t// console.log(\"mobile? \" + isMobile)\n\n\t// $chartSvg.at('height', (REDUCED_VIEWPORT_HEIGHT_PERCENTAGE*fullSVGHeight))\n\n\t// Setting up max width and height parameters for x and y scales\n\t// svgWidth = $chartSvg.at('width')\n\t// const maxWidthPercentage = 0.9;\n\t// xMaxScaleValue = svgWidth * maxWidthPercentage;\n\t// xPadding = isMobile? (1-maxWidthPercentage+0.1)*svgWidth:(1-maxWidthPercentage)*svgWidth;\n\n\n\tvar svgHeight = $chartSvg.at('height');\n\tvar maxHeightPercentage = 0.9;\n\tyMaxScaleValue = svgHeight * maxHeightPercentage;\n\n\tvar Y_PADDING_MULTIPLIER = 1.25;\n\tyPadding = REMAINING_VIEWPORT_HEIGHT_PERCENTAGE * Y_PADDING_MULTIPLIER * svgHeight;\n\n\t// const Y_SCALE_MIN = 10\n\n\tINTRO_Y_AXIS_LOCATION = svgHeight / 2;\n\n\tyScale = d3.scaleLinear().domain([MIN_AUTO, MAX_AUTO]).range([0 + yPadding, yMaxScaleValue]);\n\n\txScale = setupXScale(selectedJobData);\n\n\tVERTICAL_LABEL_POSITION_SHORTER = INTRO_Y_AXIS_LOCATION * 0.8;\n\n\tVERTICAL_LABEL_POSITION_TALLER = INTRO_Y_AXIS_LOCATION * 0.6;\n\n\tLINE_HEIGHT_LEAST_SIMILAR_JOB = INTRO_Y_AXIS_LOCATION - VERTICAL_LABEL_POSITION_SHORTER;\n\tLINE_HEIGHT_MOST_SIMILAR_JOB = INTRO_Y_AXIS_LOCATION - VERTICAL_LABEL_POSITION_TALLER;\n}\n\nfunction dropDownChange() {\n\n\tvar selectedJobID = null;\n\n\tif (dropdownDefaultTrigger === true) {\n\t\tselectedJobID = 415;\n\t} else {\n\t\tselectedJobID = $chartContainer.select('.job-selector__dropdown').property('value');\n\t}\n\n\tvar updatedData = selectJobData(similarity, selectedJobID);\n\tvar currentJobId = updatedData[0].id_selected;\n\n\tconsole.log('selected job id: ' + selectedJobID);\n\tconsole.log('updated data ' + updatedData);\n\tconsole.log('current job ' + currentJobId);\n\tconsole.log('current job auto ' + keyObjectJobAuto[selectedJobID]);\n\n\t// Updating xScale with new data\n\tvar xScale = setupXScale(updatedData);\n\n\t// const $miscChartSections = $chartSvg.select('.misc-chart-elements-container')\n\tvar $miscChartSectionTitle = $chartContainer.select('div.chart-title-div');\n\t// Updating main label text\n\t$miscChartSectionTitle.select('.chart-title-pt2').text(numberWithCommas(keyObjectJobNumber[currentJobId]));\n\t$miscChartSectionTitle.select('.chart-title-pt3').text(keyObjectJobName[currentJobId]);\n\t$miscChartSectionTitle.select('.chart-title-pt5').text('$' + numberWithCommas(keyObjectJobWage[currentJobId]));\n\n\t// Updating yScale domain to exclude all items with a worse automation outcome\n\tyScale.domain([0, keyObjectJobAuto[currentJobId]]);\n\n\tyAxisGroup.transition().call(yAxisLabel);\n\n\t// Removing all previously created circles\n\tvar $chartSvg = d3.select('svg.scatter');\n\n\t$chartSvg.selectAll('circle.job').remove();\n\n\tvar $jobCircles = $chartSvg.selectAll('circle.job').data(updatedData).enter().append('circle.job');\n\n\t$jobCircles.at('cx', function (d) {\n\t\treturn xScale(d.similarity);\n\t}).at('cy', function (d) {\n\t\treturn yScale(keyObjectJobAuto[d.id_compared]);\n\t}).st('fill', function (d) {\n\t\tvar jobSelectedWage = keyObjectJobWage[d.id_selected];\n\t\tvar jobComparedWage = keyObjectJobWage[d.id_compared];\n\t\tvar wageChange = jobComparedWage / jobSelectedWage;\n\t\treturn scalesObject.colorScale(wageChange);\n\t}).st('opacity', function (d) {\n\t\tif (keyObjectJobWage[d.id_selected] < keyObjectJobWage[d.id_compared] && keyObjectJobAuto[d.id_selected] > keyObjectJobAuto[d.id_compared]) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t})\n\t// .st('stroke', 'black')\n\t.at('r', function (d) {\n\t\tvar wage = keyObjectJobNumber[d.id_compared];\n\t\treturn scalesObject.radiusScale(wage);\n\t});\n\n\t$jobCircles.on('mouseenter', showTooltip).on('click', showTooltip).on('mouseleave', hideTooltip);\n}\n\nfunction hideTooltip(d, i, n) {\n\tjobTooltip.st('visibility', 'hidden');\n\n\tvar currentCircle = d3.select(n[i]);\n\n\tcurrentCircle\n\t// .st('stroke-opacity',1)\n\t.st('stroke', 'gray').st('stroke-width', 0.5);\n\t// .st('stroke-width','2px')\n}\n\nfunction showTooltip(d, i, n) {\n\n\tvar currentCircle = d3.select(n[i]);\n\n\tcurrentCircle.st('stroke', 'black').st('stroke-width', 2);\n\n\tselectedJobSkills = selectJobData(skills, d.id_compared);\n\tselectedJobSkills = selectedJobSkills.sort(compare);\n\n\tvar jobComparedName = d3.select(\"div.job-compared-name\");\n\tjobComparedName.text(keyObjectJobName[d.id_compared]);\n\n\tvar jobComparedNumber = d3.select(\"div.job-compared-number\");\n\tjobComparedNumber.text(numberWithCommas(keyObjectJobNumber[d.id_compared]) + ' jobs in 2026');\n\n\tvar jobSkillsContainer = jobTooltip.select('div.job-skills-container');\n\n\tvar jobSkillsBarRow = jobSkillsContainer.selectAll('div.bar-container');\n\n\tvar jobSkillsNames = jobSkillsContainer.selectAll(\"div.job-bar-name\").data(selectedJobSkills);\n\n\tvar jobSkillsBars = jobSkillsContainer.selectAll(\"div.job-bar\").data(selectedJobSkills);\n\n\tvar jobSkillsValues = jobSkillsContainer.selectAll(\"div.job-bar-value\").data(selectedJobSkills);\n\n\tvar tooltipWidth = $('.jobTooltip').width();\n\tvar tooltipHeight = $('.jobTooltip').height();\n\n\ttooltipXScale.range([0, tooltipWidth * 0.8]);\n\n\tjobSkillsBars.st('height', '4px').st('width', function (skill) {\n\t\treturn tooltipXScale(skill.imp) + 'px';\n\t}).st('background', '#D928BC');\n\n\tjobSkillsNames.text(function (skill, i) {\n\t\treturn i + 1 + '. ' + keyObjectSkillName[skill.skill_id];\n\t});\n\n\tjobSkillsValues.text(function (skill) {\n\t\treturn skill.imp.toFixed(0) + '%';\n\t});\n\n\tvar xCoord = +d3.select(n[i]).at(\"cx\");\n\n\tvar yCoord = +d3.select(n[i]).at(\"cy\");\n\n\tvar tooltipBump_X = null;\n\tvar tooltipBump_Y = null;\n\n\tif (xCoord < viewportWidth / 2) {\n\t\ttooltipBump_X = isMobile ? 50 : 120;\n\t} else {\n\t\ttooltipBump_X = -tooltipWidth - 50;\n\t}\n\n\tif (yCoord < viewportHeight / 2) {\n\t\ttooltipBump_Y = 50;\n\t} else {\n\t\ttooltipBump_Y = -tooltipHeight;\n\t}\n\n\tjobTooltip.st(\"left\", xCoord + tooltipBump_X + \"px\").st(\"top\", yCoord + tooltipBump_Y + \"px\");\n\n\tjobTooltip.st('visibility', 'visible');\n\n\tchartTooltipClosingTrigger = true;\n}\n\nfunction createDropdown() {\n\n\t// Creating job dropdown menu\n\t$jobDropdownMenu = d3.select('div.job-selector__container').append('select');\n\n\t$jobDropdownMenu.at('class', 'job-selector__dropdown').st('opacity', 0);\n\t// .at('data-placeholder', 'Select another job')\n\n\t// .st('visibility','hidden')\n\n\tcrosswalk.sort(compareJobNames);\n\n\tvar $jobButtons = $jobDropdownMenu.selectAll('option.job-selector__job-button').data(crosswalk).enter().append('option.job-selector__job-button').at('value', function (d) {\n\t\treturn d.id;\n\t});\n\n\t$jobDropdownMenu.insert(\"option\", \":first-child\").at('selected', 'selected').text('Pick another job');\n\n\t$jobButtons.text(function (d) {\n\t\treturn d.job_name;\n\t});\n\n\t$(\".job-selector__dropdown\").chosen({\n\t\tplaceholder_text_single: 'Select another job'\n\t}).on('change', dropDownChange);\n}\n\nfunction createCircles() {\n\t$jobCircles = $chartSvg.selectAll('circle.job').data(selectedJobData).enter().append('circle.job');\n\n\t$jobCircles.at('cx', function (d) {\n\t\treturn xScale(d.similarity);\n\t}).at('cy', INTRO_Y_AXIS_LOCATION).st('fill', 'white').st('stroke', 'black').st('stroke-width', 0.5).st('opacity', 0).at('r', '3').on('mouseenter', showTooltip).on('click', showTooltip).on('mouseleave', hideTooltip);\n}\n\nfunction setupTooltip() {\n\n\tvar jobSkillsBarRow = jobSkillsContainer.selectAll('div.job-bar-container').data(selectedJobSkills).enter().append('div.bar-container');\n\n\tvar jobSkillsNames = jobSkillsBarRow.append(\"div.job-bar-name\").data(selectedJobSkills).enter();\n\n\tvar jobDataContainer = jobSkillsBarRow.append('div.job-data-container');\n\tvar jobSkillsBarsContainers = jobDataContainer.append(\"div.job-bar-box\");\n\n\tvar jobSkillsBars = jobSkillsBarsContainers.append(\"div.job-bar\").data(selectedJobSkills).enter();\n\tvar jobSkillsValues = jobDataContainer.append(\"div.job-bar-value\").data(selectedJobSkills).enter();\n}\n\nfunction setupDOMElements(leastSimilarJob, mostSimilarJob) {\n\n\t$chartSvg.on('click', function () {\n\t\tif (chartTooltipClosingTrigger) {\n\t\t\thideTooltip;\n\t\t} else {}\n\t});\n\n\t$truckerDeveloperXAxis = $chartSvg.select('g.intro-x-axis');\n\n\t// Creating annotations elements for similarity-only views\n\tvar leastSimilarJob_ANNOTATION = $chartSvg.append('g.least-similar-annotation similarity-annotation');\n\tvar mostSimilarJob_ANNOTATION = $chartSvg.append('g.most-similar-annotation similarity-annotation');\n\n\tvar leastSimilarJob_LINE = leastSimilarJob_ANNOTATION.append('line');\n\tvar mostSimilarJob_LINE = mostSimilarJob_ANNOTATION.append('line');\n\n\tvar leastSimilarJob_TEXT = leastSimilarJob_ANNOTATION.append('text');\n\tvar mostSimilarJob_TEXT = mostSimilarJob_ANNOTATION.append('text');\n\n\t$similarityAnnotations = $chartSvg.selectAll('g.similarity-annotation');\n\n\tleastSimilarJob_TEXT.text(keyObjectJobName[leastSimilarJob[0].id_compared]);\n\tmostSimilarJob_TEXT.text(keyObjectJobName[mostSimilarJob[0].id_compared]).st('text-anchor', 'end');\n\n\t// Positioning annotation elements\n\tleastSimilarJob_ANNOTATION.at('transform', function (d) {\n\t\tvar xTranslate = xScale(leastSimilarJob[0]['similarity']);\n\t\treturn 'translate(' + xTranslate + ',' + VERTICAL_LABEL_POSITION_SHORTER + ')';\n\t});\n\n\tmostSimilarJob_ANNOTATION.at('transform', function (d) {\n\t\tvar xTranslate = xScale(mostSimilarJob[0]['similarity']);\n\t\treturn 'translate(' + xTranslate + ',' + VERTICAL_LABEL_POSITION_TALLER + ')';\n\t});\n\n\tleastSimilarJob_LINE.at('x1', 0).at('y1', 0).at('x2', 0).at('y2', LINE_HEIGHT_LEAST_SIMILAR_JOB).st('stroke-width', 1).st('stroke', 'black');\n\n\tmostSimilarJob_LINE.at('x1', 0).at('y1', 0).at('x2', 0).at('y2', LINE_HEIGHT_MOST_SIMILAR_JOB).st('stroke-width', 1).st('stroke', 'black');\n\n\t// Adding an x axis label to the chart\n\t$xAxisTextLabel = $chartSvg.append('text.axis-label similarity');\n\tX_AXIS_LABEL_HEIGHT = INTRO_Y_AXIS_LOCATION * 1.1;\n\t// const svgWidth = $chartSvg.at('width')\n\n\t$xAxisTextLabel.at('x', function () {\n\t\tif (isMobile) {\n\t\t\tvar widthOfChart = xPadding + xMaxScaleValue;\n\t\t\treturn widthOfChart / 2;\n\t\t} else {\n\t\t\treturn svgWidth / 2;\n\t\t}\n\t}).at('y', X_AXIS_LABEL_HEIGHT).text('SKILL SIMILARITY').st('text-anchor', 'middle');\n\n\t// Adding max and min similarity/ y-axis labels\n\tmaxSimilarityLabel = $chartSvg.append('text.axis-label max-similarity');\n\tminSimilarityLabel = $chartSvg.append('text.axis-label min-similarity');\n\n\tmaxSimilarityLabel.at('x', xMaxScaleValue).at('y', X_AXIS_LABEL_HEIGHT).text('→ SIMILAR').st('text-anchor', 'middle');\n\n\tminSimilarityLabel.at('x', xPadding).at('y', X_AXIS_LABEL_HEIGHT).text('DIFFERENT ←').st('text-anchor', 'middle');\n\n\tleastSimilarJob_ANNOTATION.st('opacity', 0);\n\n\tmostSimilarJob_ANNOTATION.st('opacity', 0);\n\n\tmaxSimilarityLabel.st('opacity', 0);\n\n\tminSimilarityLabel.st('opacity', 0);\n\n\t$xAxisTextLabel.st('opacity', 0);\n\n\t$similarityAxisLabel = $chartSvg.selectAll('.axis-label');\n\n\t// Adding automatability/x-axis, and max and min automatability labels\n\tvar formatPercent = d3.format(\".0%\");\n\n\tyAxisLabel = d3.axisLeft(yScale).ticks(4).tickFormat(formatPercent);\n\n\tyAxisGroup = $chartSvg.append(\"g.scatter-y-axis\").attr(\"transform\", \"translate(\" + xPadding + \",0)\").call(yAxisLabel).st('opacity', 0);\n\n\t$automatability_LABEL = $chartSvg.append('text.scatter-label-y-axis');\n\n\t$automatability_LABEL.at('transform', 'translate(' + xPadding / 3 + ',' + INTRO_Y_AXIS_LOCATION + ') rotate(270)').st('opacity', 0).text('AUTOMATABILITY LIKELIHOOD');\n\n\tjobTooltip = d3.select(\"figure.svg-container\").append(\"div.jobTooltip\").on('click', hideTooltip);\n\n\tvar jobSelectedName = d3.select(\"div.job-selected-name\").on('click', hideTooltip);\n\n\tvar jobComparedNumber = jobTooltip.append(\"div.job-compared-number\").on('click', hideTooltip);\n\tvar jobComparedName = jobTooltip.append(\"div.job-compared-name\").on('click', hideTooltip);\n\n\tjobSkillsContainer = jobTooltip.append(\"div.job-skills-container\");\n\tvar jobSkillsSectionNames = jobSkillsContainer.append('div.tooltip-section-names').on('click', hideTooltip);\n\tvar jobSkillsSectionNamesSkill = jobSkillsSectionNames.append('div.section-name-skills').text('SKILL').on('click', hideTooltip);\n\tvar jobSkillsSectionNamesImportance = jobSkillsSectionNames.append('div.section-name-importance').text('IMPORTANCE').on('click', hideTooltip);\n\n\t// Automatability group labels\n\n\t$automatabilityBisectingGroup = $chartSvg.append('g.bisecting-automation-group');\n\t$automatabilityBisectingGroup.at('transform', 'translate(0,' + yScale(keyObjectJobAuto[selectedJobID]) + ')');\n\n\tvar $automatabilityBisectingLine = $automatabilityBisectingGroup.append('line.bisecting-line');\n\t$automatabilityBisectingLine.at('x1', xPadding).at('y1', 0).at('x2', xMaxScaleValue).at('y2', 0);\n\n\tvar $automatabilityBisectingLabelBackground = $automatabilityBisectingGroup.append('text.bisecting-line-label-background');\n\t$automatabilityBisectingLabelBackground.text('TRUCKERS');\n\n\tvar $automatabilityBisectingLabel = $automatabilityBisectingGroup.append('text.bisecting-line-label');\n\t$automatabilityBisectingLabel.text('TRUCKERS');\n\n\t$automatabilityBisectingGroup.st('opacity', 0);\n\n\td3.selectAll('div.section__scene').st('padding-bottom', function (d, i) {\n\t\tif (i > 12) {\n\t\t\treturn '5vh';\n\t\t} else {\n\t\t\treturn '100vh';\n\t\t}\n\t});\n}\n\nfunction updateStep(step) {\n\tif (step === 'x-axis-base') {\n\n\t\t$chartSvg.selectAll('g.annotation-group-stacked').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n\t\t$similarityAnnotations.classed('invisible', false);\n\n\t\t$truckerDeveloperXAxis.classed('invisible', true);\n\t\t// restoring job circle hover tooltip\n\t\t$jobCircles.on('mouseenter', showTooltip).on('click', showTooltip).on('mouseleave', hideTooltip);\n\n\t\td3.selectAll('span.secondary-title').st('display', 'inline');\n\n\t\td3.select('.chart-title-pt1').text('What should');\n\n\t\td3.select('.chart-title-pt2').text('1,871,700').classed('red-text', false);\n\n\t\td3.select('.chart-title-pt3').text('truckers');\n\n\t\td3.select('.chart-title-pt4').text('earning').classed('blue-text', false);\n\n\t\td3.select('.chart-title-pt5').text('$43,590');\n\n\t\td3.select('.chart-title-pt6').text('yearly, transition to?');\n\n\t\t$chartSvg.selectAll('g.annotation-group-different').st('visibility', 'hidden');\n\n\t\t$chartSvg.selectAll('g.annotation-group-similar').st('visibility', 'hidden');\n\n\t\t$chartSvg.selectAll('g.skill-section__two-jobs').transition()\n\t\t// .at('transform',`translate(0,${INTRO_Y_AXIS_LOCATION})`)\n\t\t.st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.all-jobs').transition()\n\t\t// .delay((d,i)=>{i*100})\n\t\t// .at('transform',`translate(0,${INTRO_Y_AXIS_LOCATION})`)\n\t\t.st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.trucker-developer-groups').classed('invisible', true);\n\n\t\t$chartSvg.selectAll('circle.job').classed('invisible', false);\n\n\t\t$chartSvg.selectAll('g.similarity-annotation').classed('invisible', false);\n\n\t\t$chartContainer.selectAll('.misc-elements').st('visibility', 'visible');\n\n\t\t$chartContainer.selectAll('.job-selector__container').st('visibility', 'hidden');\n\n\t\tvar $staticImageDiv = $chartContainer.select('img.images-many-jobs-many-skills');\n\n\t\t$staticImageDiv.st('display', 'none');\n\n\t\t$chartSvg.st('display', 'block');\n\n\t\tdefaultSceneSetting.cy = function () {\n\t\t\treturn INTRO_Y_AXIS_LOCATION;\n\t\t};\n\t\t// defaultSceneSetting.cy = function(d){return yScale(keyObjectJobAuto[d.id_compared])}\n\t\tdefaultSceneSetting.r = function () {\n\t\t\treturn 3;\n\t\t};\n\t\tdefaultSceneSetting.fill = function () {\n\t\t\treturn '#FFF';\n\t\t};\n\t\tdefaultSceneSetting.yScale = function () {\n\t\t\tyScale.domain([0, 1]);\n\t\t};\n\t\tdefaultSceneSetting.opacityCircles = function () {\n\t\t\treturn 1;\n\t\t};\n\t\tdefaultSceneSetting.opacityAnnotations = function () {\n\t\t\treturn 0;\n\t\t};\n\n\t\tdefaultSceneSetting.yScale();\n\n\t\t$jobCircles.transition().at('cy', defaultSceneSetting.cy).at('r', defaultSceneSetting.r).st('fill', defaultSceneSetting.fill).st('opacity', defaultSceneSetting.opacityCircles);\n\n\t\t$chartSvg.selectAll('g.similarity-annotation').transition().st('opacity', defaultSceneSetting.opacityCircles);\n\n\t\tyAxisGroup.st('opacity', defaultSceneSetting.opacityAnnotations);\n\n\t\t$automatability_LABEL.transition().st('opacity', defaultSceneSetting.opacityAnnotations);\n\n\t\t$automatabilityBisectingGroup.transition().st('opacity', defaultSceneSetting.opacityAnnotations);\n\n\t\t$similarityAxisLabel.transition().st('opacity', 1).at('y', X_AXIS_LABEL_HEIGHT);\n\t} else if (step === 'xy-axis-scatter') {\n\n\t\t$chartSvg.selectAll('g.similarity-annotation').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.annotation-group-stacked').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.anno-group-sailors').st('opacity', 1);\n\n\t\t$similarityAnnotations.classed('invisible', true);\n\n\t\tyScale.domain([0, 1]);\n\t\tyAxisGroup.transition().call(yAxisLabel);\n\n\t\tvar Y_AXIS_ANNOTATION_HEIGHT = yMaxScaleValue * 1.05;\n\n\t\tyAxisGroup.transition().st('opacity', 1);\n\n\t\t$automatability_LABEL.transition().st('opacity', 1);\n\n\t\t$chartSvg.selectAll('text.axis-label').transition().at('y', Y_AXIS_ANNOTATION_HEIGHT);\n\n\t\t$jobCircles.classed('invisible', false).transition().at('cy', function (d) {\n\t\t\treturn yScale(keyObjectJobAuto[d.id_compared]);\n\t\t}).st('opacity', 1);\n\n\t\t$automatabilityBisectingGroup\n\t\t// .st('visibility', 'visible')\n\t\t.transition().st('opacity', defaultSceneSetting.opacityCircles).at('transform', 'translate(0,' + yScale(keyObjectJobAuto[selectedJobID]) + ')');\n\t} else if (step === 'xy-axes-scatter') {\n\n\t\t$chartSvg.selectAll('g.annotation-group-stacked').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.anno-group-ambulance').st('opacity', 1);\n\n\t\t$jobCircles.classed('invisible', false);\n\n\t\t$similarityAnnotations.classed('invisible', true);\n\n\t\tyScale.domain([0, 0.79]);\n\n\t\tyAxisGroup.transition().call(yAxisLabel);\n\n\t\t// $jobCircles\n\t\t//   .transition()\n\t\t//   .at('cy', d=>{return yScale(keyObjectJobAuto[d.id_compared])})\n\t\t//   .st('opacity',d=>{\n\t\t//     if (+keyObjectJobAuto[d.id_compared]>+keyObjectJobAuto[d.id_selected]){return 0}\n\t\t//     else {return 1}\n\t\t//   })\n\n\n\t\t$automatabilityBisectingGroup.transition().at('transform', 'translate(0,' + yScale(keyObjectJobAuto[selectedJobID]) + ')').st('opacity', 0);\n\n\t\t$jobCircles.transition().st('opacity', function (d) {\n\t\t\treturn +keyObjectJobAuto[d.id_compared] > +keyObjectJobAuto[d.id_selected] ? 0 : 1;\n\t\t})\n\t\t// .transition()\n\t\t.at('cy', function (d) {\n\t\t\treturn yScale(keyObjectJobAuto[d.id_compared]);\n\t\t}).st('fill', '#FFF').at('r', 3);\n\n\t\t$legendWages.st('visibility', 'hidden');\n\t} else if (step === 'xy-axes-scatter-filtered') {\n\n\t\t$chartSvg.selectAll('g.legend__wages').st('opacity', 1);\n\n\t\t$chartSvg.selectAll('g.annotation-group-stacked').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.anno-group-shipengineers').st('opacity', 1);\n\n\t\t$jobCircles.classed('invisible', false);\n\n\t\t$similarityAnnotations.classed('invisible', true);\n\n\t\t$legendjobNumber.transition().st('opacity', 0);\n\t\t// .st('visibility','hidden')\n\n\t\t$legendWages.transition().st('visibility', 'visible');\n\n\t\t$jobCircles.transition().at('r', 3).st('fill', function (d) {\n\t\t\tvar jobSelectedWage = keyObjectJobWage[d.id_selected];\n\t\t\tvar jobComparedWage = keyObjectJobWage[d.id_compared];\n\t\t\tvar wageChange = jobComparedWage / jobSelectedWage;\n\t\t\treturn scalesObject.colorScale(wageChange);\n\t\t}).st('opacity', function (d) {\n\t\t\tif (keyObjectJobWage[d.id_selected] < keyObjectJobWage[d.id_compared] && keyObjectJobAuto[d.id_selected] > keyObjectJobAuto[d.id_compared]) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t} else if (step === 'show-similarity-auto-wage') {\n\t\t$chartSvg.selectAll('g.legend__wages').st('opacity', 1);\n\n\t\t$chartSvg.selectAll('g.annotation-group-stacked').st('opacity', 0);\n\n\t\tdropdownDefaultTrigger = true;\n\n\t\t$chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.anno-group-final').st('opacity', 1);\n\n\t\tif ($chartContainer.select('.job-selector__dropdown').property('value') !== 'Pick another job') {\n\t\t\tdropDownChange();\n\t\t} else {}\n\n\t\t$jobCircles = $chartSvg.selectAll('circle.job').st('stroke', 'gray');\n\n\t\t$jobDropdownMenu.transition().st('opacity', 0);\n\n\t\t$legendjobNumber.transition().st('opacity', 1);\n\n\t\t$jobCircles.transition().at('r', function (d) {\n\t\t\tvar wage = keyObjectJobNumber[d.id_compared];\n\t\t\treturn scalesObject.radiusScale(wage);\n\t\t});\n\n\t\t$chartContainer.selectAll('.job-selector__container').st('visibility', 'hidden');\n\t} else if (step === 'show-similarity-auto-wage-number') {\n\n\t\t$chartSvg.selectAll('g.legend__wages').st('opacity', 1);\n\n\t\t$chartSvg.selectAll('g.annotation-group-stacked').st('opacity', 0);\n\n\t\t$chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n\t\tdropdownDefaultTrigger = false;\n\n\t\t$chartContainer.selectAll('.job-selector__container').st('visibility', 'visible');\n\t\t// .st('position','absolute')\n\t\t// .st('top', '1%')\n\t\t// .st('left', '25%')\n\n\t\t$jobDropdownMenu.transition().st('opacity', 1);\n\t\t// .st('visibility','visible')\n\t} else if (step === 'show-similarity-auto-wage-number') {\n\t\td3.select('figure').classed('sticky', false);\n\t} else if (step === 'conclusion') {\n\t\tif (isMobile) {\n\t\t\t$chartContainer.selectAll('.job-selector__container').st('visibility', 'hidden');\n\t\t}\n\t}\n}\n\nfunction init() {\n\treturn new Promise(function (resolve, reject) {\n\t\tvar _d;\n\n\t\t(_d = d3).loadData.apply(_d, files.concat([function (err, response) {\n\t\t\tif (err) reject();else {\n\t\t\t\tcrosswalk = response[0];\n\t\t\t\tsimilarity = response[1];\n\t\t\t\tcrosswalkSkills = response[2];\n\t\t\t\tskills = response[3];\n\n\t\t\t\tselectedJobData = selectJobData(similarity, selectedJobID);\n\t\t\t\tvar leastSimilarJob = findLeastSimilarJob(selectedJobData);\n\t\t\t\tvar mostSimilarJob = findMostSimilarJob(selectedJobData);\n\n\t\t\t\t// Making sure crosswalk and top skill data is in the right format\n\t\t\t\tformatCrosswalk(crosswalk);\n\t\t\t\tformatSimilarityValues(similarity);\n\t\t\t\tformatCrosswalkSkills(crosswalkSkills);\n\t\t\t\tformatTopSkillsByJob(skills);\n\n\t\t\t\t// Filling out key object data\n\t\t\t\tkeySetupJobName(crosswalk, keyObjectJobName);\n\t\t\t\tkeySetupJobNumber(crosswalk, keyObjectJobNumber);\n\t\t\t\tkeySetupJobAutomation(crosswalk, keyObjectJobAuto);\n\t\t\t\tkeySetupJobWage(crosswalk, keyObjectJobWage);\n\t\t\t\tkeySetupJobSkills(crosswalkSkills, keyObjectSkillName);\n\n\t\t\t\tresize();\n\t\t\t\tscalesObject = setupScales();\n\t\t\t\tsetupDOMElements(leastSimilarJob, mostSimilarJob);\n\t\t\t\tsetupLegends(scalesObject.radiusScale, scalesObject.colorScale);\n\t\t\t\tcreateDropdown();\n\t\t\t\tsetupTooltip();\n\n\t\t\t\tcreateCircles();\n\t\t\t\tsetupAnnotations();\n\n\t\t\t\tresolve(skills);\n\t\t\t}\n\t\t}]));\n\t});\n}\n\nexports.default = { init: init, updateStep: updateStep };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvc2NhdHRlci5qcz9kMzQxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBkMyAqL1xuXG4vLyBTZXR0aW5nIHVwIGRhdGEgYW5kIGRhdGEgb2JqZWN0c1xuY29uc3QgTUFYX0FVVE8gPSAxO1xuY29uc3QgTUlOX0FVVE8gPSAwO1xuXG5sZXQgVkVSVElDQUxfTEFCRUxfUE9TSVRJT05fU0hPUlRFUiA9IG51bGw7XG5sZXQgVkVSVElDQUxfTEFCRUxfUE9TSVRJT05fVEFMTEVSID0gbnVsbDtcbmxldCBMSU5FX0hFSUdIVF9MRUFTVF9TSU1JTEFSX0pPQiA9IG51bGw7XG5sZXQgTElORV9IRUlHSFRfTU9TVF9TSU1JTEFSX0pPQiA9IG51bGw7XG5sZXQgSU5UUk9fWV9BWElTX0xPQ0FUSU9OID0gbnVsbDtcbmxldCBYX0FYSVNfTEFCRUxfSEVJR0hUID0gbnVsbDtcblxuY29uc3Qgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuY29uc3Qgdmlld3BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5sZXQgc3ZnV2lkdGggPSBudWxsO1xubGV0IHhNYXhTY2FsZVZhbHVlID0gbnVsbDtcbmxldCB3aWR0aFBlcmNlbnRhZ2UgPSBudWxsO1xubGV0IHhQYWRkaW5nID0gbnVsbDtcblxubGV0IGlzTW9iaWxlID0gZmFsc2U7XG5sZXQgZHJvcGRvd25EZWZhdWx0VHJpZ2dlciA9IGZhbHNlO1xuXG5sZXQgeVNjYWxlID0gbnVsbDtcbmxldCB5TWF4U2NhbGVWYWx1ZSA9IG51bGw7XG5sZXQgeVBhZGRpbmcgPSBudWxsO1xuY29uc3QgdG9vbHRpcFhTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLDEwMF0pO1xubGV0IGNoYXJ0VG9vbHRpcENsb3NpbmdUcmlnZ2VyID0gZmFsc2U7XG5cbmxldCB5QXhpc0dyb3VwID0gbnVsbDtcbmxldCB5QXhpc0xhYmVsID0gbnVsbDtcblxubGV0ICR0cnVja2VyRGV2ZWxvcGVyWEF4aXMgPSBudWxsO1xubGV0ICRhdXRvbWF0YWJpbGl0eV9MQUJFTCA9IG51bGw7XG5sZXQgJGpvYkNpcmNsZXMgPSBudWxsO1xubGV0ICRhdXRvbWF0YWJpbGl0eUJpc2VjdGluZ0dyb3VwID0gbnVsbDtcblxubGV0ICR4QXhpc1RleHRMYWJlbCA9IG51bGw7XG5sZXQgbWF4U2ltaWxhcml0eUxhYmVsID0gbnVsbDtcbmxldCBtaW5TaW1pbGFyaXR5TGFiZWwgPSBudWxsO1xubGV0ICRzaW1pbGFyaXR5QW5ub3RhdGlvbnMgPSBudWxsO1xuXG5sZXQgc2NhbGVzT2JqZWN0ID0ge31cblxubGV0ICRsZWdlbmRXYWdlcyA9IG51bGw7XG5sZXQgJGxlZ2VuZGpvYk51bWJlciA9IG51bGw7XG5cbi8vIGxldCBhbGxEYXRhID0gbnVsbDtcbmxldCBzaW1pbGFyaXR5ID0gbnVsbDtcbmxldCBzZWxlY3RlZEpvYkRhdGEgPSBudWxsO1xubGV0IHNlbGVjdGVkSm9iSUQ9NDE1O1xuXG5sZXQgam9iVG9vbHRpcCA9IG51bGw7XG5sZXQgam9iU2tpbGxzQ29udGFpbmVyID0gbnVsbDtcblxubGV0ICRqb2JEcm9wZG93bk1lbnUgPSBudWxsO1xubGV0ICRzaW1pbGFyaXR5QXhpc0xhYmVsID0gbnVsbDtcblxuXG5jb25zdCBkZWZhdWx0U2NlbmVTZXR0aW5nID0geydjeCc6JycsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICdjeSc6JycsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCBcdCAncic6JycsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCBcdCAnZmlsbCc6JycsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCBcdCAneVNjYWxlJzonJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0IFx0ICdvcGFjaXR5Q2lyY2xlcyc6JycsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICdvcGFjaXR5QW5ub3RhdGlvbnMnOicnXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCBcdCB9XG5cblxuLy8gS2V5IG9iamVjdHMgZm9yIGRpc3BsYXlpbmcgdmFsdWVzIGJhc2VkIG9uIGpvYiBpZFxuY29uc3Qga2V5T2JqZWN0Sm9iTmFtZSA9IHt9XG5jb25zdCBrZXlPYmplY3RKb2JOdW1iZXIgPSB7fVxuY29uc3Qga2V5T2JqZWN0Sm9iQXV0byA9IHt9XG5jb25zdCBrZXlPYmplY3RKb2JXYWdlID0ge31cbmNvbnN0IGtleU9iamVjdFNraWxsTmFtZSA9IHt9XG5cbmxldCBjcm9zc3dhbGsgPSBudWxsO1xubGV0IGNyb3Nzd2Fsa1NraWxscyA9IG51bGw7XG5sZXQgc2VsZWN0ZWRKb2JTa2lsbHMgPSBbMCwwLDAsMCwwXVxubGV0IHNraWxscyA9IFtdXG5cbi8vIGNyZWF0aW5nIGFycmF5IG9mIGZpbGVzIHRvIGxvYWRcbmNvbnN0IHBhdGhEYXRhID0gJ2Fzc2V0cy9kYXRhLydcbmNvbnN0IGZpbGVOYW1lcyA9IFsnY3Jvc3N3YWxrX2pvYnMnLCdzaW1pbGFyaXR5JywnY3Jvc3N3YWxrX3NraWxscycsJ3NraWxscyddXG5sZXQgZmlsZXMgPSBbXVxuZmlsZU5hbWVzLmZvckVhY2goKGNhdGVnb3J5KT0+e1xuXHRmaWxlcy5wdXNoKHBhdGhEYXRhK2NhdGVnb3J5KycuY3N2Jylcbn0pXG5cbmNvbnN0ICRjaGFydENvbnRhaW5lciA9IGQzLnNlbGVjdCgnZmlndXJlLnN2Zy1jb250YWluZXInKVxuY29uc3QgJGNoYXJ0U3ZnID0gJGNoYXJ0Q29udGFpbmVyLnNlbGVjdCgnc3ZnLnNjYXR0ZXInKVxuXG5sZXQgeFNjYWxlID0gbnVsbDtcblxuY29uc3Qgd2FnZVJhdGlvQXJyYXkgPSBbMC4yLDAuNSwgMC43NSwgMC45LDEuMSwgMS4yNSwgMiwgNV1cbmNvbnN0IHdhZ2VDb2xvcnMgPSBbJyNhNTAwMjYnLCcjZDczMDI3JywnI2Y0NmQ0MycsJyNmZWUwOTAnLCcjZTBmM2Y4JywnIzc0YWRkMScsJyM0NTc1YjQnLCcjMzEzNjk1J11cblxuZnVuY3Rpb24gc2V0dXBBbm5vdGF0aW9ucygpe1xuXG5cdGNvbnN0IGFtYnVsYW5jZURyaXZlcnNDb29yZHMgPSB7fTtcblx0Y29uc3Qgc2FpbG9yc0Nvb3JkcyA9IHt9O1xuXHRjb25zdCBlbGVjdHJpY2FsUG93ZXJMaW5lSW5zdGFsbGVyc0FuZFJlcGFpcmVyc0Nvb3JkcyA9IHt9O1xuXHRjb25zdCBzaGlwRW5naW5lZXJzQ29vcmRzID0ge307XG5cdGNvbnN0IGVsZWN0cmljaWFuc0Nvb3JkcyA9IHt9O1xuXHRjb25zdCBzdXBlcnZpc29yc0Nvb3JkcyA9IHt9XG5cblx0Y29uc3QgYURfaWQgPSAyMTg7XG5cdGNvbnN0IHNfaWQgPSA0NDU7XG5cdGNvbnN0IGVQTElBUl9pZCA9IDE2MTtcblx0Y29uc3Qgc0VfaWQgPSAxMjU7XG5cdGNvbnN0IGVfaWQgPSAxODc7XG5cdGNvbnN0IHN1cF9pZCA9IDE5NDtcblxuXHRjb25zdCBhdXRvX2FtYnVsYW5jZURyaXZlcnMgPSBrZXlPYmplY3RKb2JBdXRvW2FEX2lkXVxuXHRjb25zdCBhdXRvX3NhaWxvcnMgPSBrZXlPYmplY3RKb2JBdXRvW3NfaWRdXG5cdGNvbnN0IGF1dG9fZWxlY3RyaWNhbFBvd2VyTGluZUluc3RhbGxlcnNBbmRSZXBhaXJlcnMgPSBrZXlPYmplY3RKb2JBdXRvW2VQTElBUl9pZF1cblx0Y29uc3QgYXV0b19zaGlwRW5naW5lZXJzID0ga2V5T2JqZWN0Sm9iQXV0b1tzRV9pZF1cblx0Y29uc3QgYXV0b19lbGVjdHJpY2lhbnMgPSBrZXlPYmplY3RKb2JBdXRvW2VfaWRdXG5cdGNvbnN0IGF1dG9fc3VwZXJ2aXNvcnMgPSBrZXlPYmplY3RKb2JBdXRvW3N1cF9pZF1cblxuXHRjb25zdCBzaW1pbGFyaXR5X2FtYnVsYW5jZURyaXZlcnMgPSBzZWxlY3RlZEpvYkRhdGEuZmlsdGVyKGpvYj0+K2pvYi5pZF9jb21wYXJlZD09PSthRF9pZClcblx0Y29uc3Qgc2ltaWxhcml0eV9zYWlsb3JzID0gc2VsZWN0ZWRKb2JEYXRhLmZpbHRlcihqb2I9Pitqb2IuaWRfY29tcGFyZWQ9PT0rc19pZClcblx0Y29uc3Qgc2ltaWxhcml0eV9lbGVjdHJpY2FsUG93ZXJMaW5lSW5zdGFsbGVyc0FuZFJlcGFpcmVycyA9IHNlbGVjdGVkSm9iRGF0YS5maWx0ZXIoam9iPT4ram9iLmlkX2NvbXBhcmVkPT09K2VQTElBUl9pZClcblx0Y29uc3Qgc2ltaWxhcml0eV9zaGlwRW5naW5lZXJzID0gc2VsZWN0ZWRKb2JEYXRhLmZpbHRlcihqb2I9Pitqb2IuaWRfY29tcGFyZWQ9PT0rc0VfaWQpXG5cdGNvbnN0IHNpbWlsYXJpdHlfZWxlY3RyaWNpYW5zID0gc2VsZWN0ZWRKb2JEYXRhLmZpbHRlcihqb2I9Pitqb2IuaWRfY29tcGFyZWQ9PT0rZV9pZClcblx0Y29uc3Qgc2ltaWxhcml0eV9zdXBlcnZpc29ycyA9IHNlbGVjdGVkSm9iRGF0YS5maWx0ZXIoam9iPT4ram9iLmlkX2NvbXBhcmVkPT09K3N1cF9pZClcblxuXG5cdGFtYnVsYW5jZURyaXZlcnNDb29yZHMueENvb3JkID0geFNjYWxlKCtzaW1pbGFyaXR5X2FtYnVsYW5jZURyaXZlcnNbMF0uc2ltaWxhcml0eSlcblx0c2FpbG9yc0Nvb3Jkcy54Q29vcmQgPSB4U2NhbGUoK3NpbWlsYXJpdHlfc2FpbG9yc1swXS5zaW1pbGFyaXR5KVxuXHQvLyBlbGVjdHJpY2FsUG93ZXJMaW5lSW5zdGFsbGVyc0FuZFJlcGFpcmVyc0Nvb3Jkcy54Q29vcmQgPSB4U2NhbGUoc2ltaWxhcml0eV9lbGVjdHJpY2FsUG93ZXJMaW5lSW5zdGFsbGVyc0FuZFJlcGFpcmVyc1swXS5zaW1pbGFyaXR5KVxuXHRzaGlwRW5naW5lZXJzQ29vcmRzLnhDb29yZCA9IHhTY2FsZShzaW1pbGFyaXR5X3NoaXBFbmdpbmVlcnNbMF0uc2ltaWxhcml0eSlcblx0ZWxlY3RyaWNpYW5zQ29vcmRzLnhDb29yZCA9IHhTY2FsZShzaW1pbGFyaXR5X2VsZWN0cmljaWFuc1swXS5zaW1pbGFyaXR5KVxuXHRzdXBlcnZpc29yc0Nvb3Jkcy54Q29vcmQgPSB4U2NhbGUoc2ltaWxhcml0eV9zdXBlcnZpc29yc1swXS5zaW1pbGFyaXR5KVxuXG5cdHlTY2FsZS5kb21haW4oWzAsMV0pXG5cdHNhaWxvcnNDb29yZHMueUNvb3JkID0geVNjYWxlKCthdXRvX3NhaWxvcnMpXG5cblx0eVNjYWxlLmRvbWFpbihbMCwwLjc5XSlcblx0YW1idWxhbmNlRHJpdmVyc0Nvb3Jkcy55Q29vcmQgPSB5U2NhbGUoK2F1dG9fYW1idWxhbmNlRHJpdmVycylcblx0Ly8gZWxlY3RyaWNhbFBvd2VyTGluZUluc3RhbGxlcnNBbmRSZXBhaXJlcnNDb29yZHMueUNvb3JkID0geVNjYWxlKGF1dG9fZWxlY3RyaWNhbFBvd2VyTGluZUluc3RhbGxlcnNBbmRSZXBhaXJlcnMpXG5cdHNoaXBFbmdpbmVlcnNDb29yZHMueUNvb3JkID0geVNjYWxlKGF1dG9fc2hpcEVuZ2luZWVycylcblx0ZWxlY3RyaWNpYW5zQ29vcmRzLnlDb29yZCA9IHlTY2FsZShhdXRvX2VsZWN0cmljaWFucylcblx0c3VwZXJ2aXNvcnNDb29yZHMueUNvb3JkID0geVNjYWxlKGF1dG9fc3VwZXJ2aXNvcnMpXG5cblxuXHRjb25zdCBhbWJ1bGFuY2VfQW5ub3RhdGlvbllCdW1wID0gLTQwO1xuXHRjb25zdCBhbWJ1bGFuY2VfQW5ub3RhdGlvblhCdW1wID0gNVxuXG5cdGNvbnN0IHNhaWxvcnNfQW5ub3RhdGlvbllCdW1wID0gLTQwO1xuXHRjb25zdCBzYWlsb3JzX0Fubm90YXRpb25YQnVtcCA9IDBcblxuXHRjb25zdCBwb3dlcmxpbmVfQW5ub3RhdGlvbllCdW1wID0gLTE1O1xuXHRjb25zdCBwb3dlcmxpbmVfQW5ub3RhdGlvblhCdW1wID0gMTVcblxuXHRjb25zdCBzaGlwX0Fubm90YXRpb25ZQnVtcCA9IC0xNTtcblx0Y29uc3Qgc2hpcF9Bbm5vdGF0aW9uWEJ1bXAgPSAwO1xuXG5cdGNvbnN0IGVsZWN0cmljaWFuX0Fubm90YXRpb25ZQnVtcCA9IC0zMDtcblx0Y29uc3QgZWxlY3RyaWNpYW5fQW5ub3RhdGlvblhCdW1wID0gMzBcblxuXHRjb25zdCBzdXBlcnZpc29yc19Bbm5vdGF0aW9uWUJ1bXAgPSAzMDtcblx0Y29uc3Qgc3VwZXJ2aXNvcnNfQW5ub3RhdGlvblhCdW1wID0gMzBcblxuXHRsZXQgYW5ub0Nvbm5lY3Rvcj1cImFycm93XCI7XG5cblx0Y29uc3QgYW1idWxhbmNlQW5ubyA9IFtcblx0XHR7bm90ZToge3RpdGxlOidBbWJ1bGFuY2UgRHJpdmVycycsd3JhcDoxMDAsYWxpZ246XCJtaWRkbGVcIix9LFxuXHRcdFx0Y29ubmVjdG9yOntlbmQ6YW5ub0Nvbm5lY3Rvcn0sXG4gICAgXHRcdFx0eDphbWJ1bGFuY2VEcml2ZXJzQ29vcmRzLnhDb29yZCx5OmFtYnVsYW5jZURyaXZlcnNDb29yZHMueUNvb3JkLGR4OmFtYnVsYW5jZV9Bbm5vdGF0aW9uWEJ1bXAsZHk6YW1idWxhbmNlX0Fubm90YXRpb25ZQnVtcFxuICBcdFx0fVxuXHRdO1xuXG5cdGNvbnN0IHNhaWxvcnNBbm5vID0gW1xuXHRcdHtub3RlOiB7dGl0bGU6J1NhaWxvcnMnLHdyYXA6MTAwLGFsaWduOlwibWlkZGxlXCIsfSxcblx0XHRcdGNvbm5lY3Rvcjp7ZW5kOmFubm9Db25uZWN0b3J9LFxuICAgIFx0XHRcdHg6c2FpbG9yc0Nvb3Jkcy54Q29vcmQseTpzYWlsb3JzQ29vcmRzLnlDb29yZCxkeDpzYWlsb3JzX0Fubm90YXRpb25YQnVtcCxkeTpzYWlsb3JzX0Fubm90YXRpb25ZQnVtcFxuICBcdFx0fVxuXHRdO1xuXG5cdGNvbnN0IHNoaXBFbmdpbmVlcnNBbm5vID0gW1xuXHRcdHtub3RlOiB7dGl0bGU6J1NoaXAgRW5naW5lZXJzJyx3cmFwOjEwMCxhbGlnbjpcIm1pZGRsZVwiLH0sXG5cdFx0XHRjb25uZWN0b3I6e2VuZDphbm5vQ29ubmVjdG9yfSxcbiAgICBcdFx0XHR4OnNoaXBFbmdpbmVlcnNDb29yZHMueENvb3JkLHk6c2hpcEVuZ2luZWVyc0Nvb3Jkcy55Q29vcmQsZHg6c2hpcF9Bbm5vdGF0aW9uWEJ1bXAsZHk6c2hpcF9Bbm5vdGF0aW9uWUJ1bXBcbiAgXHRcdH1cblx0XTtcblxuXHRjb25zdCBlbGVjdHJpY2lhbnNBbm5vID0gW1xuXHRcdHtub3RlOiB7dGl0bGU6J0VsZWN0cmljaWFucycsd3JhcDoxMDAsYWxpZ246XCJtaWRkbGVcIix9LFxuXHRcdFx0Y29ubmVjdG9yOntlbmQ6YW5ub0Nvbm5lY3Rvcn0sXG5cdFx0XHR4OmVsZWN0cmljaWFuc0Nvb3Jkcy54Q29vcmQseTplbGVjdHJpY2lhbnNDb29yZHMueUNvb3JkLGR4OmVsZWN0cmljaWFuX0Fubm90YXRpb25YQnVtcCxkeTplbGVjdHJpY2lhbl9Bbm5vdGF0aW9uWUJ1bXBcblx0XHR9XG5cdF07XG5cblx0Y29uc3Qgc3VwZXJ2aXNvcnNBbm5vID0gW1xuXHRcdHtub3RlOiB7dGl0bGU6J0NvbnN0cnVjdGlvbiBTdXBlcnZpc29ycycsd3JhcDoxMDAsYWxpZ246XCJtaWRkbGVcIix9LFxuXHRcdFx0Y29ubmVjdG9yOntlbmQ6YW5ub0Nvbm5lY3Rvcn0sXG5cdFx0XHR4OnN1cGVydmlzb3JzQ29vcmRzLnhDb29yZCx5OnN1cGVydmlzb3JzQ29vcmRzLnlDb29yZCxkeDpzdXBlcnZpc29yc19Bbm5vdGF0aW9uWEJ1bXAsZHk6c3VwZXJ2aXNvcnNfQW5ub3RhdGlvbllCdW1wXG5cdFx0fVxuXHRdO1xuXG5cblx0Y29uc3QgbWFrZUFtYnVsYW5jZUpvYkFubm8gPSBkMy5hbm5vdGF0aW9uKClcbiAgXHRcdFx0LnR5cGUoZDMuYW5ub3RhdGlvbkNhbGxvdXQpXG4gIFx0XHRcdC5hbm5vdGF0aW9ucyhhbWJ1bGFuY2VBbm5vKVxuXG5cdGNvbnN0IG1ha2VTYWlsb3JzSm9iQW5ubyA9IGQzLmFubm90YXRpb24oKVxuICBcdFx0XHQudHlwZShkMy5hbm5vdGF0aW9uQ2FsbG91dClcbiAgXHRcdFx0LmFubm90YXRpb25zKHNhaWxvcnNBbm5vKVxuXG5cdGNvbnN0IG1ha2VTaGlwRW5naW5lZXJzSm9iQW5ubyA9IGQzLmFubm90YXRpb24oKVxuICBcdFx0XHQudHlwZShkMy5hbm5vdGF0aW9uQ2FsbG91dClcbiAgXHRcdFx0LmFubm90YXRpb25zKHNoaXBFbmdpbmVlcnNBbm5vKVxuXG5cdGNvbnN0IG1ha2VFbGVjdHJpY2lhbnNKb2JBbm5vID0gZDMuYW5ub3RhdGlvbigpXG4gIFx0XHRcdC50eXBlKGQzLmFubm90YXRpb25DYWxsb3V0KVxuICBcdFx0XHQuYW5ub3RhdGlvbnMoZWxlY3RyaWNpYW5zQW5ubylcblxuXHRjb25zdCBtYWtlU3VwZXJ2aXNvcnNKb2JBbm5vID0gZDMuYW5ub3RhdGlvbigpXG5cdFx0LnR5cGUoZDMuYW5ub3RhdGlvbkNhbGxvdXQpXG5cdFx0LmFubm90YXRpb25zKHN1cGVydmlzb3JzQW5ubylcblxuXG5cblx0JGNoYXJ0U3ZnLmFwcGVuZChcImdcIilcbiAgXHRcdFx0Ly8gLmF0dHIoXCJ0cmFuc2Zvcm1cIixgdHJhbnNsYXRlKFwiJHswfVwiLFwiJHstMzB9XCIpYClcbiAgXHRcdFx0LmF0dHIoXCJjbGFzc1wiLFwiYW5uby1ncm91cC1hbWJ1bGFuY2UgYW5uby1ncm91cFwiKVxuICBcdFx0XHQuY2FsbChtYWtlQW1idWxhbmNlSm9iQW5ubylcblxuXG5cdCRjaGFydFN2Zy5hcHBlbmQoXCJnXCIpXG5cdC8vIC5hdHRyKFwidHJhbnNmb3JtXCIsYHRyYW5zbGF0ZShcIiR7MH1cIixcIiR7LTMwfVwiKWApXG5cdFx0LmF0dHIoXCJjbGFzc1wiLFwiYW5uby1ncm91cC1zYWlsb3JzIGFubm8tZ3JvdXBcIilcblx0XHQuY2FsbChtYWtlU2FpbG9yc0pvYkFubm8pXG5cblx0JGNoYXJ0U3ZnLmFwcGVuZChcImdcIilcblx0Ly8gLmF0dHIoXCJ0cmFuc2Zvcm1cIixgdHJhbnNsYXRlKFwiJHswfVwiLFwiJHstMzB9XCIpYClcblx0XHQuYXR0cihcImNsYXNzXCIsXCJhbm5vLWdyb3VwLXNoaXBlbmdpbmVlcnMgYW5uby1ncm91cFwiKVxuXHRcdC5jYWxsKG1ha2VTaGlwRW5naW5lZXJzSm9iQW5ubylcblxuXHQkY2hhcnRTdmcuYXBwZW5kKFwiZ1wiKVxuXHQvLyAuYXR0cihcInRyYW5zZm9ybVwiLGB0cmFuc2xhdGUoXCIkezB9XCIsXCIkey0zMH1cIilgKVxuXHRcdC5hdHRyKFwiY2xhc3NcIixcImFubm8tZ3JvdXAtZWxlY3RyaWNpYW5zIGFubm8tZ3JvdXAgYW5uby1ncm91cC1maW5hbFwiKVxuXHRcdC5jYWxsKG1ha2VFbGVjdHJpY2lhbnNKb2JBbm5vKVxuXG5cdCRjaGFydFN2Zy5hcHBlbmQoXCJnXCIpXG5cdC8vIC5hdHRyKFwidHJhbnNmb3JtXCIsYHRyYW5zbGF0ZShcIiR7MH1cIixcIiR7LTMwfVwiKWApXG5cdFx0LmF0dHIoXCJjbGFzc1wiLFwiYW5uby1ncm91cC1zdXBlcnZpc29ycyBhbm5vLWdyb3VwIGFubm8tZ3JvdXAtZmluYWxcIilcblx0XHQuY2FsbChtYWtlU3VwZXJ2aXNvcnNKb2JBbm5vKVxuXG5cdCRjaGFydFN2Z1xuXHRcdC5zZWxlY3RBbGwoJ2cuYW5uby1ncm91cCcpXG5cdFx0LnN0KCdvcGFjaXR5JywwKVxuXG59XG5cbmZ1bmN0aW9uIG51bWJlcldpdGhDb21tYXMoeCl7XG5cdHJldHVybiB4LnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIsXCIpO1xufVxuXG5mdW5jdGlvbiBzZWxlY3RKb2JEYXRhKGRhdGEsIHNlbGVjdGVkSm9iSUQpe1xuXHRjb25zdCBzZWxlY3RlZEpvYkRhdGFBbGxKb2JzID0gZGF0YS5maWx0ZXIoaXRlbT0+ICtpdGVtLmlkX3NlbGVjdGVkID09PSArc2VsZWN0ZWRKb2JJRClcblx0Y29uc3Qgc2VsZWN0ZWRKb2JEYXRhID0gc2VsZWN0ZWRKb2JEYXRhQWxsSm9icy5maWx0ZXIoaXRlbT0+ICtpdGVtLmlkX2NvbXBhcmVkICE9ICtpdGVtLmlkX3NlbGVjdGVkKVxuXHRyZXR1cm4gc2VsZWN0ZWRKb2JEYXRhXG59XG5cbmZ1bmN0aW9uIHNldHVwWFNjYWxlKHNlbGVjdGVkSm9iRGF0YSl7XG5cdHN2Z1dpZHRoID0gJGNoYXJ0U3ZnLmF0KCd3aWR0aCcpXG5cdHdpZHRoUGVyY2VudGFnZSA9IDAuOTtcblx0eE1heFNjYWxlVmFsdWUgPSBzdmdXaWR0aCAqIHdpZHRoUGVyY2VudGFnZTtcblx0eFBhZGRpbmcgPSBpc01vYmlsZT8gKDEtd2lkdGhQZXJjZW50YWdlKzAuMSkqc3ZnV2lkdGg6KDEtd2lkdGhQZXJjZW50YWdlKSpzdmdXaWR0aDtcblxuXHRjb25zdCB4U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG5cdFx0LmRvbWFpbihkMy5leHRlbnQoc2VsZWN0ZWRKb2JEYXRhLCBkPT4gZC5zaW1pbGFyaXR5KSlcblx0XHQucmFuZ2UoWzAreFBhZGRpbmcsIHhNYXhTY2FsZVZhbHVlXSk7XG5cdHJldHVybiB4U2NhbGU7XG59XG5cbmZ1bmN0aW9uIGNvbXBhcmUoYSxiKSB7XG5cdGlmIChhLmltcCA8IGIuaW1wKVxuXHRcdHJldHVybiAxO1xuXHRpZiAoYS5pbXAgPiBiLmltcClcblx0XHRyZXR1cm4gLTE7XG5cdHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlSm9iTmFtZXMoYSxiKSB7XG5cdGlmIChhLmpvYl9uYW1lIDwgYi5qb2JfbmFtZSlcblx0XHRyZXR1cm4gLTE7XG5cdGlmIChhLmpvYl9uYW1lID4gYi5qb2JfbmFtZSlcblx0XHRyZXR1cm4gMTtcblx0cmV0dXJuIDA7XG59XG5cblxuZnVuY3Rpb24gZmluZExlYXN0U2ltaWxhckpvYihzZWxlY3RlZEpvYkRhdGEpe1xuXHRjb25zdCBsZWFzdFNpbWlsYXJKb2JWYWx1ZSA9IGQzLm1pbihzZWxlY3RlZEpvYkRhdGEsIGQ9PiBkLnNpbWlsYXJpdHkpO1xuXHRjb25zdCBsZWFzdFNpbWlsYXJKb2IgPSBzZWxlY3RlZEpvYkRhdGEuZmlsdGVyKGpvYj0+am9iLnNpbWlsYXJpdHk9PT1sZWFzdFNpbWlsYXJKb2JWYWx1ZSlcblx0cmV0dXJuIGxlYXN0U2ltaWxhckpvYjtcbn1cblxuZnVuY3Rpb24gZmluZE1vc3RTaW1pbGFySm9iKHNlbGVjdGVkSm9iRGF0YSl7XG5cdGNvbnN0IG1vc3RTaW1pbGFySm9iVmFsdWUgPSBkMy5tYXgoc2VsZWN0ZWRKb2JEYXRhLCBkPT4gZC5zaW1pbGFyaXR5KTtcblx0Y29uc3QgbW9zdFNpbWlsYXJKb2IgPSBzZWxlY3RlZEpvYkRhdGEuZmlsdGVyKGpvYj0+am9iLnNpbWlsYXJpdHk9PT1tb3N0U2ltaWxhckpvYlZhbHVlKVxuXHRyZXR1cm4gbW9zdFNpbWlsYXJKb2I7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0Q3Jvc3N3YWxrKGNyb3Nzd2Fsayl7XG5cdGNyb3Nzd2Fsay5mb3JFYWNoKChpdGVtKT0+e1xuXHRcdGl0ZW0uaWQgICAgPSAraXRlbS5pZDtcblx0XHRpdGVtLmF1dG8gID0gK2l0ZW0uYXV0bztcblx0XHRpdGVtLndhZ2UgID0gK2l0ZW0ud2FnZTtcblx0XHRpdGVtLm51bWJlcj0gK2l0ZW0ubnVtYmVyO1xuXHR9KVxufVxuXG5mdW5jdGlvbiBmb3JtYXRTaW1pbGFyaXR5VmFsdWVzKHNpbWlsYXJpdHkpe1xuXHRzaW1pbGFyaXR5LmZvckVhY2goKGl0ZW0pPT57XG5cdFx0aXRlbS5zaW1pbGFyaXR5ID0gK2l0ZW0uc2ltaWxhcml0eTtcblx0XHRpdGVtLmlkX2NvbXBhcmVkPSAraXRlbS5pZF9jb21wYXJlZDtcblx0XHRpdGVtLmlkX3NlbGVjdGVkPSAraXRlbS5pZF9zZWxlY3RlZDtcblx0fSlcbn1cblxuZnVuY3Rpb24gZm9ybWF0Q3Jvc3N3YWxrU2tpbGxzKGNyb3Nzd2Fsa1NraWxscyl7XG5cdGNyb3Nzd2Fsa1NraWxscy5mb3JFYWNoKGl0ZW09Pntcblx0XHRpdGVtLnNraWxsX2lkPSAraXRlbS5za2lsbF9pZFxuXHR9KVxufVxuXG5mdW5jdGlvbiBmb3JtYXRUb3BTa2lsbHNCeUpvYihza2lsbHMpe1xuXHRza2lsbHMuZm9yRWFjaChpdGVtPT57XG5cdFx0aXRlbS5pZF9zZWxlY3RlZD0gK2l0ZW0uaWRfc2VsZWN0ZWQ7XG5cdFx0aXRlbS5pbXAgICAgICAgID0gK2l0ZW0uaW1wO1xuXHRcdGl0ZW0uc2tpbGxfaWQgICA9ICtpdGVtLnNraWxsX2lkO1xuXHRcdGl0ZW0ucmFuayAgICAgICA9ICtpdGVtLnJhbms7XG5cdH0pXG59XG5cblxuZnVuY3Rpb24ga2V5U2V0dXBKb2JOYW1lKGNyb3Nzd2Fsaywga2V5T2JqZWN0KXtcblx0Y3Jvc3N3YWxrLmZvckVhY2goam9iPT57XG5cdFx0a2V5T2JqZWN0W2pvYi5pZF09am9iLmpvYl9uYW1lO1xuXHR9KVxufVxuXG5mdW5jdGlvbiBrZXlTZXR1cEpvYk51bWJlcihjcm9zc3dhbGssIGtleU9iamVjdCl7XG5cdGNyb3Nzd2Fsay5mb3JFYWNoKGpvYj0+e1xuXHRcdGtleU9iamVjdFtqb2IuaWRdPWpvYi5udW1iZXI7XG5cdH0pXG59XG5cbmZ1bmN0aW9uIGtleVNldHVwSm9iQXV0b21hdGlvbihjcm9zc3dhbGssIGtleU9iamVjdCl7XG5cdGNyb3Nzd2Fsay5mb3JFYWNoKGpvYj0+e1xuXHRcdGtleU9iamVjdFtqb2IuaWRdPWpvYi5hdXRvO1xuXHR9KVxufVxuXG5mdW5jdGlvbiBrZXlTZXR1cEpvYldhZ2UoY3Jvc3N3YWxrLCBrZXlPYmplY3Qpe1xuXHRjcm9zc3dhbGsuZm9yRWFjaChqb2I9Pntcblx0XHRrZXlPYmplY3Rbam9iLmlkXT1qb2Iud2FnZTtcblx0fSlcbn1cblxuZnVuY3Rpb24ga2V5U2V0dXBKb2JTa2lsbHMoY3Jvc3N3YWxrU2tpbGxzLCBrZXlPYmplY3Qpe1xuXHRjcm9zc3dhbGtTa2lsbHMuZm9yRWFjaChza2lsbD0+XG5cdFx0a2V5T2JqZWN0W3NraWxsLnNraWxsX2lkXT1za2lsbC5za2lsbFxuXHQpXG59XG5cblxuZnVuY3Rpb24gc2V0dXBTY2FsZXMoKXtcblxuXG5cdHNjYWxlc09iamVjdC5yYWRpdXNTY2FsZT0gZDMuc2NhbGVTcXJ0KClcblx0XHQuZG9tYWluKFswLGQzLm1heChjcm9zc3dhbGssIChkKT0+e3JldHVybiBkLndhZ2V9KV0pXG5cdFx0LnJhbmdlKFsyLDhdKVxuXG5cdHNjYWxlc09iamVjdC5jb2xvclNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuXHRcdC5kb21haW4od2FnZVJhdGlvQXJyYXkpXG5cdFx0LnJhbmdlKHdhZ2VDb2xvcnMpXG5cblx0cmV0dXJuIHNjYWxlc09iamVjdDtcblxufVxuXG5mdW5jdGlvbiBzZXR1cExlZ2VuZHMocmFkaXVzU2NhbGUsIGNvbG9yU2NhbGUpe1xuXG5cblx0Ly8gTGFiZWwgYXJyYXlzIGZvciB3YWdlIGFuZCBqb2IgbnVtYmVyXG5cdGNvbnN0IHdhZ2VSYXRpb0luY3JlYXNlQXJyYXkgPSBbXG5cdFx0eyd2YWx1ZSc6MS4xLCAnbGFiZWwnOicxMCd9LFxuXHRcdHsndmFsdWUnOjEuMjUsICdsYWJlbCc6JzI1J30sXG5cdFx0eyd2YWx1ZSc6MiwgJ2xhYmVsJzonMTAwJ30sXG5cdFx0eyd2YWx1ZSc6NSwgJ2xhYmVsJzonNDAwJSd9XVxuXG5cdGNvbnN0IGpvYk51bWJlckxhYmVsQXJyYXkgPSBbXG5cdFx0eydzaXplJzoxMDAwMCwgJ2xhYmVsJzonMTBLJ30sXG5cdFx0eydzaXplJzoxMDAwMDAsICdsYWJlbCc6JzUwMEsnfSxcblx0XHR7J3NpemUnOjEwMDAwMDAsICdsYWJlbCc6JzFNJ31cblx0XVxuXG5cdC8vIExFR0VORFNcblx0Ly8gQ3JlYXRpbmcgYW5kIHBvc2l0aW9uaW5nIHRoZSB3YWdlIGxlZ2VuZFxuXHQkbGVnZW5kV2FnZXMgPSAkY2hhcnRTdmcuYXBwZW5kKCdnLmxlZ2VuZF9fd2FnZXMnKVxuXG5cdCRsZWdlbmRXYWdlcy5hdCgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnKyBzdmdXaWR0aCowLjc1ICsnLCcreVBhZGRpbmcvNisnKScpXG5cblx0Y29uc3QgJGxlZ2VuZFdhZ2VzX3RpdGxlPSAkbGVnZW5kV2FnZXMuYXBwZW5kKCd0ZXh0LmxlZ2VuZC13YWdlc19fdGl0bGUnKVxuXG5cdGNvbnN0ICRsZWdlbmRXYWdlc19jYXRlZ29yeV9ncm91cHMgPSAkbGVnZW5kV2FnZXNcblx0XHQuc2VsZWN0QWxsKCdnLmxlZ2VuZC13YWdlc19fY2F0ZWdvcnknKVxuXHRcdC5kYXRhKHdhZ2VSYXRpb0luY3JlYXNlQXJyYXkpXG5cdFx0LmVudGVyKClcblx0XHQuYXBwZW5kKCdnLmxlZ2VuZC13YWdlc19fY2F0ZWdvcnknKVxuXG5cdGNvbnN0IExFR0VORF9XQUdFX1JFQ1RBTkdMRV9XSURUSCA9IGlzTW9iaWxlPyBzdmdXaWR0aC8xNSA6IHN2Z1dpZHRoLzQwO1xuXHRjb25zdCBMRUdFTkRfV0FHRV9SRUNUQU5HTEVfSEVJR0hUID0geVBhZGRpbmcvMTA7XG5cblx0Y29uc3QgJGxlZ2VuZFdhZ2VzX2dyb3Vwc195X2Nvb3JkID0gcmFkaXVzU2NhbGUoMTAwMDAwMCk7XG5cblx0Ly8gTW92aW5nIGVhY2ggY2F0ZWdvcnkgZ3JvdXBcblx0JGxlZ2VuZFdhZ2VzX2NhdGVnb3J5X2dyb3Vwc1xuXHRcdC5hdCgndHJhbnNmb3JtJywgKGQsaSk9Pntcblx0XHRcdGNvbnN0IHhUcmFuc2xhdGUgPSBpc01vYmlsZT8gKGkqIExFR0VORF9XQUdFX1JFQ1RBTkdMRV9XSURUSC1MRUdFTkRfV0FHRV9SRUNUQU5HTEVfV0lEVEgpIDogKGkqIExFR0VORF9XQUdFX1JFQ1RBTkdMRV9XSURUSCkgO1xuXHRcdFx0Y29uc3QgeVRyYW5zbGF0ZSA9ICRsZWdlbmRXYWdlc19ncm91cHNfeV9jb29yZDtcblx0XHRcdHJldHVybiAndHJhbnNsYXRlKCcreFRyYW5zbGF0ZSsnLCcreVRyYW5zbGF0ZSsnKSdcblx0XHR9KVxuXG5cdGNvbnN0ICRsZWdlbmRXYWdlc19yZWN0YW5nbGVzID0gJGxlZ2VuZFdhZ2VzX2NhdGVnb3J5X2dyb3Vwc1xuXHRcdC5hcHBlbmQoJ3JlY3QubGVnZW5kLXdhZ2VzX19yZWN0YW5nbGUnKVxuXG5cdCRsZWdlbmRXYWdlc19yZWN0YW5nbGVzXG5cdFx0LmF0KCd3aWR0aCcsIExFR0VORF9XQUdFX1JFQ1RBTkdMRV9XSURUSClcblx0XHQuYXQoJ2hlaWdodCcsIHlQYWRkaW5nLzEwKVxuXHRcdC5zdCgnZmlsbCcsIGQ9PiBjb2xvclNjYWxlKGQudmFsdWUpKVxuXG5cdGNvbnN0ICRsZWdlbmRXYWdlc190ZXh0X2Fubm90YXRpb25zPSAkbGVnZW5kV2FnZXNfY2F0ZWdvcnlfZ3JvdXBzXG5cdFx0LmFwcGVuZCgndGV4dC5sZWdlbmQtd2FnZXNfX3RleHQtYW5ub3RhdGlvbicpXG5cblxuXHRjb25zdCAkbGVnZW5kV2FnZXNfdGV4dF9hbm5vdGF0aW9uc195X2Nvb3JkID0gTEVHRU5EX1dBR0VfUkVDVEFOR0xFX0hFSUdIVCozXG5cblx0JGxlZ2VuZFdhZ2VzX3RleHRfYW5ub3RhdGlvbnNcblx0XHQudGV4dChkPT5kLmxhYmVsKVxuXHRcdC5hdCgneScsICRsZWdlbmRXYWdlc190ZXh0X2Fubm90YXRpb25zX3lfY29vcmQpXG5cdFx0LmF0KCd4JywgTEVHRU5EX1dBR0VfUkVDVEFOR0xFX1dJRFRIKVxuXHRcdC5zdCgndGV4dC1hbmNob3InLCAoZCxpKT0+e1xuXHRcdFx0aWYoaT09PTMpe3JldHVybiAnc3RhcnQnfVxuXHRcdFx0ZWxzZSB7cmV0dXJuICdtaWRkbGUnfVxuXHRcdH0pXG5cblx0Y29uc3QgbGVnZW5kV2FnZXNaZXJvVmFsdWUgPSAkbGVnZW5kV2FnZXNcblx0XHQuYXBwZW5kKCd0ZXh0LmxlZ2VuZC13YWdlc19femVybycpXG5cblx0bGVnZW5kV2FnZXNaZXJvVmFsdWVcblx0XHQudGV4dCgnMSUnKVxuXHRcdC5hdCgneScsICRsZWdlbmRXYWdlc190ZXh0X2Fubm90YXRpb25zX3lfY29vcmQgKyAkbGVnZW5kV2FnZXNfZ3JvdXBzX3lfY29vcmQpXG5cdFx0LmF0KCd4JywgKGQsaSk9Pntcblx0XHRcdGlmKGlzTW9iaWxlKXtyZXR1cm4gLUxFR0VORF9XQUdFX1JFQ1RBTkdMRV9XSURUSH1cblx0XHRcdGVsc2V7fVxuXHRcdH0pXG5cblxuXG5cdGNvbnN0IFdBR0VfTEFCRUxfTE9DQVRJT04gPSBpc01vYmlsZT8gd2FnZVJhdGlvSW5jcmVhc2VBcnJheS5sZW5ndGgvMiAqTEVHRU5EX1dBR0VfUkVDVEFOR0xFX1dJRFRIIC0gTEVHRU5EX1dBR0VfUkVDVEFOR0xFX1dJRFRIIDp3YWdlUmF0aW9JbmNyZWFzZUFycmF5Lmxlbmd0aC8yICpMRUdFTkRfV0FHRV9SRUNUQU5HTEVfV0lEVEggO1xuXG5cdCRsZWdlbmRXYWdlc190aXRsZVxuXHRcdC50ZXh0KCdTQUxBUlkgSU5DUkVBU0UgJScpXG5cdFx0LmF0KCd4JywgV0FHRV9MQUJFTF9MT0NBVElPTilcblxuXG5cblx0Ly8gTEVHRU5EU1xuXHQvLyByZW5kZXJpbmcgam9iIG51bWJlciBsZWdlbmRcblx0JGxlZ2VuZGpvYk51bWJlciA9ICRjaGFydFN2Zy5hcHBlbmQoJ2cubGVnZW5kLWpvYi1udW1iZXInKVxuXG5cdCRsZWdlbmRqb2JOdW1iZXJcblx0XHQuYXQoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJysgeFBhZGRpbmcgKycsJyt5UGFkZGluZy82KycpJylcblxuXHRjb25zdCAkbGVnZW5kam9iTnVtYmVyX2NhdGVnb3J5X2dyb3VwcyA9ICRsZWdlbmRqb2JOdW1iZXJcblx0XHQuc2VsZWN0QWxsKCdnLmxlZ2VuZC1qb2ItbnVtYmVyX19jYXRlZ29yeScpXG5cdFx0LmRhdGEoam9iTnVtYmVyTGFiZWxBcnJheSlcblx0XHQuZW50ZXIoKVxuXHRcdC5hcHBlbmQoJ2cubGVnZW5kLWpvYi1udW1iZXJfX2NhdGVnb3J5JylcblxuXHRjb25zdCBSQURJVVNfTVVMVElQTElFUiA9IDRcblxuXHQkbGVnZW5kam9iTnVtYmVyX2NhdGVnb3J5X2dyb3Vwc1xuXHRcdC5hdCgndHJhbnNmb3JtJywgKGQsaSk9Pntcblx0XHRcdGNvbnN0IHhUcmFuc2xhdGUgPSBSQURJVVNfTVVMVElQTElFUippKnJhZGl1c1NjYWxlKDEwMDAwMDApXG5cdFx0XHRjb25zdCB5VHJhbnNsYXRlID0gcmFkaXVzU2NhbGUoMTAwMDAwMCk7XG5cdFx0XHRyZXR1cm4gJ3RyYW5zbGF0ZSgnK3hUcmFuc2xhdGUrJywnK3lUcmFuc2xhdGUrJyknXG5cdFx0fSlcblxuXHRjb25zdCAkbGVnZW5kam9iTnVtYmVyX2NpcmNsZXMgPSAkbGVnZW5kam9iTnVtYmVyX2NhdGVnb3J5X2dyb3Vwc1xuXHRcdC5hcHBlbmQoJ2NpcmNsZS5sZWdlbmQtam9iLW51bWJlcl9fY2lyY2xlJylcblxuXHQkbGVnZW5kam9iTnVtYmVyX2NpcmNsZXNcblx0XHQuYXQoJ3InLCBkPT4gcmFkaXVzU2NhbGUoZC5zaXplKSlcblx0XHQuc3QoJ2ZpbGwnLCAnI0ZGRicpXG5cdFx0LnN0KCdzdHJva2UnLCAnI0M2QzZDNicpXG5cblx0Y29uc3QgJGxlZ2VuZGpvYk51bWJlcl90ZXh0X2Fubm90YXRpb25zID0gJGxlZ2VuZGpvYk51bWJlcl9jYXRlZ29yeV9ncm91cHNcblx0XHQuYXBwZW5kKCd0ZXh0LmxlZ2VuZC1qb2ItbnVtYmVyX190ZXh0JylcblxuXHQkbGVnZW5kam9iTnVtYmVyX3RleHRfYW5ub3RhdGlvbnNcblx0XHQudGV4dChkPT5kLmxhYmVsKVxuXHRcdC5hdCgneScsIChSQURJVVNfTVVMVElQTElFUi8yKSAqcmFkaXVzU2NhbGUoMTAwMDAwMCkpXG5cblxuXHRjb25zdCBKT0JfTlVNQkVSX0xBQkVMX0xPQ0FUSU9OID0gUkFESVVTX01VTFRJUExJRVIgKiBNYXRoLnJvdW5kKChqb2JOdW1iZXJMYWJlbEFycmF5Lmxlbmd0aC0xKSAvMiApICAqcmFkaXVzU2NhbGUoMTAwMDAwMClcblxuXHRjb25zdCAkbGVnZW5kam9iTnVtYmVyX3RpdGxlX2JhY2tncm91bmQ9ICRsZWdlbmRqb2JOdW1iZXIuYXBwZW5kKCd0ZXh0LmpvYi1udW1iZXItdGl0bGUtYmFja2dyb3VuZCcpXG5cdGNvbnN0ICRsZWdlbmRqb2JOdW1iZXJfdGl0bGU9ICRsZWdlbmRqb2JOdW1iZXIuYXBwZW5kKCd0ZXh0LmpvYi1udW1iZXItdGl0bGUnKVxuXG5cdCRsZWdlbmRqb2JOdW1iZXJfdGl0bGVfYmFja2dyb3VuZFxuXHRcdC50ZXh0KCdKT0JTIElOIDIwMjYnKVxuXHRcdC5hdCgneCcsIEpPQl9OVU1CRVJfTEFCRUxfTE9DQVRJT04pXG5cdFx0LnN0KCdzdHJva2UnLCAnI0ZGRicpXG5cdFx0LnN0KCdzdHJva2Utd2lkdGgnLCAnMXB4JylcblxuXHQkbGVnZW5kam9iTnVtYmVyX3RpdGxlXG5cdFx0LnRleHQoJ0pPQlMgSU4gMjAyNicpXG5cdFx0LmF0KCd4JywgSk9CX05VTUJFUl9MQUJFTF9MT0NBVElPTilcblxuXHQkbGVnZW5kam9iTnVtYmVyXG5cdFx0LnN0KCdvcGFjaXR5JywwKVxuXHQvLyAuc3QoJ3Zpc2liaWxpdHknLCdoaWRkZW4nKVxuXG5cdCRsZWdlbmRXYWdlc1xuXHRcdC5zdCgndmlzaWJpbGl0eScsJ2hpZGRlbicpXG59XG5cblxuZnVuY3Rpb24gcmVzaXplKCl7XG5cblxuXG5cdGNvbnN0IGZ1bGxTVkdIZWlnaHQgPSAkY2hhcnRTdmcuYXQoJ2hlaWdodCcpXG5cdGNvbnN0IFJFRFVDRURfVklFV1BPUlRfSEVJR0hUX1BFUkNFTlRBR0UgPSAwLjg3NVxuXHRjb25zdCBSRU1BSU5JTkdfVklFV1BPUlRfSEVJR0hUX1BFUkNFTlRBR0UgPSAxLVJFRFVDRURfVklFV1BPUlRfSEVJR0hUX1BFUkNFTlRBR0VcblxuXHQvLyBNb2JpbGUgY2hlY2tcblxuXHRpc01vYmlsZSA9IHZpZXdwb3J0V2lkdGggPDcwMCA/IHRydWUgOiBmYWxzZVxuXG5cdC8vIGNvbnNvbGUubG9nKFwibW9iaWxlPyBcIiArIGlzTW9iaWxlKVxuXG5cdC8vICRjaGFydFN2Zy5hdCgnaGVpZ2h0JywgKFJFRFVDRURfVklFV1BPUlRfSEVJR0hUX1BFUkNFTlRBR0UqZnVsbFNWR0hlaWdodCkpXG5cblx0Ly8gU2V0dGluZyB1cCBtYXggd2lkdGggYW5kIGhlaWdodCBwYXJhbWV0ZXJzIGZvciB4IGFuZCB5IHNjYWxlc1xuXHQvLyBzdmdXaWR0aCA9ICRjaGFydFN2Zy5hdCgnd2lkdGgnKVxuXHQvLyBjb25zdCBtYXhXaWR0aFBlcmNlbnRhZ2UgPSAwLjk7XG5cdC8vIHhNYXhTY2FsZVZhbHVlID0gc3ZnV2lkdGggKiBtYXhXaWR0aFBlcmNlbnRhZ2U7XG5cdC8vIHhQYWRkaW5nID0gaXNNb2JpbGU/ICgxLW1heFdpZHRoUGVyY2VudGFnZSswLjEpKnN2Z1dpZHRoOigxLW1heFdpZHRoUGVyY2VudGFnZSkqc3ZnV2lkdGg7XG5cblxuXHRjb25zdCBzdmdIZWlnaHQgPSAkY2hhcnRTdmcuYXQoJ2hlaWdodCcpXG5cdGNvbnN0IG1heEhlaWdodFBlcmNlbnRhZ2UgPSAwLjk7XG5cdHlNYXhTY2FsZVZhbHVlID0gc3ZnSGVpZ2h0ICogbWF4SGVpZ2h0UGVyY2VudGFnZTtcblxuXHRjb25zdCBZX1BBRERJTkdfTVVMVElQTElFUiA9IDEuMjVcblx0eVBhZGRpbmcgPSBSRU1BSU5JTkdfVklFV1BPUlRfSEVJR0hUX1BFUkNFTlRBR0UgKiBZX1BBRERJTkdfTVVMVElQTElFUiAqIHN2Z0hlaWdodDtcblxuXHQvLyBjb25zdCBZX1NDQUxFX01JTiA9IDEwXG5cblx0SU5UUk9fWV9BWElTX0xPQ0FUSU9OID0gc3ZnSGVpZ2h0LzI7XG5cblx0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuXHRcdC5kb21haW4oW01JTl9BVVRPLE1BWF9BVVRPXSlcblx0XHQucmFuZ2UoWzAreVBhZGRpbmcsIHlNYXhTY2FsZVZhbHVlXSk7XG5cblx0eFNjYWxlID0gc2V0dXBYU2NhbGUoc2VsZWN0ZWRKb2JEYXRhKVxuXG5cblx0VkVSVElDQUxfTEFCRUxfUE9TSVRJT05fU0hPUlRFUiA9SU5UUk9fWV9BWElTX0xPQ0FUSU9OKjAuODtcblxuXHRWRVJUSUNBTF9MQUJFTF9QT1NJVElPTl9UQUxMRVIgPUlOVFJPX1lfQVhJU19MT0NBVElPTiowLjY7XG5cblx0TElORV9IRUlHSFRfTEVBU1RfU0lNSUxBUl9KT0IgPSBJTlRST19ZX0FYSVNfTE9DQVRJT04gLSBWRVJUSUNBTF9MQUJFTF9QT1NJVElPTl9TSE9SVEVSXG5cdExJTkVfSEVJR0hUX01PU1RfU0lNSUxBUl9KT0IgPSBJTlRST19ZX0FYSVNfTE9DQVRJT04gLSBWRVJUSUNBTF9MQUJFTF9QT1NJVElPTl9UQUxMRVJcblxuXG5cbn1cblxuZnVuY3Rpb24gZHJvcERvd25DaGFuZ2UoKXtcblxuXHRsZXQgc2VsZWN0ZWRKb2JJRCA9IG51bGw7XG5cblx0aWYgKGRyb3Bkb3duRGVmYXVsdFRyaWdnZXI9PT10cnVlKXtcblx0XHRzZWxlY3RlZEpvYklEID0gNDE1XG5cdH1cblx0ZWxzZSB7c2VsZWN0ZWRKb2JJRCA9ICRjaGFydENvbnRhaW5lci5zZWxlY3QoJy5qb2Itc2VsZWN0b3JfX2Ryb3Bkb3duJykucHJvcGVydHkoJ3ZhbHVlJyk7fVxuXG5cblxuXHRjb25zdCB1cGRhdGVkRGF0YSA9IHNlbGVjdEpvYkRhdGEoc2ltaWxhcml0eSwgc2VsZWN0ZWRKb2JJRCk7XG5cdGNvbnN0IGN1cnJlbnRKb2JJZD11cGRhdGVkRGF0YVswXS5pZF9zZWxlY3RlZDtcblxuXHRjb25zb2xlLmxvZygnc2VsZWN0ZWQgam9iIGlkOiAnKyBzZWxlY3RlZEpvYklEKTtcblx0Y29uc29sZS5sb2coJ3VwZGF0ZWQgZGF0YSAnICt1cGRhdGVkRGF0YSk7XG5cdGNvbnNvbGUubG9nKCdjdXJyZW50IGpvYiAnK2N1cnJlbnRKb2JJZCk7XG5cdGNvbnNvbGUubG9nKCdjdXJyZW50IGpvYiBhdXRvICcra2V5T2JqZWN0Sm9iQXV0b1tzZWxlY3RlZEpvYklEXSk7XG5cblxuXHQvLyBVcGRhdGluZyB4U2NhbGUgd2l0aCBuZXcgZGF0YVxuXHRjb25zdCB4U2NhbGUgPSBzZXR1cFhTY2FsZSh1cGRhdGVkRGF0YSk7XG5cblxuXHQvLyBjb25zdCAkbWlzY0NoYXJ0U2VjdGlvbnMgPSAkY2hhcnRTdmcuc2VsZWN0KCcubWlzYy1jaGFydC1lbGVtZW50cy1jb250YWluZXInKVxuXHRjb25zdCAkbWlzY0NoYXJ0U2VjdGlvblRpdGxlID0gJGNoYXJ0Q29udGFpbmVyLnNlbGVjdCgnZGl2LmNoYXJ0LXRpdGxlLWRpdicpXG5cdC8vIFVwZGF0aW5nIG1haW4gbGFiZWwgdGV4dFxuXHQkbWlzY0NoYXJ0U2VjdGlvblRpdGxlLnNlbGVjdCgnLmNoYXJ0LXRpdGxlLXB0MicpLnRleHQobnVtYmVyV2l0aENvbW1hcyhrZXlPYmplY3RKb2JOdW1iZXJbY3VycmVudEpvYklkXSkpXG5cdCRtaXNjQ2hhcnRTZWN0aW9uVGl0bGUuc2VsZWN0KCcuY2hhcnQtdGl0bGUtcHQzJykudGV4dChrZXlPYmplY3RKb2JOYW1lW2N1cnJlbnRKb2JJZF0pXG5cdCRtaXNjQ2hhcnRTZWN0aW9uVGl0bGUuc2VsZWN0KCcuY2hhcnQtdGl0bGUtcHQ1JykudGV4dCgnJCcrbnVtYmVyV2l0aENvbW1hcyhrZXlPYmplY3RKb2JXYWdlW2N1cnJlbnRKb2JJZF0pKVxuXG5cdC8vIFVwZGF0aW5nIHlTY2FsZSBkb21haW4gdG8gZXhjbHVkZSBhbGwgaXRlbXMgd2l0aCBhIHdvcnNlIGF1dG9tYXRpb24gb3V0Y29tZVxuXHR5U2NhbGUuZG9tYWluKFswLGtleU9iamVjdEpvYkF1dG9bY3VycmVudEpvYklkXV0pXG5cblx0eUF4aXNHcm91cFxuXHRcdC50cmFuc2l0aW9uKClcblx0XHQuY2FsbCh5QXhpc0xhYmVsKVxuXG5cdC8vIFJlbW92aW5nIGFsbCBwcmV2aW91c2x5IGNyZWF0ZWQgY2lyY2xlc1xuXHRjb25zdCAkY2hhcnRTdmcgPSBkMy5zZWxlY3QoJ3N2Zy5zY2F0dGVyJylcblxuXHQkY2hhcnRTdmcuc2VsZWN0QWxsKCdjaXJjbGUuam9iJykucmVtb3ZlKClcblxuXHRsZXQgJGpvYkNpcmNsZXMgPSAkY2hhcnRTdmdcblx0XHQuc2VsZWN0QWxsKCdjaXJjbGUuam9iJylcblx0XHQuZGF0YSh1cGRhdGVkRGF0YSlcblx0XHQuZW50ZXIoKVxuXHRcdC5hcHBlbmQoJ2NpcmNsZS5qb2InKVxuXG5cblx0JGpvYkNpcmNsZXNcblx0XHQuYXQoJ2N4JywgZD0+e3JldHVybiB4U2NhbGUoZC5zaW1pbGFyaXR5KX0pXG5cdFx0LmF0KCdjeScsIGQ9PntyZXR1cm4geVNjYWxlKGtleU9iamVjdEpvYkF1dG9bZC5pZF9jb21wYXJlZF0pfSlcblx0XHQuc3QoJ2ZpbGwnLCBkPT57XG5cdFx0XHRjb25zdCBqb2JTZWxlY3RlZFdhZ2UgPSBrZXlPYmplY3RKb2JXYWdlW2QuaWRfc2VsZWN0ZWRdXG5cdFx0XHRjb25zdCBqb2JDb21wYXJlZFdhZ2UgPSBrZXlPYmplY3RKb2JXYWdlW2QuaWRfY29tcGFyZWRdXG5cdFx0XHRjb25zdCB3YWdlQ2hhbmdlID0gam9iQ29tcGFyZWRXYWdlL2pvYlNlbGVjdGVkV2FnZTtcblx0XHRcdHJldHVybiBzY2FsZXNPYmplY3QuY29sb3JTY2FsZSh3YWdlQ2hhbmdlKVxuXHRcdH0pXG5cdFx0LnN0KCdvcGFjaXR5JywgZD0+e1xuXHRcdFx0aWYgKFxuXHRcdFx0XHQoa2V5T2JqZWN0Sm9iV2FnZVtkLmlkX3NlbGVjdGVkXTxrZXlPYmplY3RKb2JXYWdlW2QuaWRfY29tcGFyZWRdKVxuICAgICAgICAgICAgJiZcbiAgICAgICAgICAgIChrZXlPYmplY3RKb2JBdXRvW2QuaWRfc2VsZWN0ZWRdPmtleU9iamVjdEpvYkF1dG9bZC5pZF9jb21wYXJlZF0pXG5cdFx0XHQpe3JldHVybiAxfVxuXHRcdFx0ZWxzZSB7cmV0dXJuIDB9XG5cdFx0fSlcblx0Ly8gLnN0KCdzdHJva2UnLCAnYmxhY2snKVxuXHRcdC5hdCgncicsIGQ9Pntcblx0XHRcdGNvbnN0IHdhZ2U9a2V5T2JqZWN0Sm9iTnVtYmVyW2QuaWRfY29tcGFyZWRdO1xuXHRcdFx0cmV0dXJuIHNjYWxlc09iamVjdC5yYWRpdXNTY2FsZSh3YWdlKVxuXHRcdH0pXG5cblx0JGpvYkNpcmNsZXNcblx0XHQub24oJ21vdXNlZW50ZXInLCBzaG93VG9vbHRpcClcblx0XHQub24oJ2NsaWNrJywgc2hvd1Rvb2x0aXApXG5cdFx0XHQgIC5vbignbW91c2VsZWF2ZScsIGhpZGVUb29sdGlwKVxufVxuXG5mdW5jdGlvbiBoaWRlVG9vbHRpcChkLGksbil7XG5cdGpvYlRvb2x0aXAuc3QoJ3Zpc2liaWxpdHknLCdoaWRkZW4nKVxuXG5cdGNvbnN0IGN1cnJlbnRDaXJjbGUgPSBkMy5zZWxlY3QobltpXSlcblxuXHRjdXJyZW50Q2lyY2xlXG5cdFx0Ly8gLnN0KCdzdHJva2Utb3BhY2l0eScsMSlcblx0XHQuc3QoJ3N0cm9rZScsICdncmF5Jylcblx0XHQuc3QoJ3N0cm9rZS13aWR0aCcsIDAuNSlcblx0XHQvLyAuc3QoJ3N0cm9rZS13aWR0aCcsJzJweCcpXG59XG5cbmZ1bmN0aW9uIHNob3dUb29sdGlwKGQsaSxuKXtcblxuXHRjb25zdCBjdXJyZW50Q2lyY2xlID0gZDMuc2VsZWN0KG5baV0pXG5cblx0Y3VycmVudENpcmNsZVxuXHRcdC5zdCgnc3Ryb2tlJywnYmxhY2snKVxuXHRcdC5zdCgnc3Ryb2tlLXdpZHRoJywyKVxuXG5cdHNlbGVjdGVkSm9iU2tpbGxzID0gc2VsZWN0Sm9iRGF0YShza2lsbHMsIGQuaWRfY29tcGFyZWQpO1xuXHRzZWxlY3RlZEpvYlNraWxscyA9IHNlbGVjdGVkSm9iU2tpbGxzLnNvcnQoY29tcGFyZSk7XG5cblx0Y29uc3Qgam9iQ29tcGFyZWROYW1lID0gZDMuc2VsZWN0KFwiZGl2LmpvYi1jb21wYXJlZC1uYW1lXCIpO1xuXHRqb2JDb21wYXJlZE5hbWUudGV4dChrZXlPYmplY3RKb2JOYW1lW2QuaWRfY29tcGFyZWRdKVxuXG5cdGNvbnN0IGpvYkNvbXBhcmVkTnVtYmVyID0gZDMuc2VsZWN0KFwiZGl2LmpvYi1jb21wYXJlZC1udW1iZXJcIik7XG5cdGpvYkNvbXBhcmVkTnVtYmVyLnRleHQobnVtYmVyV2l0aENvbW1hcyhrZXlPYmplY3RKb2JOdW1iZXJbZC5pZF9jb21wYXJlZF0pKycgam9icyBpbiAyMDI2JylcblxuXHRjb25zdCBqb2JTa2lsbHNDb250YWluZXIgPSBqb2JUb29sdGlwLnNlbGVjdCgnZGl2LmpvYi1za2lsbHMtY29udGFpbmVyJylcblxuXHRjb25zdCBqb2JTa2lsbHNCYXJSb3cgPSBqb2JTa2lsbHNDb250YWluZXIuc2VsZWN0QWxsKCdkaXYuYmFyLWNvbnRhaW5lcicpXG5cblx0Y29uc3Qgam9iU2tpbGxzTmFtZXMgPSBqb2JTa2lsbHNDb250YWluZXIuc2VsZWN0QWxsKFwiZGl2LmpvYi1iYXItbmFtZVwiKVxuXHRcdC5kYXRhKHNlbGVjdGVkSm9iU2tpbGxzKVxuXG5cdGNvbnN0IGpvYlNraWxsc0JhcnMgID0gam9iU2tpbGxzQ29udGFpbmVyLnNlbGVjdEFsbChcImRpdi5qb2ItYmFyXCIpXG5cdFx0LmRhdGEoc2VsZWN0ZWRKb2JTa2lsbHMpXG5cblx0Y29uc3Qgam9iU2tpbGxzVmFsdWVzPSBqb2JTa2lsbHNDb250YWluZXIuc2VsZWN0QWxsKFwiZGl2LmpvYi1iYXItdmFsdWVcIilcblx0XHQuZGF0YShzZWxlY3RlZEpvYlNraWxscylcblxuXHRjb25zdCB0b29sdGlwV2lkdGggPSAkKCcuam9iVG9vbHRpcCcpLndpZHRoKClcblx0Y29uc3QgdG9vbHRpcEhlaWdodCA9ICQoJy5qb2JUb29sdGlwJykuaGVpZ2h0KClcblxuXHR0b29sdGlwWFNjYWxlXG5cdFx0LnJhbmdlKFswLCh0b29sdGlwV2lkdGgqMC44KV0pXG5cblx0am9iU2tpbGxzQmFycy5zdCgnaGVpZ2h0JywnNHB4Jylcblx0XHQuc3QoJ3dpZHRoJywgc2tpbGw9PiB7XG5cdFx0XHRyZXR1cm4gdG9vbHRpcFhTY2FsZShza2lsbC5pbXApKydweCdcblx0XHR9KVxuXHRcdC5zdCgnYmFja2dyb3VuZCcsJyNEOTI4QkMnKVxuXG5cdGpvYlNraWxsc05hbWVzLnRleHQoKHNraWxsLGkpPT57XG5cdFx0cmV0dXJuIChpKzEpKycuICcra2V5T2JqZWN0U2tpbGxOYW1lW3NraWxsLnNraWxsX2lkXVxuXHR9KVxuXG5cdGpvYlNraWxsc1ZhbHVlcy50ZXh0KHNraWxsPT57XG5cdFx0cmV0dXJuIHNraWxsLmltcC50b0ZpeGVkKDApKyclJztcblx0fSlcblxuXG5cblx0Y29uc3QgeENvb3JkID0gK2QzLnNlbGVjdChuW2ldKVxuXHRcdC5hdChcImN4XCIpXG5cblx0Y29uc3QgeUNvb3JkID0gK2QzLnNlbGVjdChuW2ldKVxuXHRcdC5hdChcImN5XCIpXG5cblxuXG5cblx0bGV0IHRvb2x0aXBCdW1wX1ggPSBudWxsO1xuXHRsZXQgdG9vbHRpcEJ1bXBfWSA9IG51bGw7XG5cblx0aWYoeENvb3JkIDwgKHZpZXdwb3J0V2lkdGgvMikpe1xuXHRcdHRvb2x0aXBCdW1wX1ggPSBpc01vYmlsZT8gNTAgOiAxMjA7XG5cdH1cblx0ZWxzZSB7XG5cdFx0dG9vbHRpcEJ1bXBfWCA9IC10b29sdGlwV2lkdGggLTUwXG5cdH1cblxuXHRpZih5Q29vcmQgPCAodmlld3BvcnRIZWlnaHQvMikpe1xuXHRcdHRvb2x0aXBCdW1wX1kgPSA1MFxuXHR9XG5cdGVsc2Uge1xuXHRcdHRvb2x0aXBCdW1wX1kgPSAtdG9vbHRpcEhlaWdodFxuXHR9XG5cblx0am9iVG9vbHRpcC5zdChcImxlZnRcIiwgKHhDb29yZCt0b29sdGlwQnVtcF9YKStcInB4XCIpXG5cdFx0LnN0KFwidG9wXCIsICh5Q29vcmQrdG9vbHRpcEJ1bXBfWSkrXCJweFwiKVxuXG5cdGpvYlRvb2x0aXAuc3QoJ3Zpc2liaWxpdHknLCd2aXNpYmxlJylcblxuXHRjaGFydFRvb2x0aXBDbG9zaW5nVHJpZ2dlciA9IHRydWU7XG5cbn1cblxuZnVuY3Rpb24gY3JlYXRlRHJvcGRvd24oKXtcblxuLy8gQ3JlYXRpbmcgam9iIGRyb3Bkb3duIG1lbnVcblx0JGpvYkRyb3Bkb3duTWVudT1kMy5zZWxlY3QoJ2Rpdi5qb2Itc2VsZWN0b3JfX2NvbnRhaW5lcicpXG5cdFx0LmFwcGVuZCgnc2VsZWN0JylcblxuXG5cdCRqb2JEcm9wZG93bk1lbnVcblx0XHQuYXQoJ2NsYXNzJywgJ2pvYi1zZWxlY3Rvcl9fZHJvcGRvd24nKVxuXHRcdC5zdCgnb3BhY2l0eScsMClcblx0XHQvLyAuYXQoJ2RhdGEtcGxhY2Vob2xkZXInLCAnU2VsZWN0IGFub3RoZXIgam9iJylcblxuXHQvLyAuc3QoJ3Zpc2liaWxpdHknLCdoaWRkZW4nKVxuXG5cdGNyb3Nzd2Fsay5zb3J0KGNvbXBhcmVKb2JOYW1lcylcblxuXHRjb25zdCAkam9iQnV0dG9ucyA9ICRqb2JEcm9wZG93bk1lbnUuc2VsZWN0QWxsKCdvcHRpb24uam9iLXNlbGVjdG9yX19qb2ItYnV0dG9uJylcblx0XHQuZGF0YShjcm9zc3dhbGspXG5cdFx0LmVudGVyKClcblx0XHQuYXBwZW5kKCdvcHRpb24uam9iLXNlbGVjdG9yX19qb2ItYnV0dG9uJylcblx0XHQuYXQoJ3ZhbHVlJywgZD0+ZC5pZClcblxuXHQkam9iRHJvcGRvd25NZW51XG5cdFx0Lmluc2VydChcIm9wdGlvblwiLFwiOmZpcnN0LWNoaWxkXCIpXG5cdFx0LmF0KCdzZWxlY3RlZCcsJ3NlbGVjdGVkJylcblx0XHQudGV4dCgnUGljayBhbm90aGVyIGpvYicpXG5cblxuXHQkam9iQnV0dG9ucy50ZXh0KChkKT0+e1xuXHRcdHJldHVybiBkLmpvYl9uYW1lO1xuXHR9KVxuXG5cblx0JChcIi5qb2Itc2VsZWN0b3JfX2Ryb3Bkb3duXCIpXG5cdFx0LmNob3Nlbih7XG5cdFx0XHRwbGFjZWhvbGRlcl90ZXh0X3NpbmdsZTonU2VsZWN0IGFub3RoZXIgam9iJ1xuXHRcdH0pXG5cdFx0Lm9uKCdjaGFuZ2UnLGRyb3BEb3duQ2hhbmdlKVxufVxuXG5cblxuZnVuY3Rpb24gY3JlYXRlQ2lyY2xlcygpe1xuXHQkam9iQ2lyY2xlcyA9ICRjaGFydFN2Z1xuXHRcdC5zZWxlY3RBbGwoJ2NpcmNsZS5qb2InKVxuXHRcdC5kYXRhKHNlbGVjdGVkSm9iRGF0YSlcblx0XHQuZW50ZXIoKVxuXHRcdC5hcHBlbmQoJ2NpcmNsZS5qb2InKVxuXG5cdCRqb2JDaXJjbGVzXG5cdFx0LmF0KCdjeCcsIGQ9PntyZXR1cm4geFNjYWxlKGQuc2ltaWxhcml0eSl9KVxuXHRcdC5hdCgnY3knLCBJTlRST19ZX0FYSVNfTE9DQVRJT04pXG5cdFx0LnN0KCdmaWxsJywgJ3doaXRlJylcblx0XHQuc3QoJ3N0cm9rZScsICdibGFjaycpXG5cdFx0LnN0KCdzdHJva2Utd2lkdGgnLCAwLjUpXG5cdFx0LnN0KCdvcGFjaXR5JywgMClcblx0XHQuYXQoJ3InLCczJylcblx0XHQub24oJ21vdXNlZW50ZXInLCBzaG93VG9vbHRpcClcblx0XHQub24oJ2NsaWNrJyxzaG93VG9vbHRpcClcblx0XHQub24oJ21vdXNlbGVhdmUnLCBoaWRlVG9vbHRpcClcbn1cblxuZnVuY3Rpb24gc2V0dXBUb29sdGlwKCl7XG5cblx0Y29uc3Qgam9iU2tpbGxzQmFyUm93ID0gam9iU2tpbGxzQ29udGFpbmVyLnNlbGVjdEFsbCgnZGl2LmpvYi1iYXItY29udGFpbmVyJylcblx0XHQuZGF0YShzZWxlY3RlZEpvYlNraWxscylcblx0XHQuZW50ZXIoKVxuXHRcdC5hcHBlbmQoJ2Rpdi5iYXItY29udGFpbmVyJylcblxuXHRjb25zdCBqb2JTa2lsbHNOYW1lcyA9IGpvYlNraWxsc0JhclJvdy5hcHBlbmQoXCJkaXYuam9iLWJhci1uYW1lXCIpLmRhdGEoc2VsZWN0ZWRKb2JTa2lsbHMpLmVudGVyKClcblxuXHRjb25zdCBqb2JEYXRhQ29udGFpbmVyID0gam9iU2tpbGxzQmFyUm93LmFwcGVuZCgnZGl2LmpvYi1kYXRhLWNvbnRhaW5lcicpXG5cdGNvbnN0IGpvYlNraWxsc0JhcnNDb250YWluZXJzICA9IGpvYkRhdGFDb250YWluZXIuYXBwZW5kKFwiZGl2LmpvYi1iYXItYm94XCIpXG5cblx0Y29uc3Qgam9iU2tpbGxzQmFycyAgPSBqb2JTa2lsbHNCYXJzQ29udGFpbmVycy5hcHBlbmQoXCJkaXYuam9iLWJhclwiKS5kYXRhKHNlbGVjdGVkSm9iU2tpbGxzKS5lbnRlcigpXG5cdGNvbnN0IGpvYlNraWxsc1ZhbHVlcz0gam9iRGF0YUNvbnRhaW5lci5hcHBlbmQoXCJkaXYuam9iLWJhci12YWx1ZVwiKS5kYXRhKHNlbGVjdGVkSm9iU2tpbGxzKS5lbnRlcigpXG5cbn1cblxuZnVuY3Rpb24gc2V0dXBET01FbGVtZW50cyhsZWFzdFNpbWlsYXJKb2IsbW9zdFNpbWlsYXJKb2Ipe1xuXG5cdCRjaGFydFN2Z1xuXHRcdC5vbignY2xpY2snLCAoKT0+e1xuXHRcdFx0aWYoY2hhcnRUb29sdGlwQ2xvc2luZ1RyaWdnZXIpe2hpZGVUb29sdGlwfVxuXHRcdFx0ZWxzZXt9XG5cdFx0fSlcblxuXHQkdHJ1Y2tlckRldmVsb3BlclhBeGlzID0gJGNoYXJ0U3ZnXG5cdFx0LnNlbGVjdCgnZy5pbnRyby14LWF4aXMnKVxuXG5cdC8vIENyZWF0aW5nIGFubm90YXRpb25zIGVsZW1lbnRzIGZvciBzaW1pbGFyaXR5LW9ubHkgdmlld3Ncblx0Y29uc3QgbGVhc3RTaW1pbGFySm9iX0FOTk9UQVRJT04gPSAkY2hhcnRTdmcuYXBwZW5kKCdnLmxlYXN0LXNpbWlsYXItYW5ub3RhdGlvbiBzaW1pbGFyaXR5LWFubm90YXRpb24nKVxuXHRjb25zdCBtb3N0U2ltaWxhckpvYl9BTk5PVEFUSU9OID0gJGNoYXJ0U3ZnLmFwcGVuZCgnZy5tb3N0LXNpbWlsYXItYW5ub3RhdGlvbiBzaW1pbGFyaXR5LWFubm90YXRpb24nKVxuXG5cdGNvbnN0IGxlYXN0U2ltaWxhckpvYl9MSU5FID0gbGVhc3RTaW1pbGFySm9iX0FOTk9UQVRJT04uYXBwZW5kKCdsaW5lJylcblx0Y29uc3QgbW9zdFNpbWlsYXJKb2JfTElORSA9IG1vc3RTaW1pbGFySm9iX0FOTk9UQVRJT04uYXBwZW5kKCdsaW5lJylcblxuXHRjb25zdCBsZWFzdFNpbWlsYXJKb2JfVEVYVCA9IGxlYXN0U2ltaWxhckpvYl9BTk5PVEFUSU9OLmFwcGVuZCgndGV4dCcpXG5cdGNvbnN0IG1vc3RTaW1pbGFySm9iX1RFWFQgPSBtb3N0U2ltaWxhckpvYl9BTk5PVEFUSU9OLmFwcGVuZCgndGV4dCcpXG5cblx0JHNpbWlsYXJpdHlBbm5vdGF0aW9ucyA9ICRjaGFydFN2Zy5zZWxlY3RBbGwoJ2cuc2ltaWxhcml0eS1hbm5vdGF0aW9uJylcblxuXHRsZWFzdFNpbWlsYXJKb2JfVEVYVC50ZXh0KGtleU9iamVjdEpvYk5hbWVbKGxlYXN0U2ltaWxhckpvYlswXS5pZF9jb21wYXJlZCldKVxuXHRtb3N0U2ltaWxhckpvYl9URVhULnRleHQoa2V5T2JqZWN0Sm9iTmFtZVsobW9zdFNpbWlsYXJKb2JbMF0uaWRfY29tcGFyZWQpXSkuc3QoJ3RleHQtYW5jaG9yJywgJ2VuZCcpXG5cblx0Ly8gUG9zaXRpb25pbmcgYW5ub3RhdGlvbiBlbGVtZW50c1xuXHRsZWFzdFNpbWlsYXJKb2JfQU5OT1RBVElPTlxuXHRcdC5hdCgndHJhbnNmb3JtJywgZD0+e1xuXHRcdFx0Y29uc3QgeFRyYW5zbGF0ZSA9IHhTY2FsZShsZWFzdFNpbWlsYXJKb2JbMF1bJ3NpbWlsYXJpdHknXSk7XG5cdFx0XHRyZXR1cm4gJ3RyYW5zbGF0ZSgnK3hUcmFuc2xhdGUrJywnK1ZFUlRJQ0FMX0xBQkVMX1BPU0lUSU9OX1NIT1JURVIgKycpJ1xuXHRcdH0pXG5cblx0bW9zdFNpbWlsYXJKb2JfQU5OT1RBVElPTlxuXHRcdC5hdCgndHJhbnNmb3JtJywgZD0+e1xuXHRcdFx0Y29uc3QgeFRyYW5zbGF0ZSA9IHhTY2FsZShtb3N0U2ltaWxhckpvYlswXVsnc2ltaWxhcml0eSddKTtcblx0XHRcdHJldHVybiAndHJhbnNsYXRlKCcreFRyYW5zbGF0ZSsnLCcrVkVSVElDQUxfTEFCRUxfUE9TSVRJT05fVEFMTEVSICsnKSdcblx0XHR9KVxuXG5cdGxlYXN0U2ltaWxhckpvYl9MSU5FXG5cdFx0LmF0KCd4MScsMClcblx0XHQuYXQoJ3kxJywwKVxuXHRcdC5hdCgneDInLDApXG5cdFx0LmF0KCd5MicsTElORV9IRUlHSFRfTEVBU1RfU0lNSUxBUl9KT0IpXG5cdFx0LnN0KCdzdHJva2Utd2lkdGgnLDEpXG5cdFx0LnN0KCdzdHJva2UnLCdibGFjaycpXG5cblx0bW9zdFNpbWlsYXJKb2JfTElORVxuXHRcdC5hdCgneDEnLDApXG5cdFx0LmF0KCd5MScsMClcblx0XHQuYXQoJ3gyJywwKVxuXHRcdC5hdCgneTInLExJTkVfSEVJR0hUX01PU1RfU0lNSUxBUl9KT0IpXG5cdFx0LnN0KCdzdHJva2Utd2lkdGgnLDEpXG5cdFx0LnN0KCdzdHJva2UnLCdibGFjaycpXG5cblx0Ly8gQWRkaW5nIGFuIHggYXhpcyBsYWJlbCB0byB0aGUgY2hhcnRcblx0JHhBeGlzVGV4dExhYmVsID0gJGNoYXJ0U3ZnLmFwcGVuZCgndGV4dC5heGlzLWxhYmVsIHNpbWlsYXJpdHknKVxuXHRYX0FYSVNfTEFCRUxfSEVJR0hUID0gSU5UUk9fWV9BWElTX0xPQ0FUSU9OICogMS4xXG5cdC8vIGNvbnN0IHN2Z1dpZHRoID0gJGNoYXJ0U3ZnLmF0KCd3aWR0aCcpXG5cblx0JHhBeGlzVGV4dExhYmVsXG5cdFx0LmF0KCd4JywgKCk9Pntcblx0XHRcdGlmKGlzTW9iaWxlKXtcblx0XHRcdFx0Y29uc3Qgd2lkdGhPZkNoYXJ0ID0geFBhZGRpbmcreE1heFNjYWxlVmFsdWU7XG5cdFx0XHRcdHJldHVybiB3aWR0aE9mQ2hhcnQvMlxuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7cmV0dXJuIHN2Z1dpZHRoLzIgfVxuXHRcdH0pXG5cdFx0LmF0KCd5JyxYX0FYSVNfTEFCRUxfSEVJR0hUKVxuXHRcdC50ZXh0KCdTS0lMTCBTSU1JTEFSSVRZJylcblx0XHQuc3QoJ3RleHQtYW5jaG9yJywnbWlkZGxlJylcblxuXHQvLyBBZGRpbmcgbWF4IGFuZCBtaW4gc2ltaWxhcml0eS8geS1heGlzIGxhYmVsc1xuXHRtYXhTaW1pbGFyaXR5TGFiZWwgPSAkY2hhcnRTdmcuYXBwZW5kKCd0ZXh0LmF4aXMtbGFiZWwgbWF4LXNpbWlsYXJpdHknKVxuXHRtaW5TaW1pbGFyaXR5TGFiZWwgPSAkY2hhcnRTdmcuYXBwZW5kKCd0ZXh0LmF4aXMtbGFiZWwgbWluLXNpbWlsYXJpdHknKVxuXG5cdG1heFNpbWlsYXJpdHlMYWJlbFxuXHRcdC5hdCgneCcsIHhNYXhTY2FsZVZhbHVlIClcblx0XHQuYXQoJ3knLFhfQVhJU19MQUJFTF9IRUlHSFQpXG5cdFx0LnRleHQoJ+KGkiBTSU1JTEFSJylcblx0XHQuc3QoJ3RleHQtYW5jaG9yJywnbWlkZGxlJylcblxuXHRtaW5TaW1pbGFyaXR5TGFiZWxcblx0XHQuYXQoJ3gnLCB4UGFkZGluZyApXG5cdFx0LmF0KCd5JyxYX0FYSVNfTEFCRUxfSEVJR0hUKVxuXHRcdC50ZXh0KCdESUZGRVJFTlQg4oaQJylcblx0XHQuc3QoJ3RleHQtYW5jaG9yJywnbWlkZGxlJylcblxuXHRsZWFzdFNpbWlsYXJKb2JfQU5OT1RBVElPTlxuXHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRtb3N0U2ltaWxhckpvYl9BTk5PVEFUSU9OXG5cdFx0LnN0KCdvcGFjaXR5JywwKVxuXG5cdG1heFNpbWlsYXJpdHlMYWJlbFxuXHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRtaW5TaW1pbGFyaXR5TGFiZWxcblx0XHQuc3QoJ29wYWNpdHknLDApXG5cblx0JHhBeGlzVGV4dExhYmVsXG5cdFx0LnN0KCdvcGFjaXR5JywwKVxuXG5cblx0JHNpbWlsYXJpdHlBeGlzTGFiZWwgPSAkY2hhcnRTdmdcblx0XHQuc2VsZWN0QWxsKCcuYXhpcy1sYWJlbCcpXG5cblxuXHQvLyBBZGRpbmcgYXV0b21hdGFiaWxpdHkveC1heGlzLCBhbmQgbWF4IGFuZCBtaW4gYXV0b21hdGFiaWxpdHkgbGFiZWxzXG5cdGNvbnN0IGZvcm1hdFBlcmNlbnQgPSBkMy5mb3JtYXQoXCIuMCVcIik7XG5cblx0eUF4aXNMYWJlbCA9IGQzLmF4aXNMZWZ0KHlTY2FsZSkudGlja3MoNCkudGlja0Zvcm1hdChmb3JtYXRQZXJjZW50KTtcblxuXHR5QXhpc0dyb3VwID0gJGNoYXJ0U3ZnLmFwcGVuZChcImcuc2NhdHRlci15LWF4aXNcIilcblx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIit4UGFkZGluZytcIiwwKVwiKVxuXHRcdC5jYWxsKHlBeGlzTGFiZWwpXG5cdFx0LnN0KCdvcGFjaXR5JywwKVxuXG5cdCRhdXRvbWF0YWJpbGl0eV9MQUJFTCA9ICRjaGFydFN2Zy5hcHBlbmQoJ3RleHQuc2NhdHRlci1sYWJlbC15LWF4aXMnKVxuXG5cdCRhdXRvbWF0YWJpbGl0eV9MQUJFTFxuXHRcdC5hdCgndHJhbnNmb3JtJyxgdHJhbnNsYXRlKCR7KHhQYWRkaW5nLzMpfSwke0lOVFJPX1lfQVhJU19MT0NBVElPTn0pIHJvdGF0ZSgyNzApYClcblx0XHQuc3QoJ29wYWNpdHknLDApXG5cdFx0LnRleHQoJ0FVVE9NQVRBQklMSVRZIExJS0VMSUhPT0QnKVxuXG5cblx0am9iVG9vbHRpcCA9IGQzLnNlbGVjdChcImZpZ3VyZS5zdmctY29udGFpbmVyXCIpLmFwcGVuZChcImRpdi5qb2JUb29sdGlwXCIpLm9uKCdjbGljaycsIGhpZGVUb29sdGlwKVxuXG5cblx0Y29uc3Qgam9iU2VsZWN0ZWROYW1lID0gZDMuc2VsZWN0KFwiZGl2LmpvYi1zZWxlY3RlZC1uYW1lXCIpLm9uKCdjbGljaycsIGhpZGVUb29sdGlwKVxuXG5cdGNvbnN0IGpvYkNvbXBhcmVkTnVtYmVyID0gam9iVG9vbHRpcC5hcHBlbmQoXCJkaXYuam9iLWNvbXBhcmVkLW51bWJlclwiKS5vbignY2xpY2snLCBoaWRlVG9vbHRpcClcblx0Y29uc3Qgam9iQ29tcGFyZWROYW1lID0gam9iVG9vbHRpcC5hcHBlbmQoXCJkaXYuam9iLWNvbXBhcmVkLW5hbWVcIikub24oJ2NsaWNrJywgaGlkZVRvb2x0aXApXG5cblx0am9iU2tpbGxzQ29udGFpbmVyID1qb2JUb29sdGlwLmFwcGVuZChcImRpdi5qb2Itc2tpbGxzLWNvbnRhaW5lclwiKVxuXHRjb25zdCBqb2JTa2lsbHNTZWN0aW9uTmFtZXMgPWpvYlNraWxsc0NvbnRhaW5lci5hcHBlbmQoJ2Rpdi50b29sdGlwLXNlY3Rpb24tbmFtZXMnKS5vbignY2xpY2snLCBoaWRlVG9vbHRpcClcblx0Y29uc3Qgam9iU2tpbGxzU2VjdGlvbk5hbWVzU2tpbGwgPSBqb2JTa2lsbHNTZWN0aW9uTmFtZXMuYXBwZW5kKCdkaXYuc2VjdGlvbi1uYW1lLXNraWxscycpLnRleHQoJ1NLSUxMJykub24oJ2NsaWNrJywgaGlkZVRvb2x0aXApXG5cdGNvbnN0IGpvYlNraWxsc1NlY3Rpb25OYW1lc0ltcG9ydGFuY2UgPSBqb2JTa2lsbHNTZWN0aW9uTmFtZXMuYXBwZW5kKCdkaXYuc2VjdGlvbi1uYW1lLWltcG9ydGFuY2UnKS50ZXh0KCdJTVBPUlRBTkNFJykub24oJ2NsaWNrJywgaGlkZVRvb2x0aXApXG5cblxuXHQvLyBBdXRvbWF0YWJpbGl0eSBncm91cCBsYWJlbHNcblxuXHQkYXV0b21hdGFiaWxpdHlCaXNlY3RpbmdHcm91cCA9ICRjaGFydFN2Zy5hcHBlbmQoJ2cuYmlzZWN0aW5nLWF1dG9tYXRpb24tZ3JvdXAnKVxuXHQkYXV0b21hdGFiaWxpdHlCaXNlY3RpbmdHcm91cFxuXHRcdC5hdCgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcreVNjYWxlKGtleU9iamVjdEpvYkF1dG9bc2VsZWN0ZWRKb2JJRF0pKycpJylcblxuXG5cblx0bGV0ICRhdXRvbWF0YWJpbGl0eUJpc2VjdGluZ0xpbmUgPSAkYXV0b21hdGFiaWxpdHlCaXNlY3RpbmdHcm91cC5hcHBlbmQoJ2xpbmUuYmlzZWN0aW5nLWxpbmUnKVxuXHQkYXV0b21hdGFiaWxpdHlCaXNlY3RpbmdMaW5lLmF0KCd4MScseFBhZGRpbmcpXG5cdFx0LmF0KCd5MScsMClcblx0XHQuYXQoJ3gyJyx4TWF4U2NhbGVWYWx1ZSlcblx0XHQuYXQoJ3kyJywwKVxuXG5cblx0bGV0ICRhdXRvbWF0YWJpbGl0eUJpc2VjdGluZ0xhYmVsQmFja2dyb3VuZCA9JGF1dG9tYXRhYmlsaXR5QmlzZWN0aW5nR3JvdXAuYXBwZW5kKCd0ZXh0LmJpc2VjdGluZy1saW5lLWxhYmVsLWJhY2tncm91bmQnKVxuXHQkYXV0b21hdGFiaWxpdHlCaXNlY3RpbmdMYWJlbEJhY2tncm91bmQudGV4dCgnVFJVQ0tFUlMnKVxuXG5cdGxldCAkYXV0b21hdGFiaWxpdHlCaXNlY3RpbmdMYWJlbCA9JGF1dG9tYXRhYmlsaXR5QmlzZWN0aW5nR3JvdXAuYXBwZW5kKCd0ZXh0LmJpc2VjdGluZy1saW5lLWxhYmVsJylcblx0JGF1dG9tYXRhYmlsaXR5QmlzZWN0aW5nTGFiZWwudGV4dCgnVFJVQ0tFUlMnKVxuXG5cblx0JGF1dG9tYXRhYmlsaXR5QmlzZWN0aW5nR3JvdXBcblx0XHQuc3QoJ29wYWNpdHknLDApXG5cblx0ZDMuc2VsZWN0QWxsKCdkaXYuc2VjdGlvbl9fc2NlbmUnKVxuXHRcdC5zdCgncGFkZGluZy1ib3R0b20nLChkLGkpPT57XG5cdFx0XHRpZihpPjEyKXtyZXR1cm4gJzV2aCd9XG5cdFx0XHRlbHNle3JldHVybiAnMTAwdmgnfVxuXHRcdH0pXG5cbn1cblxuZnVuY3Rpb24gdXBkYXRlU3RlcChzdGVwKXtcblx0aWYoc3RlcD09PSd4LWF4aXMtYmFzZScpe1xuXG5cdFx0JGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdnLmFubm90YXRpb24tZ3JvdXAtc3RhY2tlZCcpXG5cdFx0XHQuc3QoJ29wYWNpdHknLDApXG5cblx0XHQkY2hhcnRTdmdcblx0XHRcdC5zZWxlY3RBbGwoJ2cuYW5uby1ncm91cCcpXG5cdFx0XHQuc3QoJ29wYWNpdHknLDApXG5cblx0XHQkc2ltaWxhcml0eUFubm90YXRpb25zXG5cdFx0XHQuY2xhc3NlZCgnaW52aXNpYmxlJyxmYWxzZSlcblxuXHRcdCR0cnVja2VyRGV2ZWxvcGVyWEF4aXNcblx0XHRcdC5jbGFzc2VkKCdpbnZpc2libGUnLHRydWUpXG5cdFx0Ly8gcmVzdG9yaW5nIGpvYiBjaXJjbGUgaG92ZXIgdG9vbHRpcFxuXHRcdCRqb2JDaXJjbGVzXG5cdFx0XHQub24oJ21vdXNlZW50ZXInLCBzaG93VG9vbHRpcClcblx0XHRcdC5vbignY2xpY2snLCBzaG93VG9vbHRpcClcblx0XHRcdC5vbignbW91c2VsZWF2ZScsIGhpZGVUb29sdGlwKVxuXG5cdFx0ZDMuc2VsZWN0QWxsKCdzcGFuLnNlY29uZGFyeS10aXRsZScpXG5cdFx0XHQuc3QoJ2Rpc3BsYXknLCdpbmxpbmUnKVxuXG5cdFx0ZDMuc2VsZWN0KCcuY2hhcnQtdGl0bGUtcHQxJylcblx0XHRcdC50ZXh0KCdXaGF0IHNob3VsZCcpXG5cblx0XHRkMy5zZWxlY3QoJy5jaGFydC10aXRsZS1wdDInKVxuXHRcdFx0LnRleHQoJzEsODcxLDcwMCcpXG5cdFx0XHQuY2xhc3NlZCgncmVkLXRleHQnLGZhbHNlKVxuXG5cdFx0ZDMuc2VsZWN0KCcuY2hhcnQtdGl0bGUtcHQzJylcblx0XHRcdC50ZXh0KCd0cnVja2VycycpXG5cblx0XHRkMy5zZWxlY3QoJy5jaGFydC10aXRsZS1wdDQnKVxuXHRcdFx0LnRleHQoJ2Vhcm5pbmcnKVxuXHRcdFx0LmNsYXNzZWQoJ2JsdWUtdGV4dCcsZmFsc2UpXG5cblx0XHRkMy5zZWxlY3QoJy5jaGFydC10aXRsZS1wdDUnKVxuXHRcdFx0LnRleHQoJyQ0Myw1OTAnKVxuXG5cdFx0ZDMuc2VsZWN0KCcuY2hhcnQtdGl0bGUtcHQ2Jylcblx0XHRcdC50ZXh0KCd5ZWFybHksIHRyYW5zaXRpb24gdG8/JylcblxuXG5cdFx0JGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdnLmFubm90YXRpb24tZ3JvdXAtZGlmZmVyZW50Jylcblx0XHRcdC5zdCgndmlzaWJpbGl0eScsJ2hpZGRlbicpXG5cblx0XHQkY2hhcnRTdmdcblx0XHRcdC5zZWxlY3RBbGwoJ2cuYW5ub3RhdGlvbi1ncm91cC1zaW1pbGFyJylcblx0XHRcdC5zdCgndmlzaWJpbGl0eScsJ2hpZGRlbicpXG5cblx0XHQkY2hhcnRTdmdcblx0XHRcdC5zZWxlY3RBbGwoJ2cuc2tpbGwtc2VjdGlvbl9fdHdvLWpvYnMnKVxuXHRcdFx0LnRyYW5zaXRpb24oKVxuXHRcdFx0Ly8gLmF0KCd0cmFuc2Zvcm0nLGB0cmFuc2xhdGUoMCwke0lOVFJPX1lfQVhJU19MT0NBVElPTn0pYClcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5hbGwtam9icycpXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQvLyAuZGVsYXkoKGQsaSk9PntpKjEwMH0pXG5cdFx0XHQvLyAuYXQoJ3RyYW5zZm9ybScsYHRyYW5zbGF0ZSgwLCR7SU5UUk9fWV9BWElTX0xPQ0FUSU9OfSlgKVxuXHRcdFx0LnN0KCdvcGFjaXR5JywwKVxuXG5cdFx0JGNoYXJ0U3ZnLnNlbGVjdEFsbCgnZy50cnVja2VyLWRldmVsb3Blci1ncm91cHMnKVxuXHRcdFx0LmNsYXNzZWQoJ2ludmlzaWJsZScsIHRydWUpXG5cblx0XHQkY2hhcnRTdmcuc2VsZWN0QWxsKCdjaXJjbGUuam9iJylcblx0XHRcdC5jbGFzc2VkKCdpbnZpc2libGUnLCBmYWxzZSlcblxuXHRcdCRjaGFydFN2Zy5zZWxlY3RBbGwoJ2cuc2ltaWxhcml0eS1hbm5vdGF0aW9uJylcblx0XHRcdC5jbGFzc2VkKCdpbnZpc2libGUnLCBmYWxzZSlcblxuXHRcdCRjaGFydENvbnRhaW5lci5zZWxlY3RBbGwoJy5taXNjLWVsZW1lbnRzJylcblx0XHRcdC5zdCgndmlzaWJpbGl0eScsJ3Zpc2libGUnKVxuXG5cdFx0JGNoYXJ0Q29udGFpbmVyLnNlbGVjdEFsbCgnLmpvYi1zZWxlY3Rvcl9fY29udGFpbmVyJylcblx0XHRcdC5zdCgndmlzaWJpbGl0eScsJ2hpZGRlbicpXG5cblx0XHRjb25zdCAkc3RhdGljSW1hZ2VEaXYgPSAkY2hhcnRDb250YWluZXJcblx0XHQgLnNlbGVjdCgnaW1nLmltYWdlcy1tYW55LWpvYnMtbWFueS1za2lsbHMnKVxuXG5cdCAgJHN0YXRpY0ltYWdlRGl2XG5cdFx0IC5zdCgnZGlzcGxheScsJ25vbmUnKVxuXG5cdFx0JGNoYXJ0U3ZnLnN0KCdkaXNwbGF5JywgJ2Jsb2NrJylcblxuXHRcdGRlZmF1bHRTY2VuZVNldHRpbmcuY3kgPSBmdW5jdGlvbigpe3JldHVybiBJTlRST19ZX0FYSVNfTE9DQVRJT059XG5cdFx0Ly8gZGVmYXVsdFNjZW5lU2V0dGluZy5jeSA9IGZ1bmN0aW9uKGQpe3JldHVybiB5U2NhbGUoa2V5T2JqZWN0Sm9iQXV0b1tkLmlkX2NvbXBhcmVkXSl9XG5cdFx0ZGVmYXVsdFNjZW5lU2V0dGluZy5yID0gZnVuY3Rpb24oKXtyZXR1cm4gM31cblx0XHRkZWZhdWx0U2NlbmVTZXR0aW5nLmZpbGwgPSBmdW5jdGlvbigpe3JldHVybiAnI0ZGRid9XG5cdFx0ZGVmYXVsdFNjZW5lU2V0dGluZy55U2NhbGUgPSBmdW5jdGlvbigpe3lTY2FsZS5kb21haW4oWzAsMV0pfVxuXHRcdGRlZmF1bHRTY2VuZVNldHRpbmcub3BhY2l0eUNpcmNsZXMgPSBmdW5jdGlvbigpe3JldHVybiAxfVxuXHRcdGRlZmF1bHRTY2VuZVNldHRpbmcub3BhY2l0eUFubm90YXRpb25zID0gZnVuY3Rpb24oKXtyZXR1cm4gMH1cblxuXHRcdGRlZmF1bHRTY2VuZVNldHRpbmcueVNjYWxlKClcblxuXHRcdCRqb2JDaXJjbGVzXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuYXQoJ2N5JywgZGVmYXVsdFNjZW5lU2V0dGluZy5jeSlcblx0XHRcdC5hdCgncicsIGRlZmF1bHRTY2VuZVNldHRpbmcucilcblx0XHRcdC5zdCgnZmlsbCcsIGRlZmF1bHRTY2VuZVNldHRpbmcuZmlsbClcblx0XHRcdC5zdCgnb3BhY2l0eScsZGVmYXVsdFNjZW5lU2V0dGluZy5vcGFjaXR5Q2lyY2xlcylcblxuXHRcdCRjaGFydFN2Zy5zZWxlY3RBbGwoJ2cuc2ltaWxhcml0eS1hbm5vdGF0aW9uJylcblx0XHRcdC50cmFuc2l0aW9uKClcblx0XHRcdC5zdCgnb3BhY2l0eScsZGVmYXVsdFNjZW5lU2V0dGluZy5vcGFjaXR5Q2lyY2xlcylcblxuXHRcdHlBeGlzR3JvdXBcblx0XHRcdC5zdCgnb3BhY2l0eScsZGVmYXVsdFNjZW5lU2V0dGluZy5vcGFjaXR5QW5ub3RhdGlvbnMpXG5cblx0XHQkYXV0b21hdGFiaWxpdHlfTEFCRUxcblx0XHRcdC50cmFuc2l0aW9uKClcblx0XHRcdC5zdCgnb3BhY2l0eScsZGVmYXVsdFNjZW5lU2V0dGluZy5vcGFjaXR5QW5ub3RhdGlvbnMpXG5cblx0XHQkYXV0b21hdGFiaWxpdHlCaXNlY3RpbmdHcm91cFxuXHRcdFx0LnRyYW5zaXRpb24oKVxuXHRcdFx0LnN0KCdvcGFjaXR5JyxkZWZhdWx0U2NlbmVTZXR0aW5nLm9wYWNpdHlBbm5vdGF0aW9ucylcblxuXHRcdCRzaW1pbGFyaXR5QXhpc0xhYmVsXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuc3QoJ29wYWNpdHknLDEpXG5cdFx0XHQuYXQoJ3knLCBYX0FYSVNfTEFCRUxfSEVJR0hUKVxuXG5cdH1cblx0ZWxzZSBpZihzdGVwPT09J3h5LWF4aXMtc2NhdHRlcicpe1xuXG5cdFx0JGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdnLnNpbWlsYXJpdHktYW5ub3RhdGlvbicpXG5cdFx0XHQuc3QoJ29wYWNpdHknLDApXG5cblx0XHQkY2hhcnRTdmdcblx0XHRcdC5zZWxlY3RBbGwoJ2cuYW5ub3RhdGlvbi1ncm91cC1zdGFja2VkJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5hbm5vLWdyb3VwJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5hbm5vLWdyb3VwLXNhaWxvcnMnKVxuXHRcdFx0LnN0KCdvcGFjaXR5JywxKVxuXG5cdFx0JHNpbWlsYXJpdHlBbm5vdGF0aW9uc1xuXHRcdFx0LmNsYXNzZWQoJ2ludmlzaWJsZScsdHJ1ZSlcblxuXHRcdHlTY2FsZS5kb21haW4oWzAsMV0pXG5cdFx0eUF4aXNHcm91cFxuXHRcdFx0LnRyYW5zaXRpb24oKVxuXHRcdFx0LmNhbGwoeUF4aXNMYWJlbClcblxuXG5cdFx0Y29uc3QgWV9BWElTX0FOTk9UQVRJT05fSEVJR0hUID15TWF4U2NhbGVWYWx1ZSoxLjA1XG5cblx0XHR5QXhpc0dyb3VwXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuc3QoJ29wYWNpdHknLDEpXG5cblx0XHQkYXV0b21hdGFiaWxpdHlfTEFCRUxcblx0XHRcdC50cmFuc2l0aW9uKClcblx0XHRcdC5zdCgnb3BhY2l0eScsMSlcblxuXHRcdCRjaGFydFN2Zy5zZWxlY3RBbGwoJ3RleHQuYXhpcy1sYWJlbCcpXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuYXQoJ3knLFlfQVhJU19BTk5PVEFUSU9OX0hFSUdIVClcblxuXHRcdCRqb2JDaXJjbGVzXG5cdFx0XHQuY2xhc3NlZCgnaW52aXNpYmxlJyxmYWxzZSlcblx0XHRcdC50cmFuc2l0aW9uKClcblx0XHRcdC5hdCgnY3knLCBkPT57cmV0dXJuIHlTY2FsZShrZXlPYmplY3RKb2JBdXRvW2QuaWRfY29tcGFyZWRdKX0pXG5cdFx0XHQuc3QoJ29wYWNpdHknLDEpXG5cblxuXG5cdFx0JGF1dG9tYXRhYmlsaXR5QmlzZWN0aW5nR3JvdXBcblx0XHQvLyAuc3QoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuc3QoJ29wYWNpdHknLCBkZWZhdWx0U2NlbmVTZXR0aW5nLm9wYWNpdHlDaXJjbGVzKVxuXHRcdFx0LmF0KCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsJyt5U2NhbGUoa2V5T2JqZWN0Sm9iQXV0b1tzZWxlY3RlZEpvYklEXSkrJyknKVxuXHR9XG5cdGVsc2UgaWYoc3RlcD09PSd4eS1heGVzLXNjYXR0ZXInKXtcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5hbm5vdGF0aW9uLWdyb3VwLXN0YWNrZWQnKVxuXHRcdFx0LnN0KCdvcGFjaXR5JywwKVxuXG5cdFx0JGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdnLmFubm8tZ3JvdXAnKVxuXHRcdFx0LnN0KCdvcGFjaXR5JywwKVxuXG5cdFx0JGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdnLmFubm8tZ3JvdXAtYW1idWxhbmNlJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMSlcblxuXHRcdCRqb2JDaXJjbGVzXG5cdFx0XHQuY2xhc3NlZCgnaW52aXNpYmxlJyxmYWxzZSlcblxuXHRcdCRzaW1pbGFyaXR5QW5ub3RhdGlvbnNcblx0XHRcdC5jbGFzc2VkKCdpbnZpc2libGUnLHRydWUpXG5cblx0XHR5U2NhbGUuZG9tYWluKFswLDAuNzldKVxuXG5cdFx0eUF4aXNHcm91cFxuXHRcdFx0LnRyYW5zaXRpb24oKVxuXHRcdFx0LmNhbGwoeUF4aXNMYWJlbClcblxuXHRcdC8vICRqb2JDaXJjbGVzXG5cdFx0Ly8gICAudHJhbnNpdGlvbigpXG5cdFx0Ly8gICAuYXQoJ2N5JywgZD0+e3JldHVybiB5U2NhbGUoa2V5T2JqZWN0Sm9iQXV0b1tkLmlkX2NvbXBhcmVkXSl9KVxuXHRcdC8vICAgLnN0KCdvcGFjaXR5JyxkPT57XG5cdFx0Ly8gICAgIGlmICgra2V5T2JqZWN0Sm9iQXV0b1tkLmlkX2NvbXBhcmVkXT4ra2V5T2JqZWN0Sm9iQXV0b1tkLmlkX3NlbGVjdGVkXSl7cmV0dXJuIDB9XG5cdFx0Ly8gICAgIGVsc2Uge3JldHVybiAxfVxuXHRcdC8vICAgfSlcblxuXG5cdFx0JGF1dG9tYXRhYmlsaXR5QmlzZWN0aW5nR3JvdXBcblx0XHRcdC50cmFuc2l0aW9uKClcblx0XHRcdC5hdCgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcreVNjYWxlKGtleU9iamVjdEpvYkF1dG9bc2VsZWN0ZWRKb2JJRF0pKycpJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRcdCRqb2JDaXJjbGVzXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdCAgICAuc3QoJ29wYWNpdHknLGQ9PiAra2V5T2JqZWN0Sm9iQXV0b1tkLmlkX2NvbXBhcmVkXT4ra2V5T2JqZWN0Sm9iQXV0b1tkLmlkX3NlbGVjdGVkXT8gMCA6IDEpXG5cdCAgICAvLyAudHJhbnNpdGlvbigpXG5cdCAgICAuYXQoJ2N5JywgZD0+e3JldHVybiB5U2NhbGUoa2V5T2JqZWN0Sm9iQXV0b1tkLmlkX2NvbXBhcmVkXSl9KVxuXHRcdFx0LnN0KCdmaWxsJywnI0ZGRicpXG5cdFx0XHQuYXQoJ3InLCAzKVxuXG5cdFx0JGxlZ2VuZFdhZ2VzXG5cdFx0XHQuc3QoJ3Zpc2liaWxpdHknLCdoaWRkZW4nKVxuXHR9XG5cdGVsc2UgaWYoc3RlcD09PSd4eS1heGVzLXNjYXR0ZXItZmlsdGVyZWQnKXtcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5sZWdlbmRfX3dhZ2VzJylcblx0XHRcdC5zdCgnb3BhY2l0eScsIDEpXG5cblx0XHQkY2hhcnRTdmdcblx0XHRcdC5zZWxlY3RBbGwoJ2cuYW5ub3RhdGlvbi1ncm91cC1zdGFja2VkJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5hbm5vLWdyb3VwJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5hbm5vLWdyb3VwLXNoaXBlbmdpbmVlcnMnKVxuXHRcdFx0LnN0KCdvcGFjaXR5JywxKVxuXG5cdFx0JGpvYkNpcmNsZXNcblx0XHRcdC5jbGFzc2VkKCdpbnZpc2libGUnLGZhbHNlKVxuXG5cdFx0JHNpbWlsYXJpdHlBbm5vdGF0aW9uc1xuXHRcdFx0LmNsYXNzZWQoJ2ludmlzaWJsZScsdHJ1ZSlcblxuXHRcdCRsZWdlbmRqb2JOdW1iZXJcblx0XHRcdC50cmFuc2l0aW9uKClcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblx0XHQvLyAuc3QoJ3Zpc2liaWxpdHknLCdoaWRkZW4nKVxuXG5cdFx0JGxlZ2VuZFdhZ2VzXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuc3QoJ3Zpc2liaWxpdHknLCd2aXNpYmxlJylcblxuXG5cblx0XHQkam9iQ2lyY2xlc1xuXHRcdFx0LnRyYW5zaXRpb24oKVxuXHRcdFx0LmF0KCdyJywgMylcblx0XHRcdC5zdCgnZmlsbCcsIGQ9Pntcblx0XHRcdFx0Y29uc3Qgam9iU2VsZWN0ZWRXYWdlID0ga2V5T2JqZWN0Sm9iV2FnZVtkLmlkX3NlbGVjdGVkXVxuXHRcdFx0XHRjb25zdCBqb2JDb21wYXJlZFdhZ2UgPSBrZXlPYmplY3RKb2JXYWdlW2QuaWRfY29tcGFyZWRdXG5cdFx0XHRcdGNvbnN0IHdhZ2VDaGFuZ2UgPSBqb2JDb21wYXJlZFdhZ2Uvam9iU2VsZWN0ZWRXYWdlO1xuXHRcdFx0XHRyZXR1cm4gc2NhbGVzT2JqZWN0LmNvbG9yU2NhbGUod2FnZUNoYW5nZSlcblx0XHRcdH0pXG5cdFx0XHQuc3QoJ29wYWNpdHknLCBkPT57XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQoa2V5T2JqZWN0Sm9iV2FnZVtkLmlkX3NlbGVjdGVkXTxrZXlPYmplY3RKb2JXYWdlW2QuaWRfY29tcGFyZWRdKVxuICAgICAgICAgICAgJiZcbiAgICAgICAgICAgIChrZXlPYmplY3RKb2JBdXRvW2QuaWRfc2VsZWN0ZWRdPmtleU9iamVjdEpvYkF1dG9bZC5pZF9jb21wYXJlZF0pXG5cdFx0XHRcdCl7cmV0dXJuIDF9XG5cdFx0XHRcdGVsc2Uge3JldHVybiAwfVxuXHRcdFx0fSlcblxuXHR9XG5cdGVsc2UgaWYoc3RlcD09PSdzaG93LXNpbWlsYXJpdHktYXV0by13YWdlJyl7XG5cdFx0JGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdnLmxlZ2VuZF9fd2FnZXMnKVxuXHRcdFx0LnN0KCdvcGFjaXR5JywxKVxuXG5cblx0XHQkY2hhcnRTdmdcblx0XHRcdC5zZWxlY3RBbGwoJ2cuYW5ub3RhdGlvbi1ncm91cC1zdGFja2VkJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRcdGRyb3Bkb3duRGVmYXVsdFRyaWdnZXI9dHJ1ZTtcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5hbm5vLWdyb3VwJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5hbm5vLWdyb3VwLWZpbmFsJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMSlcblxuXHRcdGlmKCRjaGFydENvbnRhaW5lci5zZWxlY3QoJy5qb2Itc2VsZWN0b3JfX2Ryb3Bkb3duJykucHJvcGVydHkoJ3ZhbHVlJykhPT0nUGljayBhbm90aGVyIGpvYicpe1xuXHRcdFx0ZHJvcERvd25DaGFuZ2UoKVxuXHRcdH1cblx0XHRlbHNle31cblxuXHRcdCRqb2JDaXJjbGVzID0gJGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdjaXJjbGUuam9iJylcblx0XHRcdC5zdCgnc3Ryb2tlJywgJ2dyYXknKVxuXG5cdFx0JGpvYkRyb3Bkb3duTWVudVxuXHRcdFx0LnRyYW5zaXRpb24oKVxuXHRcdFx0LnN0KCdvcGFjaXR5JywwKVxuXG5cdFx0JGxlZ2VuZGpvYk51bWJlclxuXHRcdFx0LnRyYW5zaXRpb24oKVxuXHRcdFx0LnN0KCdvcGFjaXR5JywgMSlcblxuXHRcdCRqb2JDaXJjbGVzXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuYXQoJ3InLCBkPT57XG5cdFx0XHRcdGNvbnN0IHdhZ2U9a2V5T2JqZWN0Sm9iTnVtYmVyW2QuaWRfY29tcGFyZWRdO1xuXHRcdFx0XHRyZXR1cm4gc2NhbGVzT2JqZWN0LnJhZGl1c1NjYWxlKHdhZ2UpXG5cdFx0XHR9KVxuXG5cdFx0JGNoYXJ0Q29udGFpbmVyXG5cdFx0XHQuc2VsZWN0QWxsKCcuam9iLXNlbGVjdG9yX19jb250YWluZXInKVxuXHRcdFx0LnN0KCd2aXNpYmlsaXR5JywnaGlkZGVuJylcblx0fVxuXHRlbHNlIGlmKHN0ZXA9PT0nc2hvdy1zaW1pbGFyaXR5LWF1dG8td2FnZS1udW1iZXInKXtcblxuXHRcdCRjaGFydFN2Z1xuXHRcdFx0LnNlbGVjdEFsbCgnZy5sZWdlbmRfX3dhZ2VzJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMSlcblxuXG5cdFx0JGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdnLmFubm90YXRpb24tZ3JvdXAtc3RhY2tlZCcpXG5cdFx0XHQuc3QoJ29wYWNpdHknLDApXG5cblx0XHQkY2hhcnRTdmdcblx0XHRcdC5zZWxlY3RBbGwoJ2cuYW5uby1ncm91cCcpXG5cdFx0XHQuc3QoJ29wYWNpdHknLDApXG5cblx0XHRkcm9wZG93bkRlZmF1bHRUcmlnZ2VyPWZhbHNlO1xuXG5cdFx0JGNoYXJ0Q29udGFpbmVyXG5cdFx0XHQuc2VsZWN0QWxsKCcuam9iLXNlbGVjdG9yX19jb250YWluZXInKVxuXHRcdFx0LnN0KCd2aXNpYmlsaXR5JywndmlzaWJsZScpXG5cdFx0Ly8gLnN0KCdwb3NpdGlvbicsJ2Fic29sdXRlJylcblx0XHQvLyAuc3QoJ3RvcCcsICcxJScpXG5cdFx0Ly8gLnN0KCdsZWZ0JywgJzI1JScpXG5cblx0XHQkam9iRHJvcGRvd25NZW51XG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuc3QoJ29wYWNpdHknLDEpXG5cdFx0Ly8gLnN0KCd2aXNpYmlsaXR5JywndmlzaWJsZScpXG5cdH1cblx0ZWxzZSBpZihzdGVwPT09J3Nob3ctc2ltaWxhcml0eS1hdXRvLXdhZ2UtbnVtYmVyJyl7XG5cdFx0ZDMuc2VsZWN0KCdmaWd1cmUnKVxuXHRcdFx0LmNsYXNzZWQoJ3N0aWNreScsZmFsc2UpXG5cdH1cblx0ZWxzZSBpZihzdGVwPT09J2NvbmNsdXNpb24nKXtcblx0XHRpZihpc01vYmlsZSl7JGNoYXJ0Q29udGFpbmVyXG5cdFx0XHQuc2VsZWN0QWxsKCcuam9iLXNlbGVjdG9yX19jb250YWluZXInKVxuXHRcdFx0LnN0KCd2aXNpYmlsaXR5JywnaGlkZGVuJyl9XG5cdH1cbn1cblxuXG5mdW5jdGlvbiBpbml0KCl7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9Pntcblx0XHRkMy5sb2FkRGF0YSguLi5maWxlcywgKGVyciwgcmVzcG9uc2UpPT57XG5cdFx0XHRpZihlcnIpIHJlamVjdCgpXG5cdFx0XHRlbHNle1xuXHRcdFx0XHRjcm9zc3dhbGsgPSByZXNwb25zZVswXTtcblx0XHRcdFx0c2ltaWxhcml0eSAgPSByZXNwb25zZVsxXTtcblx0XHRcdFx0Y3Jvc3N3YWxrU2tpbGxzPSByZXNwb25zZVsyXTtcblx0XHRcdFx0c2tpbGxzID0gcmVzcG9uc2VbM11cblxuXHRcdFx0XHRzZWxlY3RlZEpvYkRhdGEgPVx0c2VsZWN0Sm9iRGF0YShzaW1pbGFyaXR5LCBzZWxlY3RlZEpvYklEKTtcblx0XHRcdFx0Y29uc3QgbGVhc3RTaW1pbGFySm9iID0gZmluZExlYXN0U2ltaWxhckpvYihzZWxlY3RlZEpvYkRhdGEpXG5cdFx0XHRcdGNvbnN0IG1vc3RTaW1pbGFySm9iID0gZmluZE1vc3RTaW1pbGFySm9iKHNlbGVjdGVkSm9iRGF0YSlcblxuXHRcdFx0XHQvLyBNYWtpbmcgc3VyZSBjcm9zc3dhbGsgYW5kIHRvcCBza2lsbCBkYXRhIGlzIGluIHRoZSByaWdodCBmb3JtYXRcblx0XHRcdFx0Zm9ybWF0Q3Jvc3N3YWxrKGNyb3Nzd2Fsaylcblx0XHRcdFx0Zm9ybWF0U2ltaWxhcml0eVZhbHVlcyhzaW1pbGFyaXR5KVxuXHRcdFx0XHRmb3JtYXRDcm9zc3dhbGtTa2lsbHMoY3Jvc3N3YWxrU2tpbGxzKVxuXHRcdFx0XHRmb3JtYXRUb3BTa2lsbHNCeUpvYihza2lsbHMpXG5cblxuXHRcdFx0XHQvLyBGaWxsaW5nIG91dCBrZXkgb2JqZWN0IGRhdGFcblx0XHRcdFx0a2V5U2V0dXBKb2JOYW1lKGNyb3Nzd2Fsaywga2V5T2JqZWN0Sm9iTmFtZSlcblx0XHRcdFx0a2V5U2V0dXBKb2JOdW1iZXIoY3Jvc3N3YWxrLCBrZXlPYmplY3RKb2JOdW1iZXIpXG5cdFx0XHRcdGtleVNldHVwSm9iQXV0b21hdGlvbihjcm9zc3dhbGssIGtleU9iamVjdEpvYkF1dG8pXG5cdFx0XHRcdGtleVNldHVwSm9iV2FnZShjcm9zc3dhbGssIGtleU9iamVjdEpvYldhZ2UpXG5cdFx0XHRcdGtleVNldHVwSm9iU2tpbGxzKGNyb3Nzd2Fsa1NraWxscywga2V5T2JqZWN0U2tpbGxOYW1lKVxuXG5cdFx0XHRcdHJlc2l6ZSgpXG5cdFx0XHRcdHNjYWxlc09iamVjdCA9IHNldHVwU2NhbGVzKClcblx0XHRcdFx0c2V0dXBET01FbGVtZW50cyhsZWFzdFNpbWlsYXJKb2IsbW9zdFNpbWlsYXJKb2IpXG5cdFx0XHRcdHNldHVwTGVnZW5kcyhzY2FsZXNPYmplY3QucmFkaXVzU2NhbGUsIHNjYWxlc09iamVjdC5jb2xvclNjYWxlKVxuXHRcdFx0XHRjcmVhdGVEcm9wZG93bigpXG5cdFx0XHRcdHNldHVwVG9vbHRpcCgpXG5cblx0XHRcdFx0Y3JlYXRlQ2lyY2xlcygpXG5cdFx0XHRcdHNldHVwQW5ub3RhdGlvbnMoKVxuXG5cdFx0XHRcdHJlc29sdmUoc2tpbGxzKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH0pXG5cbn1cblxuXG5leHBvcnQgZGVmYXVsdCB7aW5pdCwgdXBkYXRlU3RlcH1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVZBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFNQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFEQTtBQUNBO0FBS0E7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFEQTtBQUNBO0FBSUE7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFqQkE7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQURBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFIQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUFBO0FBQ0E7QUFIQTtBQUlBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar $chartSvg = d3.select('svg.scatter');\nvar viewportWidth = null;\nvar viewportHeight = null;\nvar isMobile = null;\nvar svgWidth = null;\nvar svgHeight = null;\n\nvar JOB_LABEL_MARGIN_LEFT = null;\nvar ALL_JOBS_STARTING_Y_LOCATION = 20;\nvar TWO_JOBS_SKILL_SPACING = null;\nvar ALL_JOBS_JOB_SPACING = null;\n\nvar XBUMP = null;\nvar TRANSITION_DURATION_SKILLS_DIFFERENCE = 500;\nvar JOB_STACKED_SKILL_DELAY = 3.67647059;\nvar DIFFERENCE_RECT_HEIGHT = 6;\nvar TIME_INTERVAL = 20;\n\nvar $devSkillCircles = null;\nvar $truckerSkillCircles = null;\nvar $skillSectionsText = null;\nvar $axisLines = null;\nvar $skillSectionsTextAllJobs = null;\nvar $skillDifferenceRects = null;\nvar $skillDifferenceRectsAllJobs = null;\nvar $truckerDeveloperXAxis = null;\nvar $introJobsCircles = null;\nvar $exampleSkillTitle = null;\n\nvar allData = null;\nvar allJobSkillsFlat = null;\nvar allJobSkillsGrouped = null;\nvar devAndTruckerSkills = null;\nvar scalesObject = {};\n\nvar $skillSections = null;\nvar $skillSectionsAllJobs = null;\nvar $skillItemsAllJobs = null;\n\nvar reverseTransitionTrigger__highlightSkillDifferences = false;\nvar reverseTransitionTrigger__twoJobsAllSkills = false;\nvar $chartTitle_main = null;\nvar $chartTitle_truckers = null;\nvar $chartTitle_and = null;\nvar $chartTitle_developers = null;\n\nvar fileNames = [\"devs_and_truckers_skills\", \"Choreographers\", \"Dentists\", \"Nurses\", \"Chiropractors\", \"Farmers\", \"Construction_Managers\", \"Firefighters\", \"Geographers\", \"Embalmers\", \"Pipelayers\", \"Podiatrists\", \"Fabric_Patternmakers\", \"Clergy\", \"Makeup_Artists\", \"Family_Therapists\", \"CEOs\", \"Art_Directors\", \"Interior_Designers\", \"Craft_Artists\", \"Event_Planners\", \"Veterinarians\", \"Writers\", \"Political_Scientists\", \"Ship_Engineers\", \"Paramedics\", \"Mathematicians\", \"Florists\", \"Travel_Guides\", \"News_Analysts\", \"Musicians\", \"Fitness_Trainers\", \"Graphic_Designers\", \"Childcare_Workers\", \"Police_Officers\", \"Hairdressers\", \"Journalists\", \"Air_Traffic_Controllers\", \"Dancers\", \"Optometrists\", \"Physician_Assistants\", \"Electricians\", \"Ambulance_Drivers\", \"Athletes\", \"Skincare_Specialists\", \"Private_Cooks\", \"Funeral_Attendants\", \"Actors\", \"Judges\", \"Economists\", \"Historians\", \"Dental_Assistants\", \"Cobblers\", \"Massage_Therapists\", \"Millwrights\", \"Librarians\", \"Maids\", \"Bartenders\", \"Dishwashers\", \"Fast_Food_Cooks\", \"Barbers\", \"Real_Estate_Agents\", \"Proofreaders\"];\n\nvar numOfJobs = fileNames.length;\n\nvar pathData = 'assets/data/';\nvar files = [];\nfileNames.forEach(function (fileName) {\n  files.push(pathData + fileName + '.csv');\n});\n\nfunction resize() {\n  viewportWidth = window.innerWidth;\n  viewportHeight = window.innerHeight;\n  isMobile = viewportWidth < 700 ? true : false;\n}\n\nfunction getRandom(arr, n) {\n  var result = new Array(n),\n      len = arr.length,\n      taken = new Array(len);\n  if (n > len) throw new RangeError(\"getRandom: more elements taken than available\");\n  while (n--) {\n    var x = Math.floor(Math.random() * len);\n    result[n] = arr[x in taken ? taken[x] : x];\n    taken[x] = --len in taken ? taken[len] : len;\n  }\n  return result;\n}\n\nfunction setupData(devAndTruckerSkills, allJobSkillsRaw) {\n\n  var abrigedCount = 0;\n  var arrayCount = 0;\n  var NTH_ITEM = 2;\n  var ALL_OTHER_ITEM_COUNT = 2000;\n\n  devAndTruckerSkills.forEach(function (skill) {\n\n    skill.difference = Math.abs(+skill.devs - +skill.truckers);\n\n    if (arrayCount % NTH_ITEM === 0) {\n      skill.abrigedNum = abrigedCount;\n      abrigedCount += 1;\n    } else {\n      skill.abrigedNum = ALL_OTHER_ITEM_COUNT;\n    }\n\n    arrayCount += 1;\n  });\n\n  allJobSkillsRaw.forEach(function (job) {\n    job.forEach(function (skill) {\n      skill.difference = Math.abs(+skill.job_selected - +skill.job_compared);\n    });\n  });\n\n  // Calculating xCoord offset for stacked bar chart, Devs and Truckes\n\n  var i = void 0;\n  var xSum = 0;\n  var stackPadding = 1;\n\n  for (i = 0; i < devAndTruckerSkills.length; i++) {\n    devAndTruckerSkills[i]['xCoordStacked'] = xSum;\n    xSum += devAndTruckerSkills[i]['difference'] + stackPadding;\n  }\n\n  // Calculating xCoord offset for stacked bar chart, for all jobs\n\n  allJobSkillsRaw.forEach(function (jobAndTruckerSkills) {\n    xSum = 0;\n    stackPadding = 1;\n    for (i = 0; i < jobAndTruckerSkills.length; i++) {\n      jobAndTruckerSkills[i]['xCoordStacked'] = xSum;\n      xSum += +jobAndTruckerSkills[i]['difference'] + stackPadding;\n    }\n  });\n\n  // Concatenating all the CSVS for previously loaded jobs and making a new array\n  // of objects from them, w/ each job name used as a key.\n\n  allJobSkillsFlat = [].concat.apply([], allJobSkillsRaw);\n  allJobSkillsGrouped = d3.nest().key(function (d) {\n    return d.job_compared_name;\n  }).entries(allJobSkillsFlat);\n\n  // abridging job skills array\n  allJobSkillsGrouped = allJobSkillsGrouped.slice(0, 39);\n\n  var jobOrder = 0;\n  allJobSkillsGrouped.forEach(function (jobSkillGroup) {\n    jobSkillGroup.order = jobOrder;\n    jobOrder += 1;\n  });\n}\n\nfunction highlightSkill(d, i, nodes) {\n\n  var elType = $(this)[0].nodeName.toLowerCase();\n\n  var $group = null;\n\n  if (elType === 'g') {\n    $group = d3.select(nodes[i]);\n  } else if (elType === 'text') {\n    $group = d3.select(nodes[i]).parent();\n  }\n\n  $skillSections.st('opacity', 0.3);\n\n  // Opacity, group\n  $group.st('opacity', 1);\n\n  // Circle stroke\n  $group.selectAll('circle').st('stroke-width', 3);\n\n  // Line width\n  $group.select('line.skill-axis').st('stroke-width', 2);\n\n  // Font weight and skill text color change\n  $group.select('text').st('font-weight', 600).st('opacity', 1);\n}\n\nfunction removeHighlightSkill(d, i, nodes) {\n\n  $skillSectionsText.st('font-weight', 400).st('opacity', function (d, i) {\n    if (i % 2 === 0) {\n      return 1;\n    } else {\n      return 0.1;\n    }\n  });\n\n  $skillSections.st('opacity', 1);\n\n  // Circle stroke\n  $skillSections.selectAll('circle').st('stroke-width', 2);\n\n  // Line width\n  $skillSections.selectAll('line.skill-axis').st('stroke-width', 1);\n}\n\nfunction setupScales() {\n  svgWidth = $chartSvg.at('width');\n  svgHeight = $chartSvg.at('height');\n\n  TWO_JOBS_SKILL_SPACING = svgHeight / (devAndTruckerSkills.length + 1);\n  ALL_JOBS_JOB_SPACING = svgHeight / (allJobSkillsGrouped.length + 3);\n\n  // console.log(\"TWO_JOBS_SKILL_SPACING: \"+TWO_JOBS_SKILL_SPACING);\n  // console.log(\"ALL_JOBS_JOB_SPACING: \"+ALL_JOBS_JOB_SPACING);\n\n  var mobileAdjustmentWidth = 0.1;\n  var mobilePaddingPercentage = 0.35;\n\n  var widthPercentage = isMobile ? 0.98 : 0.7;\n  var heightPercentage = 0.7;\n\n  var yMaxScaleValue = svgHeight * heightPercentage;\n  var xMaxScaleValue = isMobile ? svgWidth * (widthPercentage - mobileAdjustmentWidth) : svgWidth * widthPercentage;\n\n  var xPadding = isMobile ? mobilePaddingPercentage * svgWidth : (1 - widthPercentage) * svgWidth;\n  var yPadding = (1 - heightPercentage) * svgHeight;\n\n  scalesObject.xScale = d3.scaleLinear().domain([0, 100]).range([xPadding, xMaxScaleValue]);\n\n  scalesObject.xScaleRectangle = d3.scaleLinear().domain([0, 100]).range([0, xMaxScaleValue - xPadding]);\n\n  var xCoordsArray = [];\n  var xOffsetsForHorizontalBars = allJobSkillsFlat.map(function (d) {\n    return d.xCoordStacked;\n  });\n  var maxSumBarWidth = d3.max(xOffsetsForHorizontalBars);\n  var maxPartBarWidth = isMobile ? maxSumBarWidth / 200 : maxSumBarWidth / 68;\n  scalesObject.xScaleEuclidean = d3.scaleLinear().domain([0, 100]).range([0, maxPartBarWidth]);\n\n  if (isMobile) {\n    JOB_LABEL_MARGIN_LEFT = 10;\n  } else {\n    JOB_LABEL_MARGIN_LEFT = 60;\n  }\n\n  XBUMP = isMobile ? svgWidth * 0.5 : 250;\n}\n\nfunction setupDOMElements(devAndTruckerSkills) {\n  $chartTitle_main = d3.select('span.chart-title-pt1');\n  $chartTitle_truckers = d3.select('span.chart-title-pt2');\n  $chartTitle_and = d3.select('span.chart-title-pt3');\n  $chartTitle_developers = d3.select('span.chart-title-pt4');\n\n  $exampleSkillTitle = $chartSvg.select('text.example-skill-title');\n\n  // Creating group elements for each skill, both for developers and for other jobs\n  $skillSections = $chartSvg.selectAll('g.skill-section__two-jobs').data(devAndTruckerSkills).enter().append('g.skill-section__two-jobs').st('opacity', 0).at('transform', function (d, i) {\n    return 'translate(' + JOB_LABEL_MARGIN_LEFT + ',' + (ALL_JOBS_STARTING_Y_LOCATION + i * TWO_JOBS_SKILL_SPACING) + ')';\n  });\n\n  $skillSectionsAllJobs = $chartSvg.selectAll('g.all-jobs').data(allJobSkillsGrouped).enter().append('g').at('class', function (d) {\n    return 'all-jobs ' + d.key;\n  }).st('opacity', 0);\n\n  $skillItemsAllJobs = $skillSectionsAllJobs.selectAll('g.skill-item').data(function (d) {\n    return d.values;\n  }).enter().append('g').at('class', function (d) {\n    return 'skill-item-' + d.skills.replace(/ /g, '_');\n  });\n\n  $axisLines = $skillSections.append('line.skill-axis');\n\n  $skillSectionsTextAllJobs = $skillSectionsAllJobs.append(\"text.job-name\").st('font-weight', function (d) {\n    if (d.key === 'Pipelayers') {\n      return 600;\n    } else if (d.key === 'CEOs') {\n      return 600;\n    } else {\n      return 400;\n    }\n  });\n  // .st('fill', d=>{\n  //   if(d.key==='Pipelayers'){return '#EB5757'}\n  //   else if (d.key==='CEOs'){return '#2F80ED'}\n  //   else {return '#000000'}\n  // })\n  // console.log(allJobSkillsGrouped)\n\n\n  // Original bars signifying different skills\n  $skillDifferenceRects = $skillSections.append('rect.skill-difference-axis');\n\n  $skillDifferenceRectsAllJobs = $skillItemsAllJobs.append('rect.skill-difference-axis-all-jobs');\n\n  // Adding difference rectangles for devs and truckers\n\n  $skillDifferenceRects.at('x', function (d) {\n    if (+d.devs >= +d.truckers) {\n      return scalesObject.xScale(+d.truckers);\n    } else {\n      return scalesObject.xScale(+d.devs);\n    }\n  }).at('y', \"\" + -DIFFERENCE_RECT_HEIGHT).at('width', function (d) {\n    return scalesObject.xScaleRectangle(d.difference);\n  }).at('height', DIFFERENCE_RECT_HEIGHT).st('fill', '#E530BE').st('opacity', 0);\n\n  $skillDifferenceRectsAllJobs.at('x', function (d) {\n    return scalesObject.xScaleEuclidean(d.xCoordStacked);\n  }).at('width', function (d) {\n    return scalesObject.xScaleEuclidean(d.difference);\n  }).st('fill', '#E530BE').at('transform', \"translate(\" + XBUMP + \",\" + (-DIFFERENCE_RECT_HEIGHT - 1) + \")\").at('height', DIFFERENCE_RECT_HEIGHT).on('mouseenter', function (d) {\n    return console.log(d.skills);\n  });\n  // .st('opacity',0)\n\n\n  $skillSectionsAllJobs.at('transform', function (d, i) {\n    return 'translate(0,' + (3 * ALL_JOBS_STARTING_Y_LOCATION + i * ALL_JOBS_JOB_SPACING) + ')';\n  });\n\n  $devSkillCircles = $skillSections.append('circle.devs-skill-circle');\n\n  $truckerSkillCircles = $skillSections.append('circle.truckers-skill-circle');\n\n  $skillSectionsText = $skillSections.append(\"text.skill-name\");\n\n  $truckerDeveloperXAxis = $chartSvg.selectAll('.intro-x-axis');\n\n  $introJobsCircles = $chartSvg.selectAll('.trucker-developer-groups');\n}\n\nfunction setupAnnotations() {\n\n  var pipelayerCoords = {};\n  var ceosCoords = {};\n  // const clergyCoords = {};\n  // const ambulanceDriversCoords = {};\n\n  var data_Pipelayers = allJobSkillsGrouped.filter(function (job) {\n    return job.key === 'Pipelayers';\n  });\n  var data_CEOs = allJobSkillsGrouped.filter(function (job) {\n    return job.key === 'CEOs';\n  });\n  // const data_Clergy = allJobSkillsGrouped.filter(job=>job.key==='Clergy')\n  // const data_AmbulanceDrivers = allJobSkillsGrouped.filter(job=>job.key==='Ambulance_Drivers')\n\n  var tmp = devAndTruckerSkills.filter(function (skill) {\n    return skill.key === 'Fine Arts';\n  });\n  // console.log(devAndTruckerSkills);\n\n  var skillNumber = data_Pipelayers[0]['values'].length - 1;\n  var MARGIN_TOP = 3 * ALL_JOBS_STARTING_Y_LOCATION;\n\n  pipelayerCoords.xCoord = XBUMP + scalesObject.xScaleEuclidean(data_Pipelayers[0]['values'][skillNumber]['xCoordStacked']);\n  ceosCoords.xCoord = XBUMP + scalesObject.xScaleEuclidean(data_CEOs[0]['values'][skillNumber]['xCoordStacked']);\n  // clergyCoords.xCoord = XBUMP+scalesObject.xScaleEuclidean(data_Clergy[0]['values'][skillNumber]['xCoordStacked'])\n  // ambulanceDriversCoords.xCoord = XBUMP+scalesObject.xScaleEuclidean(data_AmbulanceDrivers[0]['values'][skillNumber]['xCoordStacked'])\n\n  pipelayerCoords.yCoord = +data_Pipelayers[0].order * ALL_JOBS_JOB_SPACING + MARGIN_TOP;\n  ceosCoords.yCoord = +data_CEOs[0].order * ALL_JOBS_JOB_SPACING + MARGIN_TOP;\n  // clergyCoords.yCoord = +data_Clergy[0].order*ALL_JOBS_JOB_SPACING + MARGIN_TOP;\n  // ambulanceDriversCoords.yCoord = +data_AmbulanceDrivers[0].order*ALL_JOBS_JOB_SPACING + MARGIN_TOP;\n\n  var annoStartingCoord = svgWidth - svgWidth * 0.15;\n\n  var differentAnnotationYBump = 40;\n  var differentAnnotationXBump = annoStartingCoord - ceosCoords.xCoord;\n  var similarAnnotationYBump = -30;\n  var similarAnnotationXBump = annoStartingCoord - pipelayerCoords.xCoord;\n\n  var annoConnector = \"arrow\";\n\n  var mostDifferentJobAnno = [{\n    note: { label: 'Among these jobs, CEOs and truck drivers have the greatest gap between their skills', title: 'Different', wrap: 150, align: \"middle\" },\n    // connector:{end:annoConnector},\n    x: ceosCoords.xCoord, y: ceosCoords.yCoord, dx: differentAnnotationXBump, dy: differentAnnotationYBump, subject: { radius: 15, radiusPadding: 5 }\n  }];\n\n  var mostSimilarJobAnno = [{\n    note: { label: 'One of the largest skill overlaps for truck drivers occurs with pipelayers', title: 'Similar', wrap: 150, align: \"middle\" },\n    // connector:{end:annoConnector},\n    x: pipelayerCoords.xCoord, y: pipelayerCoords.yCoord, dx: similarAnnotationXBump, dy: similarAnnotationYBump, subject: { radius: 15, radiusPadding: 5 }\n  }];\n\n  var makeMostDifferentJobAnno = d3.annotation().type(d3.annotationCalloutCircle).annotations(mostDifferentJobAnno);\n  // .editMode(true)\n\n\n  var makeMostSimilarJobAnno = d3.annotation().type(d3.annotationCalloutCircle).annotations(mostSimilarJobAnno);\n  // .editMode(true)\n\n  $chartSvg.append(\"g\").attr(\"transform\", \"translate(\" + 0 + \",\" + 0 + \")\").attr(\"class\", \"annotation-group-different annotation-group-stacked\").call(makeMostDifferentJobAnno);\n\n  $chartSvg.append(\"g\").attr(\"transform\", \"translate(\" + 0 + \",\" + 0 + \")\").attr(\"class\", \"annotation-group-similar annotation-group-stacked\").call(makeMostSimilarJobAnno);\n}\n\nfunction updateStep(step) {\n  if (step === 'images-two-jobs-two-skills-developers') {\n    reverseTransitionTrigger__twoJobsAllSkills = false;\n  }\n  if (step === 'images-two-jobs-all-skills') {\n\n    $chartSvg.select('g.legend__wages').st('opacity', 0);\n\n    $chartSvg.selectAll('g.legend-job-number').st('opacity', 0);\n\n    $chartSvg.selectAll('g.annotation-group-stacked').st('opacity', 0);\n\n    $chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n    $chartSvg.selectAll('text.axis-label').st('opacity', 0);\n\n    $chartSvg.selectAll('g.trucker-developer-groups').st('opacity', 0);\n\n    $chartSvg.selectAll('circle.job').classed('invisible', true);\n\n    $chartSvg.selectAll('g.similarity-annotation').classed('invisible', true);\n\n    $truckerDeveloperXAxis.classed('invisible', false);\n\n    var CIRCLES_REVERSE_FADEIN_DELAY = 250;\n    var CIRCLES_REVERSE_FADEIN_DURATION = 200;\n    var delayVar = 1000;\n\n    var truckerDeveloperXAxisFunction = d3.axisTop(scalesObject.xScale).ticks(1).tickFormat(function (d) {\n      return d + '%';\n    });\n\n    var TruckerDevelopers_transitionVertical_duration = 400;\n\n    $truckerDeveloperXAxis.transition().duration(TruckerDevelopers_transitionVertical_duration).call(truckerDeveloperXAxisFunction).at('transform', function (d, i) {\n      return 'translate(' + JOB_LABEL_MARGIN_LEFT + ',' + (ALL_JOBS_STARTING_Y_LOCATION + 0 * TWO_JOBS_SKILL_SPACING) + ')';\n    });\n\n    $truckerDeveloperXAxis.selectAll('.intro-x-axis .tick line').st('opacity', 0);\n\n    $exampleSkillTitle.st('opacity', 0).classed('invisible', true);\n\n    $chartTitle_main.text('Importance of skills for ');\n\n    $chartTitle_truckers.text('truckers ').classed('red-text', true).st('display', 'inline-block');\n\n    $chartTitle_and.text('and ').st('display', 'inline-block');\n\n    $chartTitle_developers.text('developers').classed('blue-text', true).st('display', 'inline-block');\n\n    d3.select('.chart-title-div').st('visibility', 'visible');\n\n    $skillDifferenceRects.transition().duration(250).st('opacity', 0);\n\n    $devSkillCircles.transition().delay(function () {\n      if (reverseTransitionTrigger__twoJobsAllSkills === true) {\n        return CIRCLES_REVERSE_FADEIN_DELAY;\n      } else {\n        return TruckerDevelopers_transitionVertical_duration;\n      }\n    }).duration(function (d, i) {\n      if (reverseTransitionTrigger__twoJobsAllSkills === true) {\n        return CIRCLES_REVERSE_FADEIN_DURATION;\n      } else {\n        return i * TIME_INTERVAL;\n      }\n    }).st('opacity', 1);\n\n    $truckerSkillCircles.transition().delay(function () {\n      if (reverseTransitionTrigger__twoJobsAllSkills === true) {\n        return CIRCLES_REVERSE_FADEIN_DELAY;\n      } else {\n        return TruckerDevelopers_transitionVertical_duration;\n      }\n    }).duration(function (d, i) {\n      if (reverseTransitionTrigger__twoJobsAllSkills === true) {\n        return CIRCLES_REVERSE_FADEIN_DURATION;\n      } else {\n        return i * TIME_INTERVAL;\n      }\n    }).st('opacity', 1);\n\n    // Getting rid of intro axes\n    // $truckerDeveloperXAxis\n    // .st('opacity',0)\n\n    $introJobsCircles.st('opacity', 0);\n\n    $devSkillCircles.at('cx', function (d) {\n      return scalesObject.xScale(d.devs);\n    }).at('cy', -1).at('r', 5).on('mouseenter');\n\n    $truckerSkillCircles.at('cx', function (d) {\n      return scalesObject.xScale(d.truckers);\n    }).at('cy', -1).at('r', 5);\n\n    $skillSections.at('transform', function (d, i) {\n      return 'translate(' + JOB_LABEL_MARGIN_LEFT + ',' + (ALL_JOBS_STARTING_Y_LOCATION + i * TWO_JOBS_SKILL_SPACING) + ')';\n    }).transition().delay(function () {\n      if (reverseTransitionTrigger__twoJobsAllSkills === false) {\n        return TruckerDevelopers_transitionVertical_duration;\n      } else {\n        return 0;\n      }\n    }).duration(function (d, i) {\n      return i * TIME_INTERVAL;\n    }).st('opacity', 1);\n\n    $skillSectionsText.text(function (d) {\n      if (isMobile) {\n        return d.skills.slice(0, 12) + '...';\n      } else {\n        return d.skills;\n      }\n    }).st('text-anchor', 'right').st('opacity', function (d, i) {\n      if (i % 2 === 0) {\n        return 1;\n      } else {\n        return 0.1;\n      }\n    });\n\n    $axisLines.at('x1', function () {\n      return scalesObject.xScale(0);\n    }).at('y1', -1).at('x2', function () {\n      return scalesObject.xScale(100);\n    }).at('y2', -1).at('stroke-width', 1).st('stroke', 'black').st('opacity', function (d, i) {\n      if (d.skills === \"Programming\") {\n        return 0;\n      } else return 1;\n    });\n\n    $skillSectionsTextAllJobs.at('transform', 'translate(' + JOB_LABEL_MARGIN_LEFT + ',0)').text(function (d) {\n      return d.key.replace(/_/g, ' ');\n    }).st('text-anchor', 'right').st('opacity', 0);\n\n    $truckerDeveloperXAxis.selectAll('.intro-x-axis .tick text').st('font-size', '12px').st('opacity', 1).at('y', 0);\n\n    reverseTransitionTrigger__twoJobsAllSkills = true;\n  } else if (step === 'images-two-jobs-highlight-skill-differences') {\n\n    $chartSvg.select('g.legend__wages').st('opacity', 0);\n\n    $chartSvg.selectAll('g.legend-job-number').st('opacity', 0);\n\n    $chartSvg.selectAll('g.annotation-group-stacked').st('opacity', 0);\n\n    $chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n    $chartSvg.selectAll('text.axis-label').st('opacity', 0);\n\n    $chartSvg.selectAll('g.trucker-developer-groups').st('opacity', 0);\n\n    $chartSvg.selectAll('circle.job').classed('invisible', true);\n\n    $chartSvg.selectAll('circle.job').classed('invisible', true);\n\n    $chartSvg.selectAll('g.similarity-annotation').classed('invisible', true);\n\n    $truckerDeveloperXAxis.classed('invisible', false);\n\n    $exampleSkillTitle.classed('invisible', true);\n\n    var RECTS_FADEIN_DELAY = 250;\n    var _delayVar = numOfJobs * TIME_INTERVAL * 0.6;\n\n    $truckerDeveloperXAxis.transition().delay(_delayVar).st('opacity', 1);\n\n    d3.selectAll('.secondary-title-stacking').st('display', 'none');\n\n    $chartTitle_main.text('Skill differences between truckers & developers');\n\n    // const CIRCLES_FADEIN_DURATION=350\n\n    // ACCOUNTING FOR REVERSE:\n    // Removing annotations\n    $chartSvg.selectAll('g.annotation-group-different').transition().st('visibility', 'hidden');\n\n    $chartSvg.selectAll('g.annotation-group-similar').transition().st('visibility', 'hidden');\n\n    $skillSections.st('opacity', 1).transition().delay(function () {\n      if (reverseTransitionTrigger__highlightSkillDifferences === true) {\n        return _delayVar;\n      } else {\n        return 0;\n      }\n    })\n    // .duration(250)\n    .at('transform', function (d, i) {\n      return 'translate(' + JOB_LABEL_MARGIN_LEFT + ',' + (ALL_JOBS_STARTING_Y_LOCATION + i * TWO_JOBS_SKILL_SPACING) + ')';\n    });\n\n    $skillSectionsText.transition().delay(function () {\n      if (reverseTransitionTrigger__highlightSkillDifferences === true) {\n        return _delayVar;\n      } else {\n        return 0;\n      }\n    }).text(function (d) {\n      if (isMobile) {\n        return d.skills.slice(0, 12) + '...';\n      } else {\n        return d.skills;\n      }\n    }).st('text-anchor', 'right')\n    // .at('transform','translate('+JOB_LABEL_MARGIN_LEFT+ ',0)')\n    .st('opacity', function (d, i) {\n      if (i % 2 === 0) {\n        return 1;\n      } else {\n        return 0.1;\n      }\n    }).at('transform', 'translate(' + 0 + ',0)');\n\n    $axisLines.at('x1', function () {\n      return scalesObject.xScale(0);\n    }).at('y1', -DIFFERENCE_RECT_HEIGHT / 2).at('x2', function () {\n      return scalesObject.xScale(100);\n    }).at('y2', -DIFFERENCE_RECT_HEIGHT / 2).at('stroke-width', 1).st('stroke', 'black').transition().delay(function () {\n      if (reverseTransitionTrigger__highlightSkillDifferences === true) {\n        return _delayVar;\n      } else {\n        return 0;\n      }\n    }).st('opacity', function (d, i) {\n      if (d.skills === \"Programming\") {\n        return 0;\n      } else return 1;\n    });\n\n    $skillSectionsTextAllJobs.text(function (d) {\n      return d.key.replace(/_/g, ' ');\n    }).st('text-anchor', 'right').transition().duration(function (d, i) {\n      return numOfJobs * TIME_INTERVAL - i * TIME_INTERVAL;\n    }).st('opacity', 0);\n\n    $skillDifferenceRects.transition().delay(function () {\n      if (reverseTransitionTrigger__highlightSkillDifferences === true) {\n        return _delayVar;\n      } else {\n        return RECTS_FADEIN_DELAY;\n      }\n    }).duration(500).st('opacity', 1).at('x', function (d) {\n      if (+d.devs >= +d.truckers) {\n        return scalesObject.xScale(+d.truckers);\n      } else {\n        return scalesObject.xScale(+d.devs);\n      }\n    }).at('y', -DIFFERENCE_RECT_HEIGHT).at('width', function (d) {\n      return scalesObject.xScaleRectangle(d.difference);\n    }).at('height', DIFFERENCE_RECT_HEIGHT).at('transform', 'translate(0,0)').st('fill', '#E530BE');\n\n    $devSkillCircles.transition().st('opacity', 0);\n\n    $truckerSkillCircles.transition().st('opacity', 0);\n\n    $skillSectionsAllJobs.transition()\n    // .delay(numOfJobs*TIME_INTERVAL)\n    .duration(function (d, i) {\n      return numOfJobs * TIME_INTERVAL - i * TIME_INTERVAL;\n    }).st('opacity', 0);\n\n    reverseTransitionTrigger__highlightSkillDifferences = false;\n  } else if (step === 'images-two-jobs-stacked-skills') {\n\n    $chartSvg.selectAll('g.annotation-group-stacked').st('opacity', 1);\n\n    $chartSvg.select('g.legend__wages').st('opacity', 0);\n\n    $chartSvg.selectAll('g.legend-job-number').st('opacity', 0);\n\n    $chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n    $chartSvg.selectAll('text.axis-label').st('opacity', 0);\n\n    $chartSvg.selectAll('g.trucker-developer-groups').st('opacity', 0);\n\n    $chartSvg.selectAll('g.similarity-annotation').classed('invisible', true);\n\n    $truckerDeveloperXAxis.classed('invisible', false);\n\n    $exampleSkillTitle.classed('invisible', true);\n\n    $truckerDeveloperXAxis.st('opacity', 0);\n\n    $chartSvg.selectAll('g.similarity-annotation').st('opacity', 0);\n\n    d3.selectAll('span.secondary-title-remaining').st('display', 'none');\n\n    $chartSvg.selectAll('.axis-label').st('opacity', 0);\n\n    $chartSvg.selectAll('circle.job').classed('invisible', true).st('opacity', 0).on('mouseenter', function () {});\n\n    d3.selectAll('span.secondary-title-stacking').st('display', 'none');\n\n    $chartTitle_main.transition().text(\"Skills differences between truckers & other jobs\");\n\n    reverseTransitionTrigger__highlightSkillDifferences = true;\n\n    // Removing axis line visibility in each skill group for trucker/dev\n    $axisLines.transition().st('opacity', 0);\n\n    // Removing developer skill and trucker skill circles from view\n    $devSkillCircles.transition().st('opacity', 0);\n\n    $truckerSkillCircles.transition().st('opacity', 0);\n\n    // ACCOUNTING FOR REVERSE:\n    // Moving job skill groups back to appropriate place\n\n    // AND\n\n    // waiting 450ms before fading each job's skill difference section, each slower than the next by 50ms\n    $skillSectionsAllJobs.at('transform', function (d, i) {\n      return 'translate(0,' + (3 * ALL_JOBS_STARTING_Y_LOCATION + i * ALL_JOBS_JOB_SPACING) + ')';\n    }).transition().delay(450).duration(function (d, i) {\n      return i * TIME_INTERVAL;\n    }).st('opacity', 1);\n\n    // Waiting 450ms before fading each job's title in\n    $skillSectionsTextAllJobs.transition().delay(450).st('opacity', 1);\n\n    // Adding title of \"Developer\" to the trucker/dev skill difference rectangle group\n    $skillSectionsText.transition().st('opacity', 0).text(function (d, i) {\n      if (i === devAndTruckerSkills.length - 1) {\n        return 'Developers';\n      } else return '';\n    })\n    // .at('transform','translate('+JOB_LABEL_MARGIN_LEFT+ ',0)')\n    .at('transform', 'translate(' + JOB_LABEL_MARGIN_LEFT + ',0)').transition().st('opacity', 1);\n\n    // Transitioning trucker/dev skill difference rects to appropriate place\n\n    $skillDifferenceRects.transition()\n    // .delay(1000)\n    .duration(TRANSITION_DURATION_SKILLS_DIFFERENCE).at('x', function (d) {\n      return scalesObject.xScaleEuclidean(d.xCoordStacked);\n    }).at('width', function (d) {\n      return scalesObject.xScaleEuclidean(d.difference);\n    }).at('transform', function (d, i) {\n      return 'translate(' + XBUMP + ',0)';\n    }).at('height', DIFFERENCE_RECT_HEIGHT);\n\n    var yTransform = 3 * ALL_JOBS_STARTING_Y_LOCATION - ALL_JOBS_JOB_SPACING;\n\n    $skillSections.transition().delay(function (d, i) {\n      return i * JOB_STACKED_SKILL_DELAY;\n    }).st('opacity', 1).at('transform', function () {\n      return 'translate(' + 0 + ',' + yTransform + ')';\n    });\n\n    $skillDifferenceRects.on('mouseenter', function (d) {\n      return console.log(d.skills);\n    });\n\n    $chartSvg.selectAll('g.annotation-group-different').transition().delay(450).st('visibility', 'visible');\n\n    $chartSvg.selectAll('g.annotation-group-similar').transition().delay(450).st('visibility', 'visible');\n  }\n}\n\nfunction populateRawSkills(allJobSkillsRaw, response) {\n  // Note: i=1 here to exclude first entry in data loaded, which reprensents devs comparison\n  var i = void 0;\n  for (i = 1; i < response.length; i++) {\n    allJobSkillsRaw.push(response[i]);\n  }\n}\n\nfunction init() {\n  return new Promise(function (resolve, reject) {\n    var _d;\n\n    (_d = d3).loadData.apply(_d, files.concat([function (err, response) {\n      if (err) reject();else {\n        devAndTruckerSkills = response[0];\n        var allJobSkillsRaw = [];\n\n        populateRawSkills(allJobSkillsRaw, response);\n\n        resize();\n        setupData(devAndTruckerSkills, allJobSkillsRaw);\n        setupScales();\n        setupDOMElements(devAndTruckerSkills);\n        if (isMobile) {} else {\n          setupAnnotations();\n        }\n        resolve();\n      }\n    }]));\n  });\n}\n\nexports.default = { init: init, updateStep: updateStep };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvc2tpbGxTdGFja2luZy5qcz9jOTVlIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0ICRjaGFydFN2ZyA9IGQzLnNlbGVjdCgnc3ZnLnNjYXR0ZXInKVxubGV0IHZpZXdwb3J0V2lkdGggPSBudWxsO1xubGV0IHZpZXdwb3J0SGVpZ2h0ID0gbnVsbDtcbmxldCBpc01vYmlsZSA9IG51bGw7XG5sZXQgc3ZnV2lkdGggPSBudWxsO1xubGV0IHN2Z0hlaWdodCA9IG51bGw7XG5cbmxldCBKT0JfTEFCRUxfTUFSR0lOX0xFRlQgPSBudWxsO1xuY29uc3QgQUxMX0pPQlNfU1RBUlRJTkdfWV9MT0NBVElPTiA9IDIwO1xubGV0IFRXT19KT0JTX1NLSUxMX1NQQUNJTkcgPSBudWxsO1xubGV0IEFMTF9KT0JTX0pPQl9TUEFDSU5HID0gbnVsbDtcblxubGV0IFhCVU1QID0gbnVsbDtcbmNvbnN0IFRSQU5TSVRJT05fRFVSQVRJT05fU0tJTExTX0RJRkZFUkVOQ0UgPSA1MDA7XG5jb25zdCBKT0JfU1RBQ0tFRF9TS0lMTF9ERUxBWSA9IDMuNjc2NDcwNTlcbmNvbnN0IERJRkZFUkVOQ0VfUkVDVF9IRUlHSFQgPSA2XG5jb25zdCBUSU1FX0lOVEVSVkFMID0gMjA7XG5cbmxldCAkZGV2U2tpbGxDaXJjbGVzID0gbnVsbDtcbmxldCAkdHJ1Y2tlclNraWxsQ2lyY2xlcyA9IG51bGw7XG5sZXQgJHNraWxsU2VjdGlvbnNUZXh0PSBudWxsO1xubGV0ICRheGlzTGluZXMgPSBudWxsO1xubGV0ICRza2lsbFNlY3Rpb25zVGV4dEFsbEpvYnMgPSBudWxsO1xubGV0ICRza2lsbERpZmZlcmVuY2VSZWN0cyA9IG51bGw7XG5sZXQgJHNraWxsRGlmZmVyZW5jZVJlY3RzQWxsSm9icyA9IG51bGw7XG5sZXQgJHRydWNrZXJEZXZlbG9wZXJYQXhpcyA9IG51bGw7XG5sZXQgJGludHJvSm9ic0NpcmNsZXMgPSBudWxsO1xubGV0ICRleGFtcGxlU2tpbGxUaXRsZSA9IG51bGw7XG5cblxubGV0IGFsbERhdGEgPSBudWxsO1xubGV0IGFsbEpvYlNraWxsc0ZsYXQgPSBudWxsO1xubGV0IGFsbEpvYlNraWxsc0dyb3VwZWQgPSBudWxsO1xubGV0IGRldkFuZFRydWNrZXJTa2lsbHMgPSBudWxsO1xubGV0IHNjYWxlc09iamVjdCA9IHt9XG5cbmxldCAkc2tpbGxTZWN0aW9ucyA9IG51bGw7XG5sZXQgJHNraWxsU2VjdGlvbnNBbGxKb2JzID0gbnVsbDtcbmxldCAkc2tpbGxJdGVtc0FsbEpvYnMgPSBudWxsO1xuXG5sZXQgcmV2ZXJzZVRyYW5zaXRpb25UcmlnZ2VyX19oaWdobGlnaHRTa2lsbERpZmZlcmVuY2VzID0gZmFsc2U7XG5sZXQgcmV2ZXJzZVRyYW5zaXRpb25UcmlnZ2VyX190d29Kb2JzQWxsU2tpbGxzID0gZmFsc2U7XG5sZXQgJGNoYXJ0VGl0bGVfbWFpbiA9IG51bGw7XG5sZXQgJGNoYXJ0VGl0bGVfdHJ1Y2tlcnMgPSBudWxsO1xubGV0ICRjaGFydFRpdGxlX2FuZCA9IG51bGw7XG5sZXQgJGNoYXJ0VGl0bGVfZGV2ZWxvcGVycyA9IG51bGw7XG5cblxuY29uc3QgZmlsZU5hbWVzID0gW1xuICBcImRldnNfYW5kX3RydWNrZXJzX3NraWxsc1wiLFwiQ2hvcmVvZ3JhcGhlcnNcIixcIkRlbnRpc3RzXCIsXCJOdXJzZXNcIixcbiAgXCJDaGlyb3ByYWN0b3JzXCIsXCJGYXJtZXJzXCIsXCJDb25zdHJ1Y3Rpb25fTWFuYWdlcnNcIixcIkZpcmVmaWdodGVyc1wiLFwiR2VvZ3JhcGhlcnNcIixcIkVtYmFsbWVyc1wiLFxuICBcIlBpcGVsYXllcnNcIixcIlBvZGlhdHJpc3RzXCIsXCJGYWJyaWNfUGF0dGVybm1ha2Vyc1wiLFwiQ2xlcmd5XCIsXCJNYWtldXBfQXJ0aXN0c1wiLFxuICBcIkZhbWlseV9UaGVyYXBpc3RzXCIsXCJDRU9zXCIsXCJBcnRfRGlyZWN0b3JzXCIsXCJJbnRlcmlvcl9EZXNpZ25lcnNcIixcIkNyYWZ0X0FydGlzdHNcIixcbiAgXCJFdmVudF9QbGFubmVyc1wiLFwiVmV0ZXJpbmFyaWFuc1wiLFwiV3JpdGVyc1wiLFwiUG9saXRpY2FsX1NjaWVudGlzdHNcIixcIlNoaXBfRW5naW5lZXJzXCIsXG4gIFwiUGFyYW1lZGljc1wiLFwiTWF0aGVtYXRpY2lhbnNcIixcIkZsb3Jpc3RzXCIsXCJUcmF2ZWxfR3VpZGVzXCIsXCJOZXdzX0FuYWx5c3RzXCIsXG4gIFwiTXVzaWNpYW5zXCIsXCJGaXRuZXNzX1RyYWluZXJzXCIsXCJHcmFwaGljX0Rlc2lnbmVyc1wiLFwiQ2hpbGRjYXJlX1dvcmtlcnNcIixcIlBvbGljZV9PZmZpY2Vyc1wiLFxuICBcIkhhaXJkcmVzc2Vyc1wiLFwiSm91cm5hbGlzdHNcIixcIkFpcl9UcmFmZmljX0NvbnRyb2xsZXJzXCIsXCJEYW5jZXJzXCIsXCJPcHRvbWV0cmlzdHNcIixcbiAgXCJQaHlzaWNpYW5fQXNzaXN0YW50c1wiLFwiRWxlY3RyaWNpYW5zXCIsXCJBbWJ1bGFuY2VfRHJpdmVyc1wiLFwiQXRobGV0ZXNcIixcIlNraW5jYXJlX1NwZWNpYWxpc3RzXCIsXG4gIFwiUHJpdmF0ZV9Db29rc1wiLFwiRnVuZXJhbF9BdHRlbmRhbnRzXCIsXCJBY3RvcnNcIixcIkp1ZGdlc1wiLFwiRWNvbm9taXN0c1wiLFxuICBcIkhpc3RvcmlhbnNcIixcIkRlbnRhbF9Bc3Npc3RhbnRzXCIsXCJDb2JibGVyc1wiLFwiTWFzc2FnZV9UaGVyYXBpc3RzXCIsXCJNaWxsd3JpZ2h0c1wiLFxuICBcIkxpYnJhcmlhbnNcIixcIk1haWRzXCIsXCJCYXJ0ZW5kZXJzXCIsXCJEaXNod2FzaGVyc1wiLFwiRmFzdF9Gb29kX0Nvb2tzXCIsXG4gIFwiQmFyYmVyc1wiLFwiUmVhbF9Fc3RhdGVfQWdlbnRzXCIsXCJQcm9vZnJlYWRlcnNcIlxuXVxuXG5jb25zdCBudW1PZkpvYnMgPSBmaWxlTmFtZXMubGVuZ3RoO1xuXG5jb25zdCBwYXRoRGF0YSA9ICdhc3NldHMvZGF0YS8nXG5sZXQgZmlsZXM9W11cbmZpbGVOYW1lcy5mb3JFYWNoKChmaWxlTmFtZSk9PntcbiAgZmlsZXMucHVzaChwYXRoRGF0YStmaWxlTmFtZSArICcuY3N2Jylcbn0pXG5cbmZ1bmN0aW9uIHJlc2l6ZSgpIHtcbiAgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICB2aWV3cG9ydEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgaXNNb2JpbGUgPSB2aWV3cG9ydFdpZHRoIDwgNzAwPyB0cnVlIDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldFJhbmRvbShhcnIsIG4pIHtcbiAgICBsZXQgcmVzdWx0ID0gbmV3IEFycmF5KG4pLFxuICAgICAgICBsZW4gPSBhcnIubGVuZ3RoLFxuICAgICAgICB0YWtlbiA9IG5ldyBBcnJheShsZW4pO1xuICAgIGlmIChuID4gbGVuKVxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImdldFJhbmRvbTogbW9yZSBlbGVtZW50cyB0YWtlbiB0aGFuIGF2YWlsYWJsZVwiKTtcbiAgICB3aGlsZSAobi0tKSB7XG4gICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGVuKTtcbiAgICAgICAgcmVzdWx0W25dID0gYXJyW3ggaW4gdGFrZW4gPyB0YWtlblt4XSA6IHhdO1xuICAgICAgICB0YWtlblt4XSA9IC0tbGVuIGluIHRha2VuID8gdGFrZW5bbGVuXSA6IGxlbjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gc2V0dXBEYXRhKGRldkFuZFRydWNrZXJTa2lsbHMsYWxsSm9iU2tpbGxzUmF3KXtcblxuICBsZXQgYWJyaWdlZENvdW50ID0gMDtcbiAgbGV0IGFycmF5Q291bnQgPSAwO1xuICBjb25zdCBOVEhfSVRFTT0gMjtcbiAgY29uc3QgQUxMX09USEVSX0lURU1fQ09VTlQgPSAyMDAwXG5cbiAgZGV2QW5kVHJ1Y2tlclNraWxscy5mb3JFYWNoKHNraWxsPT57XG5cbiAgICBza2lsbC5kaWZmZXJlbmNlID0gTWF0aC5hYnMoK3NraWxsLmRldnMtICtza2lsbC50cnVja2VycylcblxuICAgIGlmIChhcnJheUNvdW50ICUgIE5USF9JVEVNID09PSAwKXtcbiAgICAgIHNraWxsLmFicmlnZWROdW0gPSBhYnJpZ2VkQ291bnRcbiAgICAgIGFicmlnZWRDb3VudCs9MTtcbiAgICB9XG4gICAgZWxzZXtza2lsbC5hYnJpZ2VkTnVtID0gQUxMX09USEVSX0lURU1fQ09VTlR9XG5cbiAgICBhcnJheUNvdW50ICs9IDE7XG4gIH0pXG5cbiAgYWxsSm9iU2tpbGxzUmF3LmZvckVhY2goam9iPT57XG4gICAgam9iLmZvckVhY2goc2tpbGw9PntcbiAgICAgIHNraWxsLmRpZmZlcmVuY2UgPSBNYXRoLmFicygrc2tpbGwuam9iX3NlbGVjdGVkLSArc2tpbGwuam9iX2NvbXBhcmVkKVxuICAgIH0pXG4gIH0pXG5cblxuICAvLyBDYWxjdWxhdGluZyB4Q29vcmQgb2Zmc2V0IGZvciBzdGFja2VkIGJhciBjaGFydCwgRGV2cyBhbmQgVHJ1Y2tlc1xuXG4gIGxldCBpO1xuICBsZXQgeFN1bT0wO1xuICBsZXQgc3RhY2tQYWRkaW5nPTE7XG5cbiAgZm9yIChpPTA7IGk8ZGV2QW5kVHJ1Y2tlclNraWxscy5sZW5ndGg7IGkrKyl7XG4gICAgZGV2QW5kVHJ1Y2tlclNraWxsc1tpXVsneENvb3JkU3RhY2tlZCddPXhTdW1cbiAgICB4U3VtKz1kZXZBbmRUcnVja2VyU2tpbGxzW2ldWydkaWZmZXJlbmNlJ10gKyBzdGFja1BhZGRpbmdcbiAgfVxuXG5cbi8vIENhbGN1bGF0aW5nIHhDb29yZCBvZmZzZXQgZm9yIHN0YWNrZWQgYmFyIGNoYXJ0LCBmb3IgYWxsIGpvYnNcblxuICBhbGxKb2JTa2lsbHNSYXcuZm9yRWFjaChqb2JBbmRUcnVja2VyU2tpbGxzPT57XG4gICAgeFN1bT0wO1xuICAgIHN0YWNrUGFkZGluZz0xO1xuICAgIGZvciAoaT0wOyBpPGpvYkFuZFRydWNrZXJTa2lsbHMubGVuZ3RoOyBpKyspe1xuICAgICAgam9iQW5kVHJ1Y2tlclNraWxsc1tpXVsneENvb3JkU3RhY2tlZCddPXhTdW1cbiAgICAgIHhTdW0rPSAram9iQW5kVHJ1Y2tlclNraWxsc1tpXVsnZGlmZmVyZW5jZSddICsgc3RhY2tQYWRkaW5nXG4gICAgfVxuICB9KVxuXG4gIC8vIENvbmNhdGVuYXRpbmcgYWxsIHRoZSBDU1ZTIGZvciBwcmV2aW91c2x5IGxvYWRlZCBqb2JzIGFuZCBtYWtpbmcgYSBuZXcgYXJyYXlcbiAgLy8gb2Ygb2JqZWN0cyBmcm9tIHRoZW0sIHcvIGVhY2ggam9iIG5hbWUgdXNlZCBhcyBhIGtleS5cblxuICBhbGxKb2JTa2lsbHNGbGF0ID0gW10uY29uY2F0LmFwcGx5KFtdLCBhbGxKb2JTa2lsbHNSYXcpO1xuICBhbGxKb2JTa2lsbHNHcm91cGVkID0gZDMubmVzdCgpXG4gICAgLmtleShkPT5kLmpvYl9jb21wYXJlZF9uYW1lKVxuICAgIC5lbnRyaWVzKGFsbEpvYlNraWxsc0ZsYXQpXG5cbiAgLy8gYWJyaWRnaW5nIGpvYiBza2lsbHMgYXJyYXlcbiAgYWxsSm9iU2tpbGxzR3JvdXBlZCA9IGFsbEpvYlNraWxsc0dyb3VwZWQuc2xpY2UoMCwzOSlcblxuICBsZXQgam9iT3JkZXIgPSAwXG4gIGFsbEpvYlNraWxsc0dyb3VwZWQuZm9yRWFjaChqb2JTa2lsbEdyb3VwPT57XG4gICAgam9iU2tpbGxHcm91cC5vcmRlciA9IGpvYk9yZGVyO1xuICAgIGpvYk9yZGVyKz0xO1xuICB9KVxufVxuXG5mdW5jdGlvbiBoaWdobGlnaHRTa2lsbChkLGksbm9kZXMpe1xuXG4gIGNvbnN0IGVsVHlwZSA9ICQodGhpcylbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuICBsZXQgJGdyb3VwID0gbnVsbDtcblxuICBpZihlbFR5cGU9PT0nZycpe1xuICAgICRncm91cCA9IGQzLnNlbGVjdChub2Rlc1tpXSlcbiAgfVxuICBlbHNlIGlmKGVsVHlwZT09PSd0ZXh0Jyl7XG4gICAgJGdyb3VwID0gZDMuc2VsZWN0KG5vZGVzW2ldKS5wYXJlbnQoKVxuICB9XG5cblxuICAkc2tpbGxTZWN0aW9uc1xuICAgIC5zdCgnb3BhY2l0eScsMC4zKVxuXG5cblxuICAvLyBPcGFjaXR5LCBncm91cFxuICAkZ3JvdXBcbiAgICAuc3QoJ29wYWNpdHknLDEpXG5cbiAgLy8gQ2lyY2xlIHN0cm9rZVxuICAkZ3JvdXBcbiAgICAuc2VsZWN0QWxsKCdjaXJjbGUnKVxuICAgIC5zdCgnc3Ryb2tlLXdpZHRoJywzKVxuXG4gIC8vIExpbmUgd2lkdGhcbiAgJGdyb3VwXG4gICAgLnNlbGVjdCgnbGluZS5za2lsbC1heGlzJylcbiAgICAuc3QoJ3N0cm9rZS13aWR0aCcsMilcblxuICAvLyBGb250IHdlaWdodCBhbmQgc2tpbGwgdGV4dCBjb2xvciBjaGFuZ2VcbiAgJGdyb3VwXG4gICAgLnNlbGVjdCgndGV4dCcpXG4gICAgLnN0KCdmb250LXdlaWdodCcsNjAwKVxuICAgIC5zdCgnb3BhY2l0eScsMSlcblxuXG59XG5cbmZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodFNraWxsKGQsaSxub2Rlcyl7XG5cbiAgJHNraWxsU2VjdGlvbnNUZXh0XG4gICAgLnN0KCdmb250LXdlaWdodCcsNDAwKVxuICAgIC5zdCgnb3BhY2l0eScsKGQsaSk9PntcbiAgICAgIGlmKGklMj09PTApe3JldHVybiAxfVxuICAgICAgZWxzZXtyZXR1cm4gMC4xfVxuICAgIH0pXG5cbiAgJHNraWxsU2VjdGlvbnNcbiAgICAuc3QoJ29wYWNpdHknLDEpXG5cbiAgLy8gQ2lyY2xlIHN0cm9rZVxuICAkc2tpbGxTZWN0aW9uc1xuICAgIC5zZWxlY3RBbGwoJ2NpcmNsZScpXG4gICAgLnN0KCdzdHJva2Utd2lkdGgnLDIpXG5cbiAgLy8gTGluZSB3aWR0aFxuICAkc2tpbGxTZWN0aW9uc1xuICAgIC5zZWxlY3RBbGwoJ2xpbmUuc2tpbGwtYXhpcycpXG4gICAgLnN0KCdzdHJva2Utd2lkdGgnLDEpXG5cbn1cblxuZnVuY3Rpb24gc2V0dXBTY2FsZXMoKXtcbiAgc3ZnV2lkdGggPSAkY2hhcnRTdmcuYXQoJ3dpZHRoJylcbiAgc3ZnSGVpZ2h0ID0gJGNoYXJ0U3ZnLmF0KCdoZWlnaHQnKVxuXG4gIFRXT19KT0JTX1NLSUxMX1NQQUNJTkcgPSBzdmdIZWlnaHQvKGRldkFuZFRydWNrZXJTa2lsbHMubGVuZ3RoKzEpXG4gIEFMTF9KT0JTX0pPQl9TUEFDSU5HID0gc3ZnSGVpZ2h0LyhhbGxKb2JTa2lsbHNHcm91cGVkLmxlbmd0aCszKVxuXG4gIC8vIGNvbnNvbGUubG9nKFwiVFdPX0pPQlNfU0tJTExfU1BBQ0lORzogXCIrVFdPX0pPQlNfU0tJTExfU1BBQ0lORyk7XG4gIC8vIGNvbnNvbGUubG9nKFwiQUxMX0pPQlNfSk9CX1NQQUNJTkc6IFwiK0FMTF9KT0JTX0pPQl9TUEFDSU5HKTtcblxuICBjb25zdCBtb2JpbGVBZGp1c3RtZW50V2lkdGggPSAwLjFcbiAgY29uc3QgbW9iaWxlUGFkZGluZ1BlcmNlbnRhZ2UgPSAwLjM1XG5cbiAgY29uc3Qgd2lkdGhQZXJjZW50YWdlID0gaXNNb2JpbGU/IDAuOTggOiAwLjc7XG4gIGNvbnN0IGhlaWdodFBlcmNlbnRhZ2UgPSAwLjc7XG5cbiAgY29uc3QgeU1heFNjYWxlVmFsdWUgPSBzdmdIZWlnaHQgKiBoZWlnaHRQZXJjZW50YWdlO1xuICBjb25zdCB4TWF4U2NhbGVWYWx1ZSA9IGlzTW9iaWxlPyBzdmdXaWR0aCAqICh3aWR0aFBlcmNlbnRhZ2UtbW9iaWxlQWRqdXN0bWVudFdpZHRoKSA6IHN2Z1dpZHRoICogd2lkdGhQZXJjZW50YWdlO1xuXG4gIGNvbnN0IHhQYWRkaW5nID0gaXNNb2JpbGU/IG1vYmlsZVBhZGRpbmdQZXJjZW50YWdlICogc3ZnV2lkdGggOiAoMS13aWR0aFBlcmNlbnRhZ2UpKnN2Z1dpZHRoO1xuICBjb25zdCB5UGFkZGluZyA9ICgxLWhlaWdodFBlcmNlbnRhZ2UpKnN2Z0hlaWdodDtcblxuICBzY2FsZXNPYmplY3QueFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuICBcdC5kb21haW4oWzAsMTAwXSlcbiAgXHQucmFuZ2UoW3hQYWRkaW5nLCB4TWF4U2NhbGVWYWx1ZV0pO1xuXG4gIHNjYWxlc09iamVjdC54U2NhbGVSZWN0YW5nbGUgPSBkMy5zY2FsZUxpbmVhcigpXG4gIFx0LmRvbWFpbihbMCwxMDBdKVxuICBcdC5yYW5nZShbMCwgKHhNYXhTY2FsZVZhbHVlLXhQYWRkaW5nKV0pO1xuXG5cbiAgY29uc3QgeENvb3Jkc0FycmF5ID0gW11cbiAgY29uc3QgeE9mZnNldHNGb3JIb3Jpem9udGFsQmFycyA9IGFsbEpvYlNraWxsc0ZsYXQubWFwKGQ9PiBkLnhDb29yZFN0YWNrZWQpXG4gIGNvbnN0IG1heFN1bUJhcldpZHRoID0gZDMubWF4KHhPZmZzZXRzRm9ySG9yaXpvbnRhbEJhcnMpO1xuICBjb25zdCBtYXhQYXJ0QmFyV2lkdGg9IGlzTW9iaWxlPyBtYXhTdW1CYXJXaWR0aC8yMDAgOiBtYXhTdW1CYXJXaWR0aC82ODtcbiAgc2NhbGVzT2JqZWN0LnhTY2FsZUV1Y2xpZGVhbiA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAuZG9tYWluKFswLDEwMF0pXG4gICAgLnJhbmdlKFswLCBtYXhQYXJ0QmFyV2lkdGhdKTtcblxuICBpZihpc01vYmlsZSl7Sk9CX0xBQkVMX01BUkdJTl9MRUZUPTEwfVxuICBlbHNle0pPQl9MQUJFTF9NQVJHSU5fTEVGVD02MH1cblxuICBYQlVNUCA9IGlzTW9iaWxlPyBzdmdXaWR0aCowLjUgOiAyNTA7XG5cbn1cblxuXG5mdW5jdGlvbiBzZXR1cERPTUVsZW1lbnRzKGRldkFuZFRydWNrZXJTa2lsbHMpIHtcbiAgJGNoYXJ0VGl0bGVfbWFpbiA9IGQzLnNlbGVjdCgnc3Bhbi5jaGFydC10aXRsZS1wdDEnKVxuICAkY2hhcnRUaXRsZV90cnVja2VycyA9IGQzLnNlbGVjdCgnc3Bhbi5jaGFydC10aXRsZS1wdDInKVxuICAkY2hhcnRUaXRsZV9hbmQgPSBkMy5zZWxlY3QoJ3NwYW4uY2hhcnQtdGl0bGUtcHQzJylcbiAgJGNoYXJ0VGl0bGVfZGV2ZWxvcGVycyA9IGQzLnNlbGVjdCgnc3Bhbi5jaGFydC10aXRsZS1wdDQnKVxuXG4gICRleGFtcGxlU2tpbGxUaXRsZSA9ICRjaGFydFN2Z1xuICAgIC5zZWxlY3QoJ3RleHQuZXhhbXBsZS1za2lsbC10aXRsZScpXG5cbiAgLy8gQ3JlYXRpbmcgZ3JvdXAgZWxlbWVudHMgZm9yIGVhY2ggc2tpbGwsIGJvdGggZm9yIGRldmVsb3BlcnMgYW5kIGZvciBvdGhlciBqb2JzXG4gICRza2lsbFNlY3Rpb25zID0gJGNoYXJ0U3ZnLnNlbGVjdEFsbCgnZy5za2lsbC1zZWN0aW9uX190d28tam9icycpXG4gICAgLmRhdGEoZGV2QW5kVHJ1Y2tlclNraWxscylcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ2cuc2tpbGwtc2VjdGlvbl9fdHdvLWpvYnMnKVxuICAgIC5zdCgnb3BhY2l0eScsMClcbiAgICAuYXQoJ3RyYW5zZm9ybScsIChkLGkpPT57cmV0dXJuICd0cmFuc2xhdGUoJytKT0JfTEFCRUxfTUFSR0lOX0xFRlQrJywnKyAoQUxMX0pPQlNfU1RBUlRJTkdfWV9MT0NBVElPTisoaSpUV09fSk9CU19TS0lMTF9TUEFDSU5HKSkgKycpJ30pO1xuXG4gICRza2lsbFNlY3Rpb25zQWxsSm9icyA9ICRjaGFydFN2Zy5zZWxlY3RBbGwoJ2cuYWxsLWpvYnMnKVxuICAgIC5kYXRhKGFsbEpvYlNraWxsc0dyb3VwZWQpXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXQoJ2NsYXNzJyxkPT4gJ2FsbC1qb2JzICcrZC5rZXkpXG4gICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICRza2lsbEl0ZW1zQWxsSm9icyA9ICRza2lsbFNlY3Rpb25zQWxsSm9icy5zZWxlY3RBbGwoJ2cuc2tpbGwtaXRlbScpXG4gICAgLmRhdGEoZD0+ZC52YWx1ZXMpXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXQoJ2NsYXNzJyxkPT4nc2tpbGwtaXRlbS0nK2Quc2tpbGxzLnJlcGxhY2UoLyAvZywnXycpKVxuXG5cblxuICAkYXhpc0xpbmVzID0gJHNraWxsU2VjdGlvbnNcbiAgICAuYXBwZW5kKCdsaW5lLnNraWxsLWF4aXMnKVxuXG4gICRza2lsbFNlY3Rpb25zVGV4dEFsbEpvYnMgPSAkc2tpbGxTZWN0aW9uc0FsbEpvYnNcbiAgICAuYXBwZW5kKFwidGV4dC5qb2ItbmFtZVwiKVxuICAgIC5zdCgnZm9udC13ZWlnaHQnLGQ9PntcbiAgICAgIGlmKGQua2V5PT09J1BpcGVsYXllcnMnKXtyZXR1cm4gNjAwfVxuICAgICAgZWxzZSBpZiAoZC5rZXk9PT0nQ0VPcycpe3JldHVybiA2MDB9XG4gICAgICBlbHNlIHtyZXR1cm4gNDAwfVxuICAgIH0pXG4gICAgLy8gLnN0KCdmaWxsJywgZD0+e1xuICAgIC8vICAgaWYoZC5rZXk9PT0nUGlwZWxheWVycycpe3JldHVybiAnI0VCNTc1Nyd9XG4gICAgLy8gICBlbHNlIGlmIChkLmtleT09PSdDRU9zJyl7cmV0dXJuICcjMkY4MEVEJ31cbiAgICAvLyAgIGVsc2Uge3JldHVybiAnIzAwMDAwMCd9XG4gICAgLy8gfSlcbiAgICAvLyBjb25zb2xlLmxvZyhhbGxKb2JTa2lsbHNHcm91cGVkKVxuXG5cbi8vIE9yaWdpbmFsIGJhcnMgc2lnbmlmeWluZyBkaWZmZXJlbnQgc2tpbGxzXG4gICRza2lsbERpZmZlcmVuY2VSZWN0cyA9ICRza2lsbFNlY3Rpb25zLmFwcGVuZCgncmVjdC5za2lsbC1kaWZmZXJlbmNlLWF4aXMnKVxuXG4gICRza2lsbERpZmZlcmVuY2VSZWN0c0FsbEpvYnMgPSAkc2tpbGxJdGVtc0FsbEpvYnMuYXBwZW5kKCdyZWN0LnNraWxsLWRpZmZlcmVuY2UtYXhpcy1hbGwtam9icycpXG5cbi8vIEFkZGluZyBkaWZmZXJlbmNlIHJlY3RhbmdsZXMgZm9yIGRldnMgYW5kIHRydWNrZXJzXG5cbiAgJHNraWxsRGlmZmVyZW5jZVJlY3RzXG4gIC5hdCgneCcsIGQ9PntcbiAgICBpZiAoK2QuZGV2cz49K2QudHJ1Y2tlcnMpe1xuICAgICAgcmV0dXJuIHNjYWxlc09iamVjdC54U2NhbGUoK2QudHJ1Y2tlcnMpXG4gICAgfVxuICAgIGVsc2V7XG4gICAgICByZXR1cm4gc2NhbGVzT2JqZWN0LnhTY2FsZSgrZC5kZXZzKVxuICAgIH1cbiAgICB9KVxuICAuYXQoJ3knLCBgJHsoLURJRkZFUkVOQ0VfUkVDVF9IRUlHSFQpfWAgKVxuICAuYXQoJ3dpZHRoJyxkPT57XG4gICAgcmV0dXJuIHNjYWxlc09iamVjdC54U2NhbGVSZWN0YW5nbGUoZC5kaWZmZXJlbmNlKTtcbiAgfSlcbiAgLmF0KCdoZWlnaHQnLCBESUZGRVJFTkNFX1JFQ1RfSEVJR0hUKVxuICAuc3QoJ2ZpbGwnLCcjRTUzMEJFJylcbiAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICRza2lsbERpZmZlcmVuY2VSZWN0c0FsbEpvYnNcbiAgICAuYXQoJ3gnLGQ9PiBzY2FsZXNPYmplY3QueFNjYWxlRXVjbGlkZWFuKGQueENvb3JkU3RhY2tlZCkpXG4gICAgLmF0KCd3aWR0aCcsZD0+IHNjYWxlc09iamVjdC54U2NhbGVFdWNsaWRlYW4oZC5kaWZmZXJlbmNlKSlcbiAgICAuc3QoJ2ZpbGwnLCcjRTUzMEJFJylcbiAgICAuYXQoJ3RyYW5zZm9ybScsYHRyYW5zbGF0ZSgke1hCVU1QfSwkey1ESUZGRVJFTkNFX1JFQ1RfSEVJR0hULTF9KWApXG4gICAgLmF0KCdoZWlnaHQnLCBESUZGRVJFTkNFX1JFQ1RfSEVJR0hUKVxuICAgIC5vbignbW91c2VlbnRlcicsZD0+Y29uc29sZS5sb2coZC5za2lsbHMpKVxuICAgIC8vIC5zdCgnb3BhY2l0eScsMClcblxuXG4gICRza2lsbFNlY3Rpb25zQWxsSm9ic1xuICAgIC5hdCgndHJhbnNmb3JtJywoZCxpKT0+e1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnKygzKkFMTF9KT0JTX1NUQVJUSU5HX1lfTE9DQVRJT04gKyhpKkFMTF9KT0JTX0pPQl9TUEFDSU5HKSkrJyknXG4gIH0pXG5cblxuICAkZGV2U2tpbGxDaXJjbGVzID0gJHNraWxsU2VjdGlvbnNcbiAgICAuYXBwZW5kKCdjaXJjbGUuZGV2cy1za2lsbC1jaXJjbGUnKVxuXG4gICR0cnVja2VyU2tpbGxDaXJjbGVzID0gJHNraWxsU2VjdGlvbnNcbiAgICAuYXBwZW5kKCdjaXJjbGUudHJ1Y2tlcnMtc2tpbGwtY2lyY2xlJylcblxuICAkc2tpbGxTZWN0aW9uc1RleHQ9ICRza2lsbFNlY3Rpb25zXG4gICAgLmFwcGVuZChcInRleHQuc2tpbGwtbmFtZVwiKVxuXG4gICR0cnVja2VyRGV2ZWxvcGVyWEF4aXMgPSAkY2hhcnRTdmdcbiAgICAuc2VsZWN0QWxsKCcuaW50cm8teC1heGlzJylcblxuICAkaW50cm9Kb2JzQ2lyY2xlcyA9ICRjaGFydFN2Z1xuICAgIC5zZWxlY3RBbGwoJy50cnVja2VyLWRldmVsb3Blci1ncm91cHMnKVxufVxuXG5mdW5jdGlvbiBzZXR1cEFubm90YXRpb25zKCl7XG5cbiAgY29uc3QgcGlwZWxheWVyQ29vcmRzID0ge307XG4gIGNvbnN0IGNlb3NDb29yZHMgPSB7fTtcbiAgLy8gY29uc3QgY2xlcmd5Q29vcmRzID0ge307XG4gIC8vIGNvbnN0IGFtYnVsYW5jZURyaXZlcnNDb29yZHMgPSB7fTtcblxuICBjb25zdCBkYXRhX1BpcGVsYXllcnMgPSBhbGxKb2JTa2lsbHNHcm91cGVkLmZpbHRlcihqb2I9PmpvYi5rZXk9PT0nUGlwZWxheWVycycpXG4gIGNvbnN0IGRhdGFfQ0VPcyA9IGFsbEpvYlNraWxsc0dyb3VwZWQuZmlsdGVyKGpvYj0+am9iLmtleT09PSdDRU9zJylcbiAgLy8gY29uc3QgZGF0YV9DbGVyZ3kgPSBhbGxKb2JTa2lsbHNHcm91cGVkLmZpbHRlcihqb2I9PmpvYi5rZXk9PT0nQ2xlcmd5JylcbiAgLy8gY29uc3QgZGF0YV9BbWJ1bGFuY2VEcml2ZXJzID0gYWxsSm9iU2tpbGxzR3JvdXBlZC5maWx0ZXIoam9iPT5qb2Iua2V5PT09J0FtYnVsYW5jZV9Ecml2ZXJzJylcblxuICBjb25zdCB0bXAgPWRldkFuZFRydWNrZXJTa2lsbHMuZmlsdGVyKHNraWxsPT5za2lsbC5rZXk9PT0nRmluZSBBcnRzJylcbiAgLy8gY29uc29sZS5sb2coZGV2QW5kVHJ1Y2tlclNraWxscyk7XG5cbiAgY29uc3Qgc2tpbGxOdW1iZXIgPSBkYXRhX1BpcGVsYXllcnNbMF1bJ3ZhbHVlcyddLmxlbmd0aC0xXG4gIGNvbnN0IE1BUkdJTl9UT1AgPSAzKkFMTF9KT0JTX1NUQVJUSU5HX1lfTE9DQVRJT047XG5cbiAgcGlwZWxheWVyQ29vcmRzLnhDb29yZCA9IFhCVU1QK3NjYWxlc09iamVjdC54U2NhbGVFdWNsaWRlYW4oZGF0YV9QaXBlbGF5ZXJzWzBdWyd2YWx1ZXMnXVtza2lsbE51bWJlcl1bJ3hDb29yZFN0YWNrZWQnXSlcbiAgY2Vvc0Nvb3Jkcy54Q29vcmQgPSBYQlVNUCtzY2FsZXNPYmplY3QueFNjYWxlRXVjbGlkZWFuKGRhdGFfQ0VPc1swXVsndmFsdWVzJ11bc2tpbGxOdW1iZXJdWyd4Q29vcmRTdGFja2VkJ10pXG4gIC8vIGNsZXJneUNvb3Jkcy54Q29vcmQgPSBYQlVNUCtzY2FsZXNPYmplY3QueFNjYWxlRXVjbGlkZWFuKGRhdGFfQ2xlcmd5WzBdWyd2YWx1ZXMnXVtza2lsbE51bWJlcl1bJ3hDb29yZFN0YWNrZWQnXSlcbiAgLy8gYW1idWxhbmNlRHJpdmVyc0Nvb3Jkcy54Q29vcmQgPSBYQlVNUCtzY2FsZXNPYmplY3QueFNjYWxlRXVjbGlkZWFuKGRhdGFfQW1idWxhbmNlRHJpdmVyc1swXVsndmFsdWVzJ11bc2tpbGxOdW1iZXJdWyd4Q29vcmRTdGFja2VkJ10pXG5cbiAgcGlwZWxheWVyQ29vcmRzLnlDb29yZCA9ICtkYXRhX1BpcGVsYXllcnNbMF0ub3JkZXIqQUxMX0pPQlNfSk9CX1NQQUNJTkcgKyBNQVJHSU5fVE9QO1xuICBjZW9zQ29vcmRzLnlDb29yZCA9ICtkYXRhX0NFT3NbMF0ub3JkZXIqQUxMX0pPQlNfSk9CX1NQQUNJTkcgKyBNQVJHSU5fVE9QO1xuICAvLyBjbGVyZ3lDb29yZHMueUNvb3JkID0gK2RhdGFfQ2xlcmd5WzBdLm9yZGVyKkFMTF9KT0JTX0pPQl9TUEFDSU5HICsgTUFSR0lOX1RPUDtcbiAgLy8gYW1idWxhbmNlRHJpdmVyc0Nvb3Jkcy55Q29vcmQgPSArZGF0YV9BbWJ1bGFuY2VEcml2ZXJzWzBdLm9yZGVyKkFMTF9KT0JTX0pPQl9TUEFDSU5HICsgTUFSR0lOX1RPUDtcblxuICBjb25zdCBhbm5vU3RhcnRpbmdDb29yZCA9IHN2Z1dpZHRoLXN2Z1dpZHRoKjAuMTVcblxuICBjb25zdCBkaWZmZXJlbnRBbm5vdGF0aW9uWUJ1bXAgPSA0MDtcbiAgY29uc3QgZGlmZmVyZW50QW5ub3RhdGlvblhCdW1wID0gYW5ub1N0YXJ0aW5nQ29vcmQtY2Vvc0Nvb3Jkcy54Q29vcmQ7XG4gIGNvbnN0IHNpbWlsYXJBbm5vdGF0aW9uWUJ1bXAgPSAtMzBcbiAgY29uc3Qgc2ltaWxhckFubm90YXRpb25YQnVtcCA9IGFubm9TdGFydGluZ0Nvb3JkIC0gcGlwZWxheWVyQ29vcmRzLnhDb29yZDtcblxuICBsZXQgYW5ub0Nvbm5lY3Rvcj1cImFycm93XCI7XG5cbiAgY29uc3QgbW9zdERpZmZlcmVudEpvYkFubm8gPSBbXG4gICAge1xuXHRcdCAgbm90ZToge2xhYmVsOidBbW9uZyB0aGVzZSBqb2JzLCBDRU9zIGFuZCB0cnVjayBkcml2ZXJzIGhhdmUgdGhlIGdyZWF0ZXN0IGdhcCBiZXR3ZWVuIHRoZWlyIHNraWxscycsdGl0bGU6J0RpZmZlcmVudCcsd3JhcDoxNTAsYWxpZ246XCJtaWRkbGVcIix9LFxuXHRcdFx0Ly8gY29ubmVjdG9yOntlbmQ6YW5ub0Nvbm5lY3Rvcn0sXG4gICAgXHRcdFx0eDpjZW9zQ29vcmRzLnhDb29yZCx5OmNlb3NDb29yZHMueUNvb3JkLGR4OmRpZmZlcmVudEFubm90YXRpb25YQnVtcCxkeTpkaWZmZXJlbnRBbm5vdGF0aW9uWUJ1bXAsc3ViamVjdDoge3JhZGl1czogMTUscmFkaXVzUGFkZGluZzogNX1cbiAgXHRcdH1cbiAgICBdO1xuXG4gIGNvbnN0IG1vc3RTaW1pbGFySm9iQW5ubyA9IFtcbiAgICB7XG5cdFx0ICBub3RlOiB7bGFiZWw6J09uZSBvZiB0aGUgbGFyZ2VzdCBza2lsbCBvdmVybGFwcyBmb3IgdHJ1Y2sgZHJpdmVycyBvY2N1cnMgd2l0aCBwaXBlbGF5ZXJzJyx0aXRsZTonU2ltaWxhcicsd3JhcDoxNTAsYWxpZ246XCJtaWRkbGVcIix9LFxuXHRcdFx0Ly8gY29ubmVjdG9yOntlbmQ6YW5ub0Nvbm5lY3Rvcn0sXG4gICAgXHRcdFx0eDpwaXBlbGF5ZXJDb29yZHMueENvb3JkLHk6cGlwZWxheWVyQ29vcmRzLnlDb29yZCxkeDpzaW1pbGFyQW5ub3RhdGlvblhCdW1wLGR5OnNpbWlsYXJBbm5vdGF0aW9uWUJ1bXAsc3ViamVjdDoge3JhZGl1czogMTUscmFkaXVzUGFkZGluZzogNX1cbiAgXHRcdH1cbiAgICBdO1xuXG4gIGNvbnN0IG1ha2VNb3N0RGlmZmVyZW50Sm9iQW5ubyA9IGQzLmFubm90YXRpb24oKVxuICBcdFx0XHQudHlwZShkMy5hbm5vdGF0aW9uQ2FsbG91dENpcmNsZSlcbiAgXHRcdFx0LmFubm90YXRpb25zKG1vc3REaWZmZXJlbnRKb2JBbm5vKVxuICBcdFx0XHQvLyAuZWRpdE1vZGUodHJ1ZSlcblxuXG4gIGNvbnN0IG1ha2VNb3N0U2ltaWxhckpvYkFubm8gPSBkMy5hbm5vdGF0aW9uKClcbiAgXHRcdFx0LnR5cGUoZDMuYW5ub3RhdGlvbkNhbGxvdXRDaXJjbGUpXG4gIFx0XHRcdC5hbm5vdGF0aW9ucyhtb3N0U2ltaWxhckpvYkFubm8pXG4gIFx0XHRcdC8vIC5lZGl0TW9kZSh0cnVlKVxuXG4gICRjaGFydFN2Zy5hcHBlbmQoXCJnXCIpXG4gIFx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoXCIrMCtcIixcIiswK1wiKVwiKVxuICBcdFx0XHQuYXR0cihcImNsYXNzXCIsXCJhbm5vdGF0aW9uLWdyb3VwLWRpZmZlcmVudCBhbm5vdGF0aW9uLWdyb3VwLXN0YWNrZWRcIilcbiAgXHRcdFx0LmNhbGwobWFrZU1vc3REaWZmZXJlbnRKb2JBbm5vKVxuXG4gICRjaGFydFN2Zy5hcHBlbmQoXCJnXCIpXG4gIFx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoXCIrMCtcIixcIiswK1wiKVwiKVxuICBcdFx0XHQuYXR0cihcImNsYXNzXCIsXCJhbm5vdGF0aW9uLWdyb3VwLXNpbWlsYXIgYW5ub3RhdGlvbi1ncm91cC1zdGFja2VkXCIpXG4gIFx0XHRcdC5jYWxsKG1ha2VNb3N0U2ltaWxhckpvYkFubm8pXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVN0ZXAoc3RlcCl7XG4gIGlmKHN0ZXA9PT0naW1hZ2VzLXR3by1qb2JzLXR3by1za2lsbHMtZGV2ZWxvcGVycycpe1xuICAgIHJldmVyc2VUcmFuc2l0aW9uVHJpZ2dlcl9fdHdvSm9ic0FsbFNraWxscyA9IGZhbHNlO1xuICB9XG4gIGlmKHN0ZXA9PT0naW1hZ2VzLXR3by1qb2JzLWFsbC1za2lsbHMnKXtcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdCgnZy5sZWdlbmRfX3dhZ2VzJylcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuXG5cdFx0JGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdnLmxlZ2VuZC1qb2ItbnVtYmVyJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5hbm5vdGF0aW9uLWdyb3VwLXN0YWNrZWQnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLmFubm8tZ3JvdXAnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCd0ZXh0LmF4aXMtbGFiZWwnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLnRydWNrZXItZGV2ZWxvcGVyLWdyb3VwcycpXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ2NpcmNsZS5qb2InKVxuICAgICAgLmNsYXNzZWQoJ2ludmlzaWJsZScsdHJ1ZSlcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5zaW1pbGFyaXR5LWFubm90YXRpb24nKVxuICAgICAgLmNsYXNzZWQoJ2ludmlzaWJsZScsdHJ1ZSlcblxuICAgICR0cnVja2VyRGV2ZWxvcGVyWEF4aXNcbiAgICAgIC5jbGFzc2VkKCdpbnZpc2libGUnLGZhbHNlKVxuXG4gICAgY29uc3QgQ0lSQ0xFU19SRVZFUlNFX0ZBREVJTl9ERUxBWT0yNTBcbiAgICBjb25zdCBDSVJDTEVTX1JFVkVSU0VfRkFERUlOX0RVUkFUSU9OPTIwMFxuICAgIGNvbnN0IGRlbGF5VmFyID0gMTAwMFxuXG4gICAgY29uc3QgdHJ1Y2tlckRldmVsb3BlclhBeGlzRnVuY3Rpb24gPSBkMy5heGlzVG9wKHNjYWxlc09iamVjdC54U2NhbGUpLnRpY2tzKDEpLnRpY2tGb3JtYXQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZCArICclJyB9ICk7XG5cbiAgICBjb25zdCBUcnVja2VyRGV2ZWxvcGVyc190cmFuc2l0aW9uVmVydGljYWxfZHVyYXRpb24gPSA0MDA7XG5cbiAgICAkdHJ1Y2tlckRldmVsb3BlclhBeGlzXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oVHJ1Y2tlckRldmVsb3BlcnNfdHJhbnNpdGlvblZlcnRpY2FsX2R1cmF0aW9uKVxuICAgICAgLmNhbGwodHJ1Y2tlckRldmVsb3BlclhBeGlzRnVuY3Rpb24pXG4gICAgICAuYXQoJ3RyYW5zZm9ybScsIChkLGkpPT57cmV0dXJuICd0cmFuc2xhdGUoJytKT0JfTEFCRUxfTUFSR0lOX0xFRlQrJywnKyAoQUxMX0pPQlNfU1RBUlRJTkdfWV9MT0NBVElPTisoMCpUV09fSk9CU19TS0lMTF9TUEFDSU5HKSkgKycpJ30pXG5cbiAgICAkdHJ1Y2tlckRldmVsb3BlclhBeGlzXG4gICAgICAuc2VsZWN0QWxsKCcuaW50cm8teC1heGlzIC50aWNrIGxpbmUnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGV4YW1wbGVTa2lsbFRpdGxlXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG4gICAgICAuY2xhc3NlZCgnaW52aXNpYmxlJyx0cnVlKVxuXG4gICAgJGNoYXJ0VGl0bGVfbWFpblxuICAgICAgLnRleHQoJ0ltcG9ydGFuY2Ugb2Ygc2tpbGxzIGZvciAnKVxuXG4gICAgJGNoYXJ0VGl0bGVfdHJ1Y2tlcnNcbiAgICAgIC50ZXh0KCd0cnVja2VycyAnKVxuICAgICAgLmNsYXNzZWQoJ3JlZC10ZXh0Jyx0cnVlKVxuICAgICAgLnN0KCdkaXNwbGF5JywnaW5saW5lLWJsb2NrJylcblxuICAgICRjaGFydFRpdGxlX2FuZFxuICAgICAgLnRleHQoJ2FuZCAnKVxuICAgICAgLnN0KCdkaXNwbGF5JywnaW5saW5lLWJsb2NrJylcblxuICAgICRjaGFydFRpdGxlX2RldmVsb3BlcnNcbiAgICAgIC50ZXh0KCdkZXZlbG9wZXJzJylcbiAgICAgIC5jbGFzc2VkKCdibHVlLXRleHQnLHRydWUpXG4gICAgICAuc3QoJ2Rpc3BsYXknLCdpbmxpbmUtYmxvY2snKVxuXG5cbiAgICBkMy5zZWxlY3QoJy5jaGFydC10aXRsZS1kaXYnKVxuICAgICAgLnN0KCd2aXNpYmlsaXR5JywndmlzaWJsZScpXG5cblxuICAgICRza2lsbERpZmZlcmVuY2VSZWN0c1xuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKDI1MClcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICRkZXZTa2lsbENpcmNsZXNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kZWxheSgoKT0+e1xuICAgICAgICBpZihyZXZlcnNlVHJhbnNpdGlvblRyaWdnZXJfX3R3b0pvYnNBbGxTa2lsbHM9PT10cnVlKXtyZXR1cm4gQ0lSQ0xFU19SRVZFUlNFX0ZBREVJTl9ERUxBWX1cbiAgICAgICAgZWxzZSB7cmV0dXJuIFRydWNrZXJEZXZlbG9wZXJzX3RyYW5zaXRpb25WZXJ0aWNhbF9kdXJhdGlvbn1cbiAgICAgIH0pXG4gICAgICAuZHVyYXRpb24oKGQsaSk9PntcbiAgICAgICAgaWYocmV2ZXJzZVRyYW5zaXRpb25UcmlnZ2VyX190d29Kb2JzQWxsU2tpbGxzPT09dHJ1ZSl7cmV0dXJuIENJUkNMRVNfUkVWRVJTRV9GQURFSU5fRFVSQVRJT059XG4gICAgICAgIGVsc2Uge3JldHVybiBpKlRJTUVfSU5URVJWQUx9XG4gICAgICB9KVxuICAgICAgLnN0KCdvcGFjaXR5JywxKVxuXG4gICAgJHRydWNrZXJTa2lsbENpcmNsZXNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kZWxheSgoKT0+e1xuICAgICAgICBpZihyZXZlcnNlVHJhbnNpdGlvblRyaWdnZXJfX3R3b0pvYnNBbGxTa2lsbHM9PT10cnVlKXtyZXR1cm4gQ0lSQ0xFU19SRVZFUlNFX0ZBREVJTl9ERUxBWX1cbiAgICAgICAgZWxzZSB7cmV0dXJuIFRydWNrZXJEZXZlbG9wZXJzX3RyYW5zaXRpb25WZXJ0aWNhbF9kdXJhdGlvbn1cbiAgICAgIH0pXG4gICAgICAuZHVyYXRpb24oKGQsaSk9PntcbiAgICAgICAgaWYocmV2ZXJzZVRyYW5zaXRpb25UcmlnZ2VyX190d29Kb2JzQWxsU2tpbGxzPT09dHJ1ZSl7cmV0dXJuIENJUkNMRVNfUkVWRVJTRV9GQURFSU5fRFVSQVRJT059XG4gICAgICAgIGVsc2Uge3JldHVybiBpKlRJTUVfSU5URVJWQUx9XG4gICAgICB9KVxuICAgICAgLnN0KCdvcGFjaXR5JywxKVxuXG4gICAgLy8gR2V0dGluZyByaWQgb2YgaW50cm8gYXhlc1xuICAgIC8vICR0cnVja2VyRGV2ZWxvcGVyWEF4aXNcbiAgICAgIC8vIC5zdCgnb3BhY2l0eScsMClcblxuICAgICRpbnRyb0pvYnNDaXJjbGVzXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAkZGV2U2tpbGxDaXJjbGVzLmF0KCdjeCcsKGQpPT4gc2NhbGVzT2JqZWN0LnhTY2FsZShkLmRldnMpKVxuICAgICAgLmF0KCdjeScsLTEpXG4gICAgICAuYXQoJ3InLDUpXG4gICAgICAub24oJ21vdXNlZW50ZXInKVxuXG4gICAgJHRydWNrZXJTa2lsbENpcmNsZXMuYXQoJ2N4JywoZCk9PnNjYWxlc09iamVjdC54U2NhbGUoZC50cnVja2VycykpXG4gICAgICAuYXQoJ2N5JywtMSlcbiAgICAgIC5hdCgncicsNSlcblxuICAgICRza2lsbFNlY3Rpb25zXG4gICAgICAuYXQoJ3RyYW5zZm9ybScsIChkLGkpPT57cmV0dXJuICd0cmFuc2xhdGUoJytKT0JfTEFCRUxfTUFSR0lOX0xFRlQrJywnKyAoQUxMX0pPQlNfU1RBUlRJTkdfWV9MT0NBVElPTisoaSpUV09fSk9CU19TS0lMTF9TUEFDSU5HKSkgKycpJ30pXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZGVsYXkoKCk9PntcbiAgICAgICAgaWYocmV2ZXJzZVRyYW5zaXRpb25UcmlnZ2VyX190d29Kb2JzQWxsU2tpbGxzPT09ZmFsc2Upe3JldHVybiBUcnVja2VyRGV2ZWxvcGVyc190cmFuc2l0aW9uVmVydGljYWxfZHVyYXRpb259XG4gICAgICAgIGVsc2Uge3JldHVybiAwfVxuICAgICAgfSlcbiAgICAgIC5kdXJhdGlvbigoZCxpKT0+e1xuICAgICAgICByZXR1cm4gaSpUSU1FX0lOVEVSVkFMXG4gICAgICB9KVxuICAgICAgLnN0KCdvcGFjaXR5JywxKVxuXG5cbiAgICAkc2tpbGxTZWN0aW9uc1RleHQudGV4dChkPT57XG4gICAgICBpZihpc01vYmlsZSl7cmV0dXJuIGQuc2tpbGxzLnNsaWNlKDAsMTIpKycuLi4nfVxuICAgICAgZWxzZXtyZXR1cm4gZC5za2lsbHN9XG4gICAgfSlcbiAgICAgIC5zdCgndGV4dC1hbmNob3InLCdyaWdodCcpXG4gICAgICAuc3QoJ29wYWNpdHknLChkLGkpPT57XG4gICAgICAgIGlmKGklMj09PTApe3JldHVybiAxfVxuICAgICAgICBlbHNle3JldHVybiAwLjF9XG4gICAgICB9KVxuXG4gICAgJGF4aXNMaW5lcy5hdCgneDEnLCgpPT5zY2FsZXNPYmplY3QueFNjYWxlKDApKVxuICAgICAgLmF0KCd5MScsLTEpXG4gICAgICAuYXQoJ3gyJywoKT0+c2NhbGVzT2JqZWN0LnhTY2FsZSgxMDApKVxuICAgICAgLmF0KCd5MicsLTEpXG4gICAgICAuYXQoJ3N0cm9rZS13aWR0aCcsIDEpXG4gICAgICAuc3QoJ3N0cm9rZScsJ2JsYWNrJylcbiAgICAgIC5zdCgnb3BhY2l0eScsKGQsaSk9PntcbiAgICAgICAgaWYgKGQuc2tpbGxzPT09XCJQcm9ncmFtbWluZ1wiKXtyZXR1cm4gMH1cbiAgICAgICAgZWxzZSByZXR1cm4gMVxuICAgICAgfSlcblxuICAgJHNraWxsU2VjdGlvbnNUZXh0QWxsSm9icy5hdCgndHJhbnNmb3JtJywndHJhbnNsYXRlKCcrSk9CX0xBQkVMX01BUkdJTl9MRUZUKycsMCknKVxuICAgICAgLnRleHQoZD0+ZC5rZXkucmVwbGFjZSgvXy9nLCcgJykpXG4gICAgICAuc3QoJ3RleHQtYW5jaG9yJywncmlnaHQnKVxuICAgICAgLnN0KCdvcGFjaXR5JywgMClcblxuXG4gICR0cnVja2VyRGV2ZWxvcGVyWEF4aXNcbiAgICAuc2VsZWN0QWxsKCcuaW50cm8teC1heGlzIC50aWNrIHRleHQnKVxuICAgIC5zdCgnZm9udC1zaXplJywnMTJweCcpXG4gICAgLnN0KCdvcGFjaXR5JywxKVxuICAgIC5hdCgneScsMClcblxuICAgIHJldmVyc2VUcmFuc2l0aW9uVHJpZ2dlcl9fdHdvSm9ic0FsbFNraWxscz10cnVlO1xuXG5cbiAgfVxuICBlbHNlIGlmKHN0ZXA9PT0naW1hZ2VzLXR3by1qb2JzLWhpZ2hsaWdodC1za2lsbC1kaWZmZXJlbmNlcycpe1xuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0KCdnLmxlZ2VuZF9fd2FnZXMnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG5cdFx0JGNoYXJ0U3ZnXG5cdFx0XHQuc2VsZWN0QWxsKCdnLmxlZ2VuZC1qb2ItbnVtYmVyJylcblx0XHRcdC5zdCgnb3BhY2l0eScsMClcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5hbm5vdGF0aW9uLWdyb3VwLXN0YWNrZWQnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLmFubm8tZ3JvdXAnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCd0ZXh0LmF4aXMtbGFiZWwnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLnRydWNrZXItZGV2ZWxvcGVyLWdyb3VwcycpXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAkY2hhcnRTdmcuc2VsZWN0QWxsKCdjaXJjbGUuam9iJylcbiAgICAgIC5jbGFzc2VkKCdpbnZpc2libGUnLHRydWUpXG5cbiAgICAkY2hhcnRTdmcuc2VsZWN0QWxsKCdjaXJjbGUuam9iJylcbiAgICAgIC5jbGFzc2VkKCdpbnZpc2libGUnLHRydWUpXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ2cuc2ltaWxhcml0eS1hbm5vdGF0aW9uJylcbiAgICAgIC5jbGFzc2VkKCdpbnZpc2libGUnLHRydWUpXG5cbiAgICAkdHJ1Y2tlckRldmVsb3BlclhBeGlzXG4gICAgICAuY2xhc3NlZCgnaW52aXNpYmxlJyxmYWxzZSlcblxuICAgICRleGFtcGxlU2tpbGxUaXRsZVxuICAgICAgLmNsYXNzZWQoJ2ludmlzaWJsZScsdHJ1ZSlcblxuICAgIGNvbnN0IFJFQ1RTX0ZBREVJTl9ERUxBWT0yNTBcbiAgICBjb25zdCBkZWxheVZhciA9IG51bU9mSm9icypUSU1FX0lOVEVSVkFMICogMC42XG5cbiAgICAkdHJ1Y2tlckRldmVsb3BlclhBeGlzXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZGVsYXkoZGVsYXlWYXIpXG4gICAgICAuc3QoJ29wYWNpdHknLDEpXG5cbiAgICBkMy5zZWxlY3RBbGwoJy5zZWNvbmRhcnktdGl0bGUtc3RhY2tpbmcnKVxuICAgICAgLnN0KCdkaXNwbGF5Jywnbm9uZScpXG5cbiAgICAkY2hhcnRUaXRsZV9tYWluXG4gICAgICAudGV4dCgnU2tpbGwgZGlmZmVyZW5jZXMgYmV0d2VlbiB0cnVja2VycyAmIGRldmVsb3BlcnMnKVxuXG5cbiAgICAvLyBjb25zdCBDSVJDTEVTX0ZBREVJTl9EVVJBVElPTj0zNTBcblxuICAgIC8vIEFDQ09VTlRJTkcgRk9SIFJFVkVSU0U6XG4gICAgLy8gUmVtb3ZpbmcgYW5ub3RhdGlvbnNcbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ2cuYW5ub3RhdGlvbi1ncm91cC1kaWZmZXJlbnQnKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLnN0KCd2aXNpYmlsaXR5JywnaGlkZGVuJylcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5hbm5vdGF0aW9uLWdyb3VwLXNpbWlsYXInKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLnN0KCd2aXNpYmlsaXR5JywnaGlkZGVuJylcblxuICAgICRza2lsbFNlY3Rpb25zXG4gICAgICAuc3QoJ29wYWNpdHknLDEpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZGVsYXkoICgpPT57XG4gICAgICAgIGlmIChyZXZlcnNlVHJhbnNpdGlvblRyaWdnZXJfX2hpZ2hsaWdodFNraWxsRGlmZmVyZW5jZXM9PT10cnVlKXtyZXR1cm4gZGVsYXlWYXJ9XG4gICAgICAgIGVsc2Uge3JldHVybiAwfVxuICAgICAgfSlcbiAgICAgIC8vIC5kdXJhdGlvbigyNTApXG4gICAgICAuYXQoJ3RyYW5zZm9ybScsIChkLGkpPT57cmV0dXJuICd0cmFuc2xhdGUoJytKT0JfTEFCRUxfTUFSR0lOX0xFRlQrJywnKyAoQUxMX0pPQlNfU1RBUlRJTkdfWV9MT0NBVElPTisoaSpUV09fSk9CU19TS0lMTF9TUEFDSU5HKSkgKycpJ30pO1xuXG4gICAgICAkc2tpbGxTZWN0aW9uc1RleHRcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZGVsYXkoICgpPT57XG4gICAgICAgICAgaWYgKHJldmVyc2VUcmFuc2l0aW9uVHJpZ2dlcl9faGlnaGxpZ2h0U2tpbGxEaWZmZXJlbmNlcz09PXRydWUpe3JldHVybiBkZWxheVZhcn1cbiAgICAgICAgICBlbHNlIHtyZXR1cm4gMH1cbiAgICAgICAgfSlcbiAgICAgICAgLnRleHQoZD0+e1xuICAgICAgICAgIGlmKGlzTW9iaWxlKXtyZXR1cm4gZC5za2lsbHMuc2xpY2UoMCwxMikrJy4uLid9XG4gICAgICAgICAgZWxzZXtyZXR1cm4gZC5za2lsbHN9XG4gICAgICAgIH0pXG4gICAgICAgIC5zdCgndGV4dC1hbmNob3InLCdyaWdodCcpXG4gICAgICAgIC8vIC5hdCgndHJhbnNmb3JtJywndHJhbnNsYXRlKCcrSk9CX0xBQkVMX01BUkdJTl9MRUZUKyAnLDApJylcbiAgICAgICAgLnN0KCdvcGFjaXR5JywoZCxpKT0+e1xuICAgICAgICAgIGlmKGklMj09PTApe3JldHVybiAxfVxuICAgICAgICAgIGVsc2V7cmV0dXJuIDAuMX1cbiAgICAgICAgfSlcbiAgICAgICAgLmF0KCd0cmFuc2Zvcm0nLCd0cmFuc2xhdGUoJyswKyAnLDApJylcblxuICAgICAgJGF4aXNMaW5lc1xuICAgICAgICAuYXQoJ3gxJywoKT0+c2NhbGVzT2JqZWN0LnhTY2FsZSgwKSlcbiAgICAgICAgLmF0KCd5MScsKC1ESUZGRVJFTkNFX1JFQ1RfSEVJR0hULzIpKVxuICAgICAgICAuYXQoJ3gyJywoKT0+c2NhbGVzT2JqZWN0LnhTY2FsZSgxMDApKVxuICAgICAgICAuYXQoJ3kyJywoLURJRkZFUkVOQ0VfUkVDVF9IRUlHSFQvMikpXG4gICAgICAgIC5hdCgnc3Ryb2tlLXdpZHRoJywgMSlcbiAgICAgICAgLnN0KCdzdHJva2UnLCdibGFjaycpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmRlbGF5KCAoKT0+e1xuICAgICAgICAgIGlmIChyZXZlcnNlVHJhbnNpdGlvblRyaWdnZXJfX2hpZ2hsaWdodFNraWxsRGlmZmVyZW5jZXM9PT10cnVlKXtyZXR1cm4gZGVsYXlWYXJ9XG4gICAgICAgICAgZWxzZSB7cmV0dXJuIDB9XG4gICAgICAgIH0pXG4gICAgICAgIC5zdCgnb3BhY2l0eScsKGQsaSk9PntcbiAgICAgICAgICBpZiAoZC5za2lsbHM9PT1cIlByb2dyYW1taW5nXCIpe3JldHVybiAwfVxuICAgICAgICAgIGVsc2UgcmV0dXJuIDFcbiAgICAgICAgfSlcblxuICAgICAkc2tpbGxTZWN0aW9uc1RleHRBbGxKb2JzXG4gICAgICAgIC50ZXh0KGQ9PmQua2V5LnJlcGxhY2UoL18vZywnICcpKVxuICAgICAgICAuc3QoJ3RleHQtYW5jaG9yJywncmlnaHQnKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigoZCxpKT0+e1xuICAgICAgICAgIHJldHVybiAobnVtT2ZKb2JzKlRJTUVfSU5URVJWQUwpIC0gaSpUSU1FX0lOVEVSVkFMO1xuICAgICAgICB9KVxuICAgICAgICAuc3QoJ29wYWNpdHknLCAwKVxuXG4gICAgJHNraWxsRGlmZmVyZW5jZVJlY3RzXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZGVsYXkoICgpPT57XG4gICAgICAgIGlmIChyZXZlcnNlVHJhbnNpdGlvblRyaWdnZXJfX2hpZ2hsaWdodFNraWxsRGlmZmVyZW5jZXM9PT10cnVlKXtyZXR1cm4gZGVsYXlWYXJ9XG4gICAgICAgIGVsc2Uge3JldHVybiBSRUNUU19GQURFSU5fREVMQVl9XG4gICAgICB9KVxuICAgICAgLmR1cmF0aW9uKDUwMClcbiAgICAgIC5zdCgnb3BhY2l0eScsMSlcbiAgICAgIC5hdCgneCcsIGQ9PntcbiAgICAgICAgaWYgKCtkLmRldnM+PStkLnRydWNrZXJzKXtcbiAgICAgICAgICByZXR1cm4gc2NhbGVzT2JqZWN0LnhTY2FsZSgrZC50cnVja2VycylcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgIHJldHVybiBzY2FsZXNPYmplY3QueFNjYWxlKCtkLmRldnMpXG4gICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIC5hdCgneScsICgtRElGRkVSRU5DRV9SRUNUX0hFSUdIVCkgKVxuICAgICAgLmF0KCd3aWR0aCcsZD0+e1xuICAgICAgICByZXR1cm4gc2NhbGVzT2JqZWN0LnhTY2FsZVJlY3RhbmdsZShkLmRpZmZlcmVuY2UpO1xuICAgICAgfSlcbiAgICAgIC5hdCgnaGVpZ2h0JywgRElGRkVSRU5DRV9SRUNUX0hFSUdIVClcbiAgICAgIC5hdCgndHJhbnNmb3JtJywndHJhbnNsYXRlKDAsMCknKVxuICAgICAgLnN0KCdmaWxsJywnI0U1MzBCRScpXG5cbiAgICAkZGV2U2tpbGxDaXJjbGVzXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAkdHJ1Y2tlclNraWxsQ2lyY2xlc1xuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJHNraWxsU2VjdGlvbnNBbGxKb2JzXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAvLyAuZGVsYXkobnVtT2ZKb2JzKlRJTUVfSU5URVJWQUwpXG4gICAgICAuZHVyYXRpb24oKGQsaSk9PntcbiAgICAgICAgcmV0dXJuIChudW1PZkpvYnMqVElNRV9JTlRFUlZBTCkgLSBpKlRJTUVfSU5URVJWQUw7XG4gICAgICB9KVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgcmV2ZXJzZVRyYW5zaXRpb25UcmlnZ2VyX19oaWdobGlnaHRTa2lsbERpZmZlcmVuY2VzID0gZmFsc2U7XG4gIH1cbiAgZWxzZSBpZihzdGVwPT09J2ltYWdlcy10d28tam9icy1zdGFja2VkLXNraWxscycpe1xuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLmFubm90YXRpb24tZ3JvdXAtc3RhY2tlZCcpXG4gICAgICAuc3QoJ29wYWNpdHknLDEpXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3QoJ2cubGVnZW5kX193YWdlcycpXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cblx0XHQkY2hhcnRTdmdcblx0XHRcdC5zZWxlY3RBbGwoJ2cubGVnZW5kLWpvYi1udW1iZXInKVxuXHRcdFx0LnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLmFubm8tZ3JvdXAnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCd0ZXh0LmF4aXMtbGFiZWwnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLnRydWNrZXItZGV2ZWxvcGVyLWdyb3VwcycpXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ2cuc2ltaWxhcml0eS1hbm5vdGF0aW9uJylcbiAgICAgIC5jbGFzc2VkKCdpbnZpc2libGUnLHRydWUpXG5cbiAgICAkdHJ1Y2tlckRldmVsb3BlclhBeGlzXG5cdFx0XHQuY2xhc3NlZCgnaW52aXNpYmxlJyxmYWxzZSlcblxuICAgICRleGFtcGxlU2tpbGxUaXRsZVxuICAgICAgLmNsYXNzZWQoJ2ludmlzaWJsZScsdHJ1ZSlcblxuICAgICR0cnVja2VyRGV2ZWxvcGVyWEF4aXNcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5zaW1pbGFyaXR5LWFubm90YXRpb24nKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgZDMuc2VsZWN0QWxsKCdzcGFuLnNlY29uZGFyeS10aXRsZS1yZW1haW5pbmcnKVxuICAgICAgLnN0KCdkaXNwbGF5Jywnbm9uZScpXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJy5heGlzLWxhYmVsJylcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICRjaGFydFN2Zy5zZWxlY3RBbGwoJ2NpcmNsZS5qb2InKVxuICAgICAgLmNsYXNzZWQoJ2ludmlzaWJsZScsdHJ1ZSlcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcbiAgICAgIC5vbignbW91c2VlbnRlcicsKCk9Pnt9KVxuXG5cbiAgICBkMy5zZWxlY3RBbGwoJ3NwYW4uc2Vjb25kYXJ5LXRpdGxlLXN0YWNraW5nJylcbiAgICAgIC5zdCgnZGlzcGxheScsJ25vbmUnKVxuXG4gICAgJGNoYXJ0VGl0bGVfbWFpblxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLnRleHQoXCJTa2lsbHMgZGlmZmVyZW5jZXMgYmV0d2VlbiB0cnVja2VycyAmIG90aGVyIGpvYnNcIilcblxuICAgIHJldmVyc2VUcmFuc2l0aW9uVHJpZ2dlcl9faGlnaGxpZ2h0U2tpbGxEaWZmZXJlbmNlcyA9IHRydWU7XG5cbiAgICAgIC8vIFJlbW92aW5nIGF4aXMgbGluZSB2aXNpYmlsaXR5IGluIGVhY2ggc2tpbGwgZ3JvdXAgZm9yIHRydWNrZXIvZGV2XG4gICAgJGF4aXNMaW5lc1xuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgLy8gUmVtb3ZpbmcgZGV2ZWxvcGVyIHNraWxsIGFuZCB0cnVja2VyIHNraWxsIGNpcmNsZXMgZnJvbSB2aWV3XG4gICAgJGRldlNraWxsQ2lyY2xlc1xuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJHRydWNrZXJTa2lsbENpcmNsZXNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuXG5cbiAgICAgLy8gQUNDT1VOVElORyBGT1IgUkVWRVJTRTpcbiAgICAgLy8gTW92aW5nIGpvYiBza2lsbCBncm91cHMgYmFjayB0byBhcHByb3ByaWF0ZSBwbGFjZVxuXG4gICAgIC8vIEFORFxuXG4gICAgIC8vIHdhaXRpbmcgNDUwbXMgYmVmb3JlIGZhZGluZyBlYWNoIGpvYidzIHNraWxsIGRpZmZlcmVuY2Ugc2VjdGlvbiwgZWFjaCBzbG93ZXIgdGhhbiB0aGUgbmV4dCBieSA1MG1zXG4gICAgJHNraWxsU2VjdGlvbnNBbGxKb2JzXG4gICAgICAuYXQoJ3RyYW5zZm9ybScsKGQsaSk9PntcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnKygzKkFMTF9KT0JTX1NUQVJUSU5HX1lfTE9DQVRJT04rIGkqQUxMX0pPQlNfSk9CX1NQQUNJTkcpKycpJ1xuICAgIH0pXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZGVsYXkoNDUwKVxuICAgICAgLmR1cmF0aW9uKChkLGkpPT5pKlRJTUVfSU5URVJWQUwpXG4gICAgICAuc3QoJ29wYWNpdHknLDEpXG5cbiAgICAvLyBXYWl0aW5nIDQ1MG1zIGJlZm9yZSBmYWRpbmcgZWFjaCBqb2IncyB0aXRsZSBpblxuICAgICRza2lsbFNlY3Rpb25zVGV4dEFsbEpvYnNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kZWxheSg0NTApXG4gICAgICAuc3QoJ29wYWNpdHknLDEpXG5cbiAgICAgIC8vIEFkZGluZyB0aXRsZSBvZiBcIkRldmVsb3BlclwiIHRvIHRoZSB0cnVja2VyL2RldiBza2lsbCBkaWZmZXJlbmNlIHJlY3RhbmdsZSBncm91cFxuICAgICRza2lsbFNlY3Rpb25zVGV4dFxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuICAgICAgLnRleHQoKGQsaSk9PiB7XG4gICAgICAgIGlmIChpPT09ZGV2QW5kVHJ1Y2tlclNraWxscy5sZW5ndGgtMSl7cmV0dXJuICdEZXZlbG9wZXJzJ31cbiAgICAgICAgZWxzZSByZXR1cm4gJydcbiAgICAgIH0pXG4gICAgICAvLyAuYXQoJ3RyYW5zZm9ybScsJ3RyYW5zbGF0ZSgnK0pPQl9MQUJFTF9NQVJHSU5fTEVGVCsgJywwKScpXG4gICAgICAuYXQoJ3RyYW5zZm9ybScsJ3RyYW5zbGF0ZSgnK0pPQl9MQUJFTF9NQVJHSU5fTEVGVCsgJywwKScpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuc3QoJ29wYWNpdHknLDEpXG5cbiAgLy8gVHJhbnNpdGlvbmluZyB0cnVja2VyL2RldiBza2lsbCBkaWZmZXJlbmNlIHJlY3RzIHRvIGFwcHJvcHJpYXRlIHBsYWNlXG5cbiAgICAkc2tpbGxEaWZmZXJlbmNlUmVjdHNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC8vIC5kZWxheSgxMDAwKVxuICAgICAgLmR1cmF0aW9uKFRSQU5TSVRJT05fRFVSQVRJT05fU0tJTExTX0RJRkZFUkVOQ0UpXG4gICAgICAuYXQoJ3gnLGQ9PiBzY2FsZXNPYmplY3QueFNjYWxlRXVjbGlkZWFuKGQueENvb3JkU3RhY2tlZCkpXG4gICAgICAuYXQoJ3dpZHRoJyxkPT4gc2NhbGVzT2JqZWN0LnhTY2FsZUV1Y2xpZGVhbihkLmRpZmZlcmVuY2UpKVxuICAgICAgLmF0KCd0cmFuc2Zvcm0nLChkLGkpPT57XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcrWEJVTVArJywwKSdcbiAgICAgIH0pXG4gICAgICAuYXQoJ2hlaWdodCcsRElGRkVSRU5DRV9SRUNUX0hFSUdIVClcblxuICAgIGNvbnN0IHlUcmFuc2Zvcm0gPSAzKkFMTF9KT0JTX1NUQVJUSU5HX1lfTE9DQVRJT04gLSBBTExfSk9CU19KT0JfU1BBQ0lOR1xuXG4gICAgJHNraWxsU2VjdGlvbnNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kZWxheSgoZCxpKT0+aSpKT0JfU1RBQ0tFRF9TS0lMTF9ERUxBWSlcbiAgICAgIC5zdCgnb3BhY2l0eScsMSlcbiAgICAgIC5hdCgndHJhbnNmb3JtJywoKT0+ICd0cmFuc2xhdGUoJyswKycsJysgeVRyYW5zZm9ybSArJyknKVxuXG4gICAgJHNraWxsRGlmZmVyZW5jZVJlY3RzXG4gICAgICAub24oJ21vdXNlZW50ZXInLCBkPT5jb25zb2xlLmxvZyhkLnNraWxscykpXG5cblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5hbm5vdGF0aW9uLWdyb3VwLWRpZmZlcmVudCcpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZGVsYXkoNDUwKVxuICAgICAgLnN0KCd2aXNpYmlsaXR5JywndmlzaWJsZScpXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ2cuYW5ub3RhdGlvbi1ncm91cC1zaW1pbGFyJylcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kZWxheSg0NTApXG4gICAgICAuc3QoJ3Zpc2liaWxpdHknLCd2aXNpYmxlJylcblxuICB9XG5cbn1cblxuZnVuY3Rpb24gcG9wdWxhdGVSYXdTa2lsbHMoYWxsSm9iU2tpbGxzUmF3LCByZXNwb25zZSl7XG4gIC8vIE5vdGU6IGk9MSBoZXJlIHRvIGV4Y2x1ZGUgZmlyc3QgZW50cnkgaW4gZGF0YSBsb2FkZWQsIHdoaWNoIHJlcHJlbnNlbnRzIGRldnMgY29tcGFyaXNvblxuICAgIGxldCBpO1xuICAgIGZvciAoaT0xO2k8cmVzcG9uc2UubGVuZ3RoO2krKyl7XG4gICAgICBhbGxKb2JTa2lsbHNSYXcucHVzaChyZXNwb25zZVtpXSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpPT57XG5cbiAgICBkMy5sb2FkRGF0YSguLi5maWxlcywoZXJyLHJlc3BvbnNlKT0+e1xuICAgICAgaWYoZXJyKSByZWplY3QoKVxuICAgICAgZWxzZXtcbiAgICAgIGRldkFuZFRydWNrZXJTa2lsbHMgPSByZXNwb25zZVswXTtcbiAgICAgIGxldCBhbGxKb2JTa2lsbHNSYXcgPSBbXVxuXG4gICAgICBwb3B1bGF0ZVJhd1NraWxscyhhbGxKb2JTa2lsbHNSYXcsIHJlc3BvbnNlKVxuXG4gICAgICByZXNpemUoKVxuICAgICAgc2V0dXBEYXRhKGRldkFuZFRydWNrZXJTa2lsbHMsYWxsSm9iU2tpbGxzUmF3KVxuICAgICAgc2V0dXBTY2FsZXMoKVxuICAgICAgc2V0dXBET01FbGVtZW50cyhkZXZBbmRUcnVja2VyU2tpbGxzKVxuICAgICAgaWYoaXNNb2JpbGUpe31cbiAgICAgIGVsc2V7c2V0dXBBbm5vdGF0aW9ucygpfVxuICAgICAgcmVzb2x2ZSgpXG4gICAgICB9XG4gICAgfSlcblxuICB9KVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IHtpbml0LCB1cGRhdGVTdGVwfVxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBTUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBSUE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQVBBO0FBUUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQVhBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUVBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQVBBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFFQTtBQUZBO0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar truckersDevelopers = [{ 'job': 'Truckers',\n  'automatability': 0.79,\n  'skillDeveloperScore': 3,\n  'skillDeveloperName': 'Programming',\n  'fill': 'blue',\n  'skillTruckerScore': 72,\n  'skillTruckerName': 'Multilimb Coordination' }, { 'job': 'Developers',\n  'automatability': 0.04,\n  'skillDeveloperScore': 75,\n  'skillDeveloperName': 'Programming',\n  'fill': 'magenta',\n  'skillTruckerScore': 0,\n  'skillTruckerName': 'Multilimb Coordination' }, { 'job': 'Teachers',\n  'automatability': 0,\n  'skillDeveloperScore': '',\n  'skillDeveloperName': '',\n  'fill': '',\n  'skillTruckerScore': '',\n  'skillTruckerName': '' }, { 'job': 'Telemarketers',\n  'automatability': 1,\n  'skillDeveloperScore': '',\n  'skillDeveloperName': '',\n  'fill': '',\n  'skillTruckerScore': '',\n  'skillTruckerName': '' }];\n\nvar isMobile = null;\n\nvar svgWidth = null;\nvar svgHeight = null;\n\nvar widthPercentage = null;\nvar heightPercentage = null;\n\nvar $chartContainer = d3.select(\"body\").select(\"figure.svg-container\");\n\nvar $chartSvg = $chartContainer.select(\"svg.scatter\");\n\nvar MIN_AUTOMATION = 0;\nvar MAX_AUTOMATION = 1;\nvar CIRCLE_RADIUS = 20;\nvar INIT_X_AXIS_PLACEMENT = 50;\n\nvar DIFFERENCE_RECT_HEIGHT = 3;\n\nvar viewportWidth = null;\nvar viewportHeight = null;\n\nvar yAxisLabelMin = null;\nvar truckerDeveloperYAxis = null;\nvar introYAxisLocation = null;\nvar scalesObject = {};\n\nvar yMaxScaleValue = null;\nvar xMaxScaleValue = null;\nvar truckerDeveloperXAxisFunction = null;\n\nvar xPadding = null;\nvar yPadding = null;\n\nvar $jobCircles = null;\nvar jobsGroups = null;\n// let $automatability_LABEL = null;\nvar $truckerDeveloperXAxis = null;\nvar jobsName_LABELS = null;\nvar jobNameLabel_margin_x = null;\nvar jobCircle_margin_x = null;\nvar jobNameLabel_margin_y = null;\n\nvar $exampleSkillTitle = null;\n\nvar reverseTransitionTrigger__twoJobstwoSkillsDevelopers = false;\n//\n// let annoConnector=\"arrow\";\n// const thisAnno = [\n//   {\n// \t\tnote: {\n// \t\t\tlabel:'annoText',\n// \t\t\ttitle:'annoTitle',\n// \t\t\twrap:150,\n// \t\t\talign:\"middle\",\n// \t\t\t},\n// \t\t\tconnector:{\n// \t\t\t\tend:annoConnector\n// \t\t\t},\n// \t\t\tx:100,\n// \t\t\ty:100,\n// \t\t\tdx:30,\n// \t\t\tdy:-30\n// \t\t}\n//   ];\n//\n//\n// const makeThis = d3.annotation()\n// \t\t\t.type(d3.annotationLabel)\n// \t\t\t.annotations(thisAnno)\n// \t\t\t.editMode(true)\n//\n// $chartSvg.append(\"g\")\n// \t\t\t.attr(\"transform\",\"translate(\"+100+\",\"+100+\")\")\n// \t\t\t.attr(\"class\",\"annotation-group\")\n// \t\t\t.call(makeThis)\n\n\nfunction setupCirclePatterns(data) {\n\n  var $defs = $chartSvg.append('defs');\n  var patternsJoin = $defs.selectAll('pattern').data(data).enter();\n\n  var $patterns = patternsJoin.append('pattern').at(\"width\", 2 * CIRCLE_RADIUS).at(\"height\", 2 * CIRCLE_RADIUS).at('id', function (d) {\n    var jobNameNoSpaces = d.job.replace(/ /g, '_');\n    return jobNameNoSpaces + '-img';\n  });\n\n  var $patternsImages = $patterns.append('image').at(\"width\", 2 * CIRCLE_RADIUS).at(\"height\", 2 * CIRCLE_RADIUS).at(\"x\", 0).at(\"y\", 0).at(\"xlink:href\", function (d) {\n    var jobNameNoSpaces = d.job.replace(/ /g, '_');\n    return 'assets/data/circle-images/' + jobNameNoSpaces + '.png';\n  });\n}\n\nfunction resize() {\n  svgWidth = $chartSvg.at('width');\n  svgHeight = $chartSvg.at('height');\n\n  // console.log($chartSvg.at('width'));\n\n  // console.log($('figure').height());\n\n  viewportWidth = window.innerWidth;\n  viewportHeight = window.innerHeight;\n\n  isMobile = viewportWidth < 700 ? true : false;\n\n  widthPercentage = 0.9;\n  heightPercentage = 0.8;\n\n  // console.log(\"resize!\");\n}\n\nfunction setupScales() {\n\n  var heightMiscElDiv = document.getElementById('misc-chart-elements-container').offsetHeight;\n  var svgMaxSize = viewportHeight - heightMiscElDiv;\n\n  yMaxScaleValue = svgMaxSize * heightPercentage;\n  xMaxScaleValue = svgWidth * widthPercentage;\n\n  xPadding = (1 - widthPercentage) * svgWidth;\n  yPadding = (1 - heightPercentage) * svgHeight;\n\n  scalesObject.yScale = d3.scaleLinear().domain([MIN_AUTOMATION, MAX_AUTOMATION]).range([0 + yPadding, yMaxScaleValue]);\n\n  scalesObject.xScale = d3.scaleLinear().domain([0, 100]).range([0 + xPadding, xMaxScaleValue]);\n\n  if (isMobile) {\n    introYAxisLocation = svgWidth / 2;\n  } else {\n    introYAxisLocation = svgWidth / 2;\n  }\n}\n\nfunction setupAxes() {\n\n  var formatPercent = d3.format(\".0%\");\n  var formatPercentv2 = d3.format(\"d\");\n\n  var truckerDeveloperYAxisFunction = d3.axisLeft(scalesObject.yScale).ticks(1).tickFormat(formatPercent);\n  var truckerDeveloperXAxisFunction = d3.axisTop(scalesObject.xScale).ticks(1).tickFormat(formatPercentv2);\n\n  var HORIZONTAL_BUMP = introYAxisLocation;\n  var middleCoord = scalesObject.yScale(0.5);\n\n  truckerDeveloperYAxis = $chartSvg.append(\"g.intro-y-axis\").attr(\"transform\", \"translate(\" + HORIZONTAL_BUMP + \",0)\").call(truckerDeveloperYAxisFunction).style('opacity', 1);\n\n  $truckerDeveloperXAxis = $chartSvg.append(\"g.intro-x-axis\").attr(\"transform\", \"translate(\" + 0 + \",\" + middleCoord + \")\").call(truckerDeveloperXAxisFunction).style('opacity', 0);\n\n  $truckerDeveloperXAxis.select('path.domain').at('transform', 'translate(0,' + -DIFFERENCE_RECT_HEIGHT / 2 + ')');\n\n  yAxisLabelMin = $chartSvg.append('text.y-axis-label.min').at('x', introYAxisLocation).at('y', yPadding / 2).st('fill', '#2F80ED').st('text-anchor', 'middle').text('SAFE JOBS');\n\n  var yAxisTitleBackground = $chartSvg.append('text.y-axis-label.title-background').at('transform', 'translate(' + introYAxisLocation * 1.01 + ',' + svgHeight / 2 + ') rotate(270)').st('stroke', '#FFFFFF').st('stroke-width', 11).st('text-anchor', 'middle').text('AUTOMATION LIKELIHOOD %');\n\n  var yAxisTitle = $chartSvg.append('text.y-axis-label.title').at('transform', 'translate(' + introYAxisLocation * 1.01 + ',' + svgHeight / 2 + ') rotate(270)').st('fill', '#6f6f6f').st('text-anchor', 'middle').text('AUTOMATION LIKELIHOOD %');\n\n  var yAxisLabelMax = $chartSvg.append('text.y-axis-label.max').at('x', introYAxisLocation).at('y', yMaxScaleValue + yPadding / 2).st('fill', '#EB5757').st('text-anchor', 'middle').text('ENDANGERED JOBS');\n}\n\nfunction setupDOMElements() {\n\n  setupAxes();\n\n  var exampleTitleCoord = scalesObject.yScale(0.35);\n\n  $exampleSkillTitle = $chartSvg.append('text.example-skill-title').at('x', introYAxisLocation).at('y', exampleTitleCoord).text('Importance of skill: programming');\n  // .st('text-anchor','middle')\n\n  var truckerDeveloperJoin = $chartSvg.selectAll('circle.jobs-circles').data(truckersDevelopers).enter();\n\n  jobsGroups = truckerDeveloperJoin.append('g.trucker-developer-groups');\n\n  $jobCircles = jobsGroups.append('circle.intro-jobs-circles');\n  var jobsAutomatability_LABELS = jobsGroups.append('text.intro-automatability-values');\n  jobsName_LABELS = jobsGroups.append('text.intro-job-names');\n  var jobsSkills_LABELS = jobsGroups.append('text.intro-job-skill-values');\n\n  // $automatability_LABEL = $chartSvg.append('text.automatability-label')\n  // adding element text labels\n\n  jobsAutomatability_LABELS.text(function (d) {\n    return d.automatability * 100 + \"%\";\n  });\n  jobsName_LABELS.text(function (d) {\n    return d.job;\n  });\n  jobsSkills_LABELS.text(function (d) {\n    return d.skillTruckerScore;\n  });\n  // $automatability_LABEL.text('automation likelihood')\n\n  //setting initial opacity\n  jobsGroups.at('transform', function (d) {\n    return 'translate(' + introYAxisLocation + ',' + +scalesObject.yScale(d.automatability) + ')';\n  }).style('opacity', function (d) {\n    if (d.job === \"Teachers\" || d.job === \"Telemarketers\") {\n      return 1;\n    } else {\n      return 0;\n    }\n  });\n\n  jobsSkills_LABELS.style('opacity', 0);\n\n  // INITIAL ELEMENT POSITIONING AND OPACITY SETTING\n\n  jobCircle_margin_x = CIRCLE_RADIUS * 2;\n  jobNameLabel_margin_x = CIRCLE_RADIUS * 4;\n  jobNameLabel_margin_y = jobCircle_margin_x / 10;\n\n  $jobCircles.at('cx', jobCircle_margin_x).at('r', CIRCLE_RADIUS)\n  // .style('opacity',d=>d.job === 'Developers'? 0 : 1)\n  .st('fill', '#2F80ED').st('fill', function (d) {\n    var jobNameNoSpaces = d.job.replace(/ /g, '_');\n    return 'url(#' + jobNameNoSpaces + '-img)';\n  });\n\n  jobsName_LABELS.at('x', jobNameLabel_margin_x).at('y', jobNameLabel_margin_y).st('text-anchor', 'right');\n\n  jobsAutomatability_LABELS.at('x', -jobCircle_margin_x).at('y', jobNameLabel_margin_y).st('text-anchor', 'left');\n\n  truckerDeveloperXAxisFunction = d3.axisTop(scalesObject.xScale).ticks(1).tickFormat(function (d) {\n    return d + '%';\n  });\n}\n\nfunction updateStep(step) {\n  if (step === 'all-automation') {\n    jobsGroups.transition().style('opacity', function (d) {\n      return d.job === 'Truckers' || d.job === 'Developers' ? 0 : 1;\n    }).at('transform', function (d) {\n      return 'translate(' + introYAxisLocation + ',' + +scalesObject.yScale(d.automatability) + ')';\n    });\n\n    $chartSvg.select('g.intro-y-axis').selectAll('g.tick').selectAll('text').transition().style('opacity', '0');\n  } else if (step === 'main-job-circle') {\n\n    $chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n    $chartSvg.selectAll('text.axis-label').st('opacity', 0);\n\n    jobsGroups.transition().style('opacity', function (d) {\n      return d.job === 'Truckers' ? 1 : 0;\n    }).at('transform', function (d) {\n      return 'translate(' + introYAxisLocation + ',' + +scalesObject.yScale(d.automatability) + ')';\n    });\n\n    $chartSvg.select('g.intro-y-axis').selectAll('g.tick').selectAll('text').transition().style('opacity', '1');\n  } else if (step === 'main-job-automation') {\n\n    $chartSvg.select('g.legend__wages').st('opacity', 0);\n\n    $chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n    $chartSvg.selectAll('text.axis-label').st('opacity', 0);\n\n    $chartSvg.selectAll('g.all-jobs').st('opacity', 0);\n\n    $chartSvg.selectAll('g.bisecting-automation-group').st('opacity', 0);\n\n    $chartSvg.selectAll('g.similarity-annotation').st('opacity', 0);\n\n    $chartSvg.selectAll('g.skill-section__two-jobs').st('opacity', 0);\n\n    $chartSvg.selectAll('g.scatter-y-axis').st('opacity', 0);\n\n    $exampleSkillTitle.transition().style('opacity', 0);\n\n    jobsName_LABELS.at('x', jobNameLabel_margin_x).at('y', jobNameLabel_margin_y).st('text-anchor', 'right');\n\n    $chartSvg.selectAll('text.y-axis-label').transition().style('opacity', 1);\n\n    $chartSvg.selectAll('.intro-automatability-values').transition().style('opacity', 1);\n\n    $truckerDeveloperXAxis.transition().style('opacity', 0);\n\n    $chartSvg.st('display', 'block');\n    truckerDeveloperYAxis.style('opacity', 1);\n\n    jobsGroups.transition().style('opacity', function (d) {\n      return d.job === 'Truckers' || d.job === 'Developers' ? 1 : 0;\n    }).at('transform', function (d) {\n      return 'translate(' + introYAxisLocation + ',' + +scalesObject.yScale(d.automatability) + ')';\n    });\n\n    $chartContainer.select('img.images-two-jobs-two-skills').st('display', 'none');\n\n    reverseTransitionTrigger__twoJobstwoSkillsDevelopers = false;\n  } else if (step === 'images-two-jobs-two-skills-developers') {\n\n    $chartSvg.select('g.legend__wages').st('opacity', 0);\n\n    $chartSvg.selectAll('g.anno-group').st('opacity', 0);\n\n    $chartSvg.selectAll('text.axis-label').st('opacity', 0);\n\n    $chartSvg.selectAll('g.all-jobs').st('opacity', 0);\n\n    $chartSvg.selectAll('g.similarity-annotation').st('opacity', 0);\n\n    $chartSvg.selectAll('g.scatter-y-axis').st('opacity', 0);\n\n    $chartSvg.selectAll('g.skill-section__two-jobs').st('opacity', 0);\n\n    $chartSvg.selectAll('g.bisecting-automation-group').st('opacity', 0);\n\n    var numSkills = $chartSvg.selectAll('g.skill-section__two-jobs').size();\n\n    var TIME_INTERVAL = 15;\n    var skillTitle_transitionReturn_delay = 800;\n\n    $exampleSkillTitle.classed('invisible', false).transition().delay(function () {\n      if (reverseTransitionTrigger__twoJobstwoSkillsDevelopers === true) {\n        return skillTitle_transitionReturn_delay;\n      } else {\n        return 0;\n      }\n    }).style('opacity', 1);\n\n    d3.select('.chart-title-div').transition().st('visibility', 'hidden');\n\n    $chartSvg.selectAll('g.trucker-developer-groups').classed('invisible', false);\n\n    jobsName_LABELS.at('x', 0).at('y', jobCircle_margin_x).st('text-anchor', 'start');\n\n    $chartSvg.selectAll('.skill-section__two-jobs').transition().duration(function (d, i) {\n      if (reverseTransitionTrigger__twoJobstwoSkillsDevelopers === true) {\n        return numSkills * TIME_INTERVAL - i * TIME_INTERVAL;\n      } else {\n        return 250;\n      }\n    }).style('opacity', 0);\n\n    var middleCoord = scalesObject.yScale(0.5);\n\n    $chartSvg.selectAll('text.y-axis-label').transition().style('opacity', 0);\n\n    $chartSvg.selectAll('.intro-automatability-values').transition().style('opacity', 0);\n\n    var formatPercentv2 = d3.format(\"d\");\n\n    var TruckerDevelopers_transitionVertical_duration = 400;\n\n    $truckerDeveloperXAxis.transition().delay(function () {\n      if (reverseTransitionTrigger__twoJobstwoSkillsDevelopers === true) {\n        return TruckerDevelopers_transitionVertical_duration;\n      } else {\n        return 0;\n      }\n    }).duration(TruckerDevelopers_transitionVertical_duration).call(truckerDeveloperXAxisFunction).style('opacity', 1).at('transform', function () {\n      return 'translate(0,' + middleCoord + ')';\n    });\n\n    $truckerDeveloperXAxis.selectAll('.intro-x-axis .tick text').at('y', 0);\n\n    // console.log(\"BUMP: \" + ticksYBump);\n\n\n    $truckerDeveloperXAxis.selectAll('g.tick').selectAll('text').transition().st('text-anchor', function (d, i) {\n      if (d === 0) {\n        return 'end';\n      } else return 'start';\n    }).at('y', function () {\n      return 0;\n    }).at('x', function (d, i) {\n      if (d === 0) {\n        return -2;\n      } else return 2;\n    })\n    // .attr(\"transform\", `translate(0,${-ticksYBump})`)\n    .at('y', 0).st('font-size', function () {\n      if (isMobile) {\n        return 12;\n      } else {\n        return 16;\n      }\n    });\n\n    truckerDeveloperYAxis.transition().style('opacity', 0);\n\n    jobsGroups.transition().delay(function () {\n      if (reverseTransitionTrigger__twoJobstwoSkillsDevelopers === true) {\n        return skillTitle_transitionReturn_delay;\n      } else {\n        return 0;\n      }\n    })\n    // .duration(1000)\n    .at('transform', function (d) {\n      return 'translate(' + scalesObject.xScale(d.skillDeveloperScore) + ',' + middleCoord + ')';\n    }).style('opacity', function (d) {\n      return d.job === 'Truckers' || d.job === 'Developers' ? 1 : 0;\n    });\n\n    $chartSvg.selectAll('g.skill-section').transition().style('opacity', 0);\n\n    reverseTransitionTrigger__twoJobstwoSkillsDevelopers = true;\n  } else if (step === 'images-two-jobs-two-skills') {\n\n    $chartSvg.selectAll('g.all-jobs').st('opacity', 0);\n\n    $chartSvg.selectAll('g.similarity-annotation').st('opacity', 0);\n\n    $chartSvg.selectAll('g.scatter-y-axis').st('opacity', 0);\n\n    $chartSvg.selectAll('g.skill-section__two-jobs').st('opacity', 0);\n\n    $chartSvg.selectAll('g.bisecting-automation-group').st('opacity', 0);\n\n    var _middleCoord = scalesObject.yScale(0.5);\n\n    $chartSvg.selectAll('text.y-axis-label').transition().style('opacity', 0);\n\n    $chartSvg.selectAll('.intro-automatability-values').transition().style('opacity', 0);\n\n    $truckerDeveloperXAxis.transition().style('opacity', 1).at('transform', function () {\n      return 'translate(0,' + _middleCoord + ')';\n    });\n\n    truckerDeveloperYAxis.transition().style('opacity', 0);\n\n    jobsGroups.transition().at('transform', function (d) {\n      return 'translate(' + scalesObject.xScale(d.skillTruckerScore) + ',' + _middleCoord + ')';\n    });\n  } else if (step === 'images-two-jobs-many-skills') {\n\n    $chartSvg.selectAll('g.similarity-annotation').st('opacity', 0);\n\n    $chartSvg.selectAll('g.similarity-annotation').classed('invisible', true);\n\n    $chartContainer.select('img.images-two-jobs-two-skills').st('display', 'none');\n\n    $chartContainer.select('img.images-two-jobs-stacked-skills').st('display', 'none');\n\n    var $staticImageDiv = $chartContainer.select('img.images-two-jobs-many-skills');\n\n    $staticImageDiv.st('display', 'block').st('visibility', 'visible');\n  } else if (step === 'images-two-jobs-all-skills') {\n    reverseTransitionTrigger__twoJobstwoSkillsDevelopers = true;\n  }\n}\n\nfunction init() {\n\n  return new Promise(function (resolve, reject) {\n\n    setupCirclePatterns(truckersDevelopers);\n    resize();\n    setupScales();\n    setupDOMElements();\n\n    resolve();\n  });\n}\n\nexports.default = { init: init, updateStep: updateStep };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdHJ1Y2tlcnNBbmREZXZzLmpzPzU0ODkiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdHJ1Y2tlcnNEZXZlbG9wZXJzID0gW1xuIHsnam9iJzonVHJ1Y2tlcnMnLFxuICAgJ2F1dG9tYXRhYmlsaXR5JzowLjc5LFxuICAgJ3NraWxsRGV2ZWxvcGVyU2NvcmUnOjMsXG4gICAnc2tpbGxEZXZlbG9wZXJOYW1lJzonUHJvZ3JhbW1pbmcnLFxuICAgJ2ZpbGwnOidibHVlJyxcbiAgICdza2lsbFRydWNrZXJTY29yZSc6NzIsXG4gICAnc2tpbGxUcnVja2VyTmFtZSc6J011bHRpbGltYiBDb29yZGluYXRpb24nfSxcbiB7J2pvYic6J0RldmVsb3BlcnMnLFxuICAnYXV0b21hdGFiaWxpdHknOjAuMDQsXG4gICdza2lsbERldmVsb3BlclNjb3JlJzo3NSxcbiAgJ3NraWxsRGV2ZWxvcGVyTmFtZSc6J1Byb2dyYW1taW5nJyxcbiAgJ2ZpbGwnOidtYWdlbnRhJyxcbiAgJ3NraWxsVHJ1Y2tlclNjb3JlJzowLFxuICAnc2tpbGxUcnVja2VyTmFtZSc6J011bHRpbGltYiBDb29yZGluYXRpb24nfSxcbiB7J2pvYic6J1RlYWNoZXJzJyxcbiAgJ2F1dG9tYXRhYmlsaXR5JzowLFxuICAnc2tpbGxEZXZlbG9wZXJTY29yZSc6JycsXG4gICdza2lsbERldmVsb3Blck5hbWUnOicnLFxuICAnZmlsbCc6JycsXG4gICdza2lsbFRydWNrZXJTY29yZSc6JycsXG4gICdza2lsbFRydWNrZXJOYW1lJzonJ30sXG4gIHsnam9iJzonVGVsZW1hcmtldGVycycsXG4gICdhdXRvbWF0YWJpbGl0eSc6MSxcbiAgJ3NraWxsRGV2ZWxvcGVyU2NvcmUnOicnLFxuICAnc2tpbGxEZXZlbG9wZXJOYW1lJzonJyxcbiAgJ2ZpbGwnOicnLFxuICAnc2tpbGxUcnVja2VyU2NvcmUnOicnLFxuICAnc2tpbGxUcnVja2VyTmFtZSc6Jyd9XG5dXG5cblxubGV0IGlzTW9iaWxlID0gbnVsbDtcblxubGV0IHN2Z1dpZHRoID0gbnVsbDtcbmxldCBzdmdIZWlnaHQgPSBudWxsO1xuXG5sZXQgd2lkdGhQZXJjZW50YWdlICA9IG51bGw7XG5sZXQgaGVpZ2h0UGVyY2VudGFnZSA9IG51bGw7XG5cbmNvbnN0ICRjaGFydENvbnRhaW5lciA9IGQzLnNlbGVjdChcImJvZHlcIilcbiAgLnNlbGVjdChcImZpZ3VyZS5zdmctY29udGFpbmVyXCIpXG5cbmNvbnN0ICRjaGFydFN2ZyA9ICRjaGFydENvbnRhaW5lclxuICAuc2VsZWN0KFwic3ZnLnNjYXR0ZXJcIilcblxuY29uc3QgTUlOX0FVVE9NQVRJT04gPSAwXG5jb25zdCBNQVhfQVVUT01BVElPTiA9IDFcbmNvbnN0IENJUkNMRV9SQURJVVMgPSAyMDtcbmNvbnN0IElOSVRfWF9BWElTX1BMQUNFTUVOVCA9IDUwO1xuXG5jb25zdCBESUZGRVJFTkNFX1JFQ1RfSEVJR0hUID0gMztcblxubGV0IHZpZXdwb3J0V2lkdGggPSAgbnVsbDtcbmxldCB2aWV3cG9ydEhlaWdodCA9IG51bGw7XG5cbmxldCB5QXhpc0xhYmVsTWluID0gbnVsbDtcbmxldCB0cnVja2VyRGV2ZWxvcGVyWUF4aXMgPSBudWxsO1xubGV0IGludHJvWUF4aXNMb2NhdGlvbiA9IG51bGw7XG5sZXQgc2NhbGVzT2JqZWN0ID0ge31cblxubGV0IHlNYXhTY2FsZVZhbHVlID0gbnVsbDtcbmxldCB4TWF4U2NhbGVWYWx1ZSA9IG51bGw7XG5sZXQgdHJ1Y2tlckRldmVsb3BlclhBeGlzRnVuY3Rpb24gPSBudWxsO1xuXG5sZXQgeFBhZGRpbmcgPSBudWxsO1xubGV0IHlQYWRkaW5nID0gbnVsbDtcblxubGV0ICRqb2JDaXJjbGVzID0gbnVsbDtcbmxldCBqb2JzR3JvdXBzID0gbnVsbDtcbi8vIGxldCAkYXV0b21hdGFiaWxpdHlfTEFCRUwgPSBudWxsO1xubGV0ICR0cnVja2VyRGV2ZWxvcGVyWEF4aXMgPSBudWxsO1xubGV0IGpvYnNOYW1lX0xBQkVMUyA9IG51bGw7XG5sZXQgam9iTmFtZUxhYmVsX21hcmdpbl94ID0gbnVsbDtcbmxldCBqb2JDaXJjbGVfbWFyZ2luX3ggPSBudWxsO1xubGV0IGpvYk5hbWVMYWJlbF9tYXJnaW5feSA9IG51bGw7XG5cbmxldCAkZXhhbXBsZVNraWxsVGl0bGUgPSBudWxsO1xuXG5sZXQgcmV2ZXJzZVRyYW5zaXRpb25UcmlnZ2VyX190d29Kb2JzdHdvU2tpbGxzRGV2ZWxvcGVycyA9IGZhbHNlO1xuLy9cbi8vIGxldCBhbm5vQ29ubmVjdG9yPVwiYXJyb3dcIjtcbi8vIGNvbnN0IHRoaXNBbm5vID0gW1xuLy8gICB7XG4vLyBcdFx0bm90ZToge1xuLy8gXHRcdFx0bGFiZWw6J2Fubm9UZXh0Jyxcbi8vIFx0XHRcdHRpdGxlOidhbm5vVGl0bGUnLFxuLy8gXHRcdFx0d3JhcDoxNTAsXG4vLyBcdFx0XHRhbGlnbjpcIm1pZGRsZVwiLFxuLy8gXHRcdFx0fSxcbi8vIFx0XHRcdGNvbm5lY3Rvcjp7XG4vLyBcdFx0XHRcdGVuZDphbm5vQ29ubmVjdG9yXG4vLyBcdFx0XHR9LFxuLy8gXHRcdFx0eDoxMDAsXG4vLyBcdFx0XHR5OjEwMCxcbi8vIFx0XHRcdGR4OjMwLFxuLy8gXHRcdFx0ZHk6LTMwXG4vLyBcdFx0fVxuLy8gICBdO1xuLy9cbi8vXG4vLyBjb25zdCBtYWtlVGhpcyA9IGQzLmFubm90YXRpb24oKVxuLy8gXHRcdFx0LnR5cGUoZDMuYW5ub3RhdGlvbkxhYmVsKVxuLy8gXHRcdFx0LmFubm90YXRpb25zKHRoaXNBbm5vKVxuLy8gXHRcdFx0LmVkaXRNb2RlKHRydWUpXG4vL1xuLy8gJGNoYXJ0U3ZnLmFwcGVuZChcImdcIilcbi8vIFx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoXCIrMTAwK1wiLFwiKzEwMCtcIilcIilcbi8vIFx0XHRcdC5hdHRyKFwiY2xhc3NcIixcImFubm90YXRpb24tZ3JvdXBcIilcbi8vIFx0XHRcdC5jYWxsKG1ha2VUaGlzKVxuXG5cbmZ1bmN0aW9uIHNldHVwQ2lyY2xlUGF0dGVybnMoZGF0YSl7XG5cbiAgY29uc3QgJGRlZnMgPSAkY2hhcnRTdmcuYXBwZW5kKCdkZWZzJyk7XG4gIGNvbnN0IHBhdHRlcm5zSm9pbiA9ICRkZWZzXG4gICAgLnNlbGVjdEFsbCgncGF0dGVybicpXG4gICAgLmRhdGEoZGF0YSlcbiAgICAuZW50ZXIoKVxuXG4gIGNvbnN0ICRwYXR0ZXJucyA9IHBhdHRlcm5zSm9pblxuICAgIC5hcHBlbmQoJ3BhdHRlcm4nKVxuICAgIC5hdChcIndpZHRoXCIsIDIqQ0lSQ0xFX1JBRElVUylcbiAgICAuYXQoXCJoZWlnaHRcIiwgMipDSVJDTEVfUkFESVVTKVxuICAgIC5hdCgnaWQnLGQ9PntcbiAgICAgIGNvbnN0IGpvYk5hbWVOb1NwYWNlcyA9IGQuam9iLnJlcGxhY2UoLyAvZywgJ18nKVxuICAgICAgcmV0dXJuIGpvYk5hbWVOb1NwYWNlcysnLWltZydcbiAgICB9KVxuXG4gIGNvbnN0ICRwYXR0ZXJuc0ltYWdlcz0kcGF0dGVybnNcbiAgICAuYXBwZW5kKCdpbWFnZScpXG4gICAgLmF0KFwid2lkdGhcIiwgMipDSVJDTEVfUkFESVVTKVxuICAgIC5hdChcImhlaWdodFwiLCAyKkNJUkNMRV9SQURJVVMpXG4gICAgLmF0KFwieFwiLDApXG4gICAgLmF0KFwieVwiLDApXG4gICAgLmF0KFwieGxpbms6aHJlZlwiLGQ9PntcbiAgICAgIGNvbnN0IGpvYk5hbWVOb1NwYWNlcyA9IGQuam9iLnJlcGxhY2UoLyAvZywgJ18nKTtcbiAgICAgIHJldHVybiAnYXNzZXRzL2RhdGEvY2lyY2xlLWltYWdlcy8nK2pvYk5hbWVOb1NwYWNlcysnLnBuZydcbiAgICB9KVxuXG59XG5cbmZ1bmN0aW9uIHJlc2l6ZSgpe1xuICBzdmdXaWR0aCA9ICRjaGFydFN2Zy5hdCgnd2lkdGgnKVxuICBzdmdIZWlnaHQgPSAkY2hhcnRTdmcuYXQoJ2hlaWdodCcpXG5cbiAgLy8gY29uc29sZS5sb2coJGNoYXJ0U3ZnLmF0KCd3aWR0aCcpKTtcblxuICAvLyBjb25zb2xlLmxvZygkKCdmaWd1cmUnKS5oZWlnaHQoKSk7XG5cbiAgdmlld3BvcnRXaWR0aCA9d2luZG93LmlubmVyV2lkdGg7XG4gIHZpZXdwb3J0SGVpZ2h0PXdpbmRvdy5pbm5lckhlaWdodDtcblxuICBpc01vYmlsZSA9IHZpZXdwb3J0V2lkdGggPCA3MDA/IHRydWUgOiBmYWxzZTtcblxuICB3aWR0aFBlcmNlbnRhZ2UgPSAwLjk7XG4gIGhlaWdodFBlcmNlbnRhZ2UgPSAwLjg7XG5cbiAgLy8gY29uc29sZS5sb2coXCJyZXNpemUhXCIpO1xufVxuXG5mdW5jdGlvbiBzZXR1cFNjYWxlcygpe1xuXG4gIGNvbnN0IGhlaWdodE1pc2NFbERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaXNjLWNoYXJ0LWVsZW1lbnRzLWNvbnRhaW5lcicpLm9mZnNldEhlaWdodDtcbiAgY29uc3Qgc3ZnTWF4U2l6ZSA9IHZpZXdwb3J0SGVpZ2h0LWhlaWdodE1pc2NFbERpdjtcblxuICB5TWF4U2NhbGVWYWx1ZSA9IHN2Z01heFNpemUgKiBoZWlnaHRQZXJjZW50YWdlO1xuICB4TWF4U2NhbGVWYWx1ZSA9IHN2Z1dpZHRoICogd2lkdGhQZXJjZW50YWdlO1xuXG4gIHhQYWRkaW5nID0gKDEtd2lkdGhQZXJjZW50YWdlKSpzdmdXaWR0aDtcbiAgeVBhZGRpbmcgPSAoMS1oZWlnaHRQZXJjZW50YWdlKSpzdmdIZWlnaHQ7XG5cbiAgc2NhbGVzT2JqZWN0LnlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAuZG9tYWluKFtNSU5fQVVUT01BVElPTixNQVhfQVVUT01BVElPTl0pXG4gICAgLnJhbmdlKFswK3lQYWRkaW5nLCB5TWF4U2NhbGVWYWx1ZV0pO1xuXG4gIHNjYWxlc09iamVjdC54U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG5cdFx0LmRvbWFpbihbMCwxMDBdKVxuXHRcdC5yYW5nZShbMCt4UGFkZGluZywgeE1heFNjYWxlVmFsdWVdKTtcblxuICBpZihpc01vYmlsZSl7XG4gICAgaW50cm9ZQXhpc0xvY2F0aW9uID0gc3ZnV2lkdGgvMjtcbiAgfVxuICBlbHNlIHtcbiAgICBpbnRyb1lBeGlzTG9jYXRpb24gPSBzdmdXaWR0aC8yO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gc2V0dXBBeGVzKCl7XG5cbiAgY29uc3QgZm9ybWF0UGVyY2VudCA9IGQzLmZvcm1hdChcIi4wJVwiKTtcbiAgY29uc3QgZm9ybWF0UGVyY2VudHYyID0gZDMuZm9ybWF0KFwiZFwiKTtcblxuICBjb25zdCB0cnVja2VyRGV2ZWxvcGVyWUF4aXNGdW5jdGlvbiA9IGQzLmF4aXNMZWZ0KHNjYWxlc09iamVjdC55U2NhbGUpLnRpY2tzKDEpLnRpY2tGb3JtYXQoZm9ybWF0UGVyY2VudCk7XG4gIGNvbnN0IHRydWNrZXJEZXZlbG9wZXJYQXhpc0Z1bmN0aW9uID0gZDMuYXhpc1RvcChzY2FsZXNPYmplY3QueFNjYWxlKS50aWNrcygxKS50aWNrRm9ybWF0KGZvcm1hdFBlcmNlbnR2Mik7XG5cbiAgY29uc3QgSE9SSVpPTlRBTF9CVU1QPWludHJvWUF4aXNMb2NhdGlvbjtcbiAgY29uc3QgbWlkZGxlQ29vcmQgPSBzY2FsZXNPYmplY3QueVNjYWxlKDAuNSk7XG5cbiAgdHJ1Y2tlckRldmVsb3BlcllBeGlzID0gJGNoYXJ0U3ZnLmFwcGVuZChcImcuaW50cm8teS1heGlzXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIrSE9SSVpPTlRBTF9CVU1QK1wiLDApXCIpXG4gICAgLmNhbGwodHJ1Y2tlckRldmVsb3BlcllBeGlzRnVuY3Rpb24pXG4gICAgLnN0eWxlKCdvcGFjaXR5JywxKVxuXG4gICR0cnVja2VyRGV2ZWxvcGVyWEF4aXMgPSAkY2hhcnRTdmcuYXBwZW5kKFwiZy5pbnRyby14LWF4aXNcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiswK1wiLFwiK21pZGRsZUNvb3JkK1wiKVwiKVxuICAgIC5jYWxsKHRydWNrZXJEZXZlbG9wZXJYQXhpc0Z1bmN0aW9uKVxuICAgIC5zdHlsZSgnb3BhY2l0eScsMClcblxuICAkdHJ1Y2tlckRldmVsb3BlclhBeGlzXG4gICAgLnNlbGVjdCgncGF0aC5kb21haW4nKVxuICAgIC5hdCgndHJhbnNmb3JtJyxgdHJhbnNsYXRlKDAsJHstRElGRkVSRU5DRV9SRUNUX0hFSUdIVC8yfSlgKVxuXG4gIHlBeGlzTGFiZWxNaW4gPSAkY2hhcnRTdmcuYXBwZW5kKCd0ZXh0LnktYXhpcy1sYWJlbC5taW4nKVxuICAgIC5hdCgneCcsaW50cm9ZQXhpc0xvY2F0aW9uKVxuICAgIC5hdCgneScseVBhZGRpbmcvMilcbiAgICAuc3QoJ2ZpbGwnLCAnIzJGODBFRCcpXG4gICAgLnN0KCd0ZXh0LWFuY2hvcicsJ21pZGRsZScpXG4gICAgLnRleHQoJ1NBRkUgSk9CUycgKVxuXG4gIGNvbnN0IHlBeGlzVGl0bGVCYWNrZ3JvdW5kID0gJGNoYXJ0U3ZnLmFwcGVuZCgndGV4dC55LWF4aXMtbGFiZWwudGl0bGUtYmFja2dyb3VuZCcpXG4gICAgLmF0KCd0cmFuc2Zvcm0nLGB0cmFuc2xhdGUoJHsoaW50cm9ZQXhpc0xvY2F0aW9uKjEuMDEpfSwke3N2Z0hlaWdodC8yfSkgcm90YXRlKDI3MClgKVxuICAgIC5zdCgnc3Ryb2tlJywgJyNGRkZGRkYnKVxuICAgIC5zdCgnc3Ryb2tlLXdpZHRoJywxMSlcbiAgICAuc3QoJ3RleHQtYW5jaG9yJywnbWlkZGxlJylcbiAgICAudGV4dCgnQVVUT01BVElPTiBMSUtFTElIT09EICUnIClcblxuICBjb25zdCB5QXhpc1RpdGxlID0gJGNoYXJ0U3ZnLmFwcGVuZCgndGV4dC55LWF4aXMtbGFiZWwudGl0bGUnKVxuICAgIC5hdCgndHJhbnNmb3JtJyxgdHJhbnNsYXRlKCR7KGludHJvWUF4aXNMb2NhdGlvbioxLjAxKX0sJHtzdmdIZWlnaHQvMn0pIHJvdGF0ZSgyNzApYClcbiAgICAuc3QoJ2ZpbGwnLCAnIzZmNmY2ZicpXG4gICAgLnN0KCd0ZXh0LWFuY2hvcicsJ21pZGRsZScpXG4gICAgLnRleHQoJ0FVVE9NQVRJT04gTElLRUxJSE9PRCAlJyApXG5cbiAgY29uc3QgeUF4aXNMYWJlbE1heCA9ICRjaGFydFN2Zy5hcHBlbmQoJ3RleHQueS1heGlzLWxhYmVsLm1heCcpXG4gICAgLmF0KCd4JyxpbnRyb1lBeGlzTG9jYXRpb24pXG4gICAgLmF0KCd5Jyx5TWF4U2NhbGVWYWx1ZSsoeVBhZGRpbmcvMikpXG4gICAgLnN0KCdmaWxsJywgJyNFQjU3NTcnKVxuICAgIC5zdCgndGV4dC1hbmNob3InLCdtaWRkbGUnKVxuICAgIC50ZXh0KCdFTkRBTkdFUkVEIEpPQlMnKVxuXG59XG5cbmZ1bmN0aW9uIHNldHVwRE9NRWxlbWVudHMoKXtcblxuICBzZXR1cEF4ZXMoKVxuXG4gIGNvbnN0IGV4YW1wbGVUaXRsZUNvb3JkID0gc2NhbGVzT2JqZWN0LnlTY2FsZSgwLjM1KTtcblxuICAkZXhhbXBsZVNraWxsVGl0bGUgPSAkY2hhcnRTdmdcbiAgICAuYXBwZW5kKCd0ZXh0LmV4YW1wbGUtc2tpbGwtdGl0bGUnKVxuICAgIC5hdCgneCcsaW50cm9ZQXhpc0xvY2F0aW9uKVxuICAgIC5hdCgneScsZXhhbXBsZVRpdGxlQ29vcmQpXG4gICAgLnRleHQoJ0ltcG9ydGFuY2Ugb2Ygc2tpbGw6IHByb2dyYW1taW5nJylcbiAgICAvLyAuc3QoJ3RleHQtYW5jaG9yJywnbWlkZGxlJylcblxuICBjb25zdCB0cnVja2VyRGV2ZWxvcGVySm9pbiA9ICRjaGFydFN2Zy5zZWxlY3RBbGwoJ2NpcmNsZS5qb2JzLWNpcmNsZXMnKVxuICAgIC5kYXRhKHRydWNrZXJzRGV2ZWxvcGVycylcbiAgICAuZW50ZXIoKVxuXG4gIGpvYnNHcm91cHMgPSB0cnVja2VyRGV2ZWxvcGVySm9pblxuICAgIC5hcHBlbmQoJ2cudHJ1Y2tlci1kZXZlbG9wZXItZ3JvdXBzJylcblxuICAkam9iQ2lyY2xlcyA9IGpvYnNHcm91cHMuYXBwZW5kKCdjaXJjbGUuaW50cm8tam9icy1jaXJjbGVzJylcbiAgY29uc3Qgam9ic0F1dG9tYXRhYmlsaXR5X0xBQkVMUyA9IGpvYnNHcm91cHMuYXBwZW5kKCd0ZXh0LmludHJvLWF1dG9tYXRhYmlsaXR5LXZhbHVlcycpXG4gIGpvYnNOYW1lX0xBQkVMUyA9IGpvYnNHcm91cHMuYXBwZW5kKCd0ZXh0LmludHJvLWpvYi1uYW1lcycpXG4gIGNvbnN0IGpvYnNTa2lsbHNfTEFCRUxTID0gam9ic0dyb3Vwcy5hcHBlbmQoJ3RleHQuaW50cm8tam9iLXNraWxsLXZhbHVlcycpXG5cbiAgLy8gJGF1dG9tYXRhYmlsaXR5X0xBQkVMID0gJGNoYXJ0U3ZnLmFwcGVuZCgndGV4dC5hdXRvbWF0YWJpbGl0eS1sYWJlbCcpXG4vLyBhZGRpbmcgZWxlbWVudCB0ZXh0IGxhYmVsc1xuXG4gIGpvYnNBdXRvbWF0YWJpbGl0eV9MQUJFTFMudGV4dChkPT5kLmF1dG9tYXRhYmlsaXR5KjEwMCArIFwiJVwiKVxuICBqb2JzTmFtZV9MQUJFTFMudGV4dChkPT5kLmpvYilcbiAgam9ic1NraWxsc19MQUJFTFMudGV4dChkPT5kLnNraWxsVHJ1Y2tlclNjb3JlKVxuICAvLyAkYXV0b21hdGFiaWxpdHlfTEFCRUwudGV4dCgnYXV0b21hdGlvbiBsaWtlbGlob29kJylcblxuICAvL3NldHRpbmcgaW5pdGlhbCBvcGFjaXR5XG4gIGpvYnNHcm91cHNcbiAgICAuYXQoJ3RyYW5zZm9ybScsIGQ9PntcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcraW50cm9ZQXhpc0xvY2F0aW9uKycsJytcbiAgICAgICAgICAgICAgICAgICAgICAgICArc2NhbGVzT2JqZWN0LnlTY2FsZShkLmF1dG9tYXRhYmlsaXR5KSsnKSdcbiAgICB9KVxuICAgIC5zdHlsZSgnb3BhY2l0eScsZD0+IHtcbiAgICAgIGlmIChkLmpvYj09PVwiVGVhY2hlcnNcIiB8fCBkLmpvYj09PVwiVGVsZW1hcmtldGVyc1wiKXtyZXR1cm4gMX1cbiAgICAgIGVsc2Uge3JldHVybiAwfVxuICAgIH0pXG5cbiAgam9ic1NraWxsc19MQUJFTFNcbiAgICAuc3R5bGUoJ29wYWNpdHknLDApXG5cblxuXG4gIC8vIElOSVRJQUwgRUxFTUVOVCBQT1NJVElPTklORyBBTkQgT1BBQ0lUWSBTRVRUSU5HXG5cbiAgam9iQ2lyY2xlX21hcmdpbl94ID0gQ0lSQ0xFX1JBRElVUyoyO1xuICBqb2JOYW1lTGFiZWxfbWFyZ2luX3ggPSBDSVJDTEVfUkFESVVTKjQ7XG4gIGpvYk5hbWVMYWJlbF9tYXJnaW5feSA9IGpvYkNpcmNsZV9tYXJnaW5feC8xMDtcblxuICAkam9iQ2lyY2xlc1xuICAgIC5hdCgnY3gnLGpvYkNpcmNsZV9tYXJnaW5feClcbiAgICAuYXQoJ3InLCBDSVJDTEVfUkFESVVTKVxuICAgIC8vIC5zdHlsZSgnb3BhY2l0eScsZD0+ZC5qb2IgPT09ICdEZXZlbG9wZXJzJz8gMCA6IDEpXG4gICAgLnN0KCdmaWxsJywnIzJGODBFRCcpXG4gICAgLnN0KCdmaWxsJywgZD0+e1xuICAgICAgY29uc3Qgam9iTmFtZU5vU3BhY2VzID0gZC5qb2IucmVwbGFjZSgvIC9nLCdfJyk7XG4gICAgICByZXR1cm4gYHVybCgjJHtqb2JOYW1lTm9TcGFjZXN9LWltZylgXG4gICAgfSlcblxuICBqb2JzTmFtZV9MQUJFTFNcbiAgICAuYXQoJ3gnLGpvYk5hbWVMYWJlbF9tYXJnaW5feClcbiAgICAuYXQoJ3knLGpvYk5hbWVMYWJlbF9tYXJnaW5feSlcbiAgICAuc3QoJ3RleHQtYW5jaG9yJywncmlnaHQnKVxuXG4gIGpvYnNBdXRvbWF0YWJpbGl0eV9MQUJFTFNcbiAgICAuYXQoJ3gnLC1qb2JDaXJjbGVfbWFyZ2luX3gpXG4gICAgLmF0KCd5Jyxqb2JOYW1lTGFiZWxfbWFyZ2luX3kpXG4gICAgLnN0KCd0ZXh0LWFuY2hvcicsJ2xlZnQnKVxuXG4gIHRydWNrZXJEZXZlbG9wZXJYQXhpc0Z1bmN0aW9uPSBkMy5heGlzVG9wKHNjYWxlc09iamVjdC54U2NhbGUpLnRpY2tzKDEpLnRpY2tGb3JtYXQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZCArICclJyB9ICk7XG5cblxuXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVN0ZXAoc3RlcCl7XG4gIGlmKHN0ZXA9PT0nYWxsLWF1dG9tYXRpb24nKXtcbiAgICAgIGpvYnNHcm91cHNcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCBkPT5kLmpvYj09PSdUcnVja2VycycgfHwgZC5qb2I9PT0nRGV2ZWxvcGVycyc/IDAgOiAxKVxuICAgICAgICAuYXQoJ3RyYW5zZm9ybScsIGQ9PntcbiAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnK2ludHJvWUF4aXNMb2NhdGlvbisnLCcrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICtzY2FsZXNPYmplY3QueVNjYWxlKGQuYXV0b21hdGFiaWxpdHkpKycpJ1xuICAgICAgICB9KVxuXG4gICAgICAkY2hhcnRTdmcuc2VsZWN0KCdnLmludHJvLXktYXhpcycpXG4gICAgICAgIC5zZWxlY3RBbGwoJ2cudGljaycpXG4gICAgICAgIC5zZWxlY3RBbGwoJ3RleHQnKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsICcwJylcbiAgfVxuICBlbHNlIGlmKHN0ZXA9PT0nbWFpbi1qb2ItY2lyY2xlJyl7XG5cbiAgICAgICRjaGFydFN2Z1xuICAgICAgICAuc2VsZWN0QWxsKCdnLmFubm8tZ3JvdXAnKVxuICAgICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAgICRjaGFydFN2Z1xuICAgICAgICAuc2VsZWN0QWxsKCd0ZXh0LmF4aXMtbGFiZWwnKVxuICAgICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAgIGpvYnNHcm91cHNcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCBkPT5kLmpvYj09PSdUcnVja2Vycyc/IDEgOiAwKVxuICAgICAgICAuYXQoJ3RyYW5zZm9ybScsIGQ9PntcbiAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnK2ludHJvWUF4aXNMb2NhdGlvbisnLCcrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICtzY2FsZXNPYmplY3QueVNjYWxlKGQuYXV0b21hdGFiaWxpdHkpKycpJ1xuICAgICAgICB9KVxuXG4gICAgICAkY2hhcnRTdmcuc2VsZWN0KCdnLmludHJvLXktYXhpcycpXG4gICAgICAgIC5zZWxlY3RBbGwoJ2cudGljaycpXG4gICAgICAgIC5zZWxlY3RBbGwoJ3RleHQnKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsICcxJylcbiAgfVxuICBlbHNlIGlmKHN0ZXA9PT0nbWFpbi1qb2ItYXV0b21hdGlvbicpe1xuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0KCdnLmxlZ2VuZF9fd2FnZXMnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ2cuYW5uby1ncm91cCcpXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ3RleHQuYXhpcy1sYWJlbCcpXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ2cuYWxsLWpvYnMnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLmJpc2VjdGluZy1hdXRvbWF0aW9uLWdyb3VwJylcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5zaW1pbGFyaXR5LWFubm90YXRpb24nKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLnNraWxsLXNlY3Rpb25fX3R3by1qb2JzJylcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5zY2F0dGVyLXktYXhpcycpXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAkZXhhbXBsZVNraWxsVGl0bGVcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5zdHlsZSgnb3BhY2l0eScsMClcblxuICAgIGpvYnNOYW1lX0xBQkVMU1xuICAgICAgLmF0KCd4Jyxqb2JOYW1lTGFiZWxfbWFyZ2luX3gpXG4gICAgICAuYXQoJ3knLGpvYk5hbWVMYWJlbF9tYXJnaW5feSlcbiAgICAgIC5zdCgndGV4dC1hbmNob3InLCdyaWdodCcpXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ3RleHQueS1heGlzLWxhYmVsJylcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5zdHlsZSgnb3BhY2l0eScsMSlcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnLmludHJvLWF1dG9tYXRhYmlsaXR5LXZhbHVlcycpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuc3R5bGUoJ29wYWNpdHknLDEpXG5cbiAgICAkdHJ1Y2tlckRldmVsb3BlclhBeGlzXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuc3R5bGUoJ29wYWNpdHknLDApXG5cbiAgICAgICRjaGFydFN2Zy5zdCgnZGlzcGxheScsICdibG9jaycpXG4gICAgICB0cnVja2VyRGV2ZWxvcGVyWUF4aXMuc3R5bGUoJ29wYWNpdHknLDEpXG5cbiAgICAgIGpvYnNHcm91cHNcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCBkPT5kLmpvYj09PSdUcnVja2VycycgfHwgZC5qb2I9PT0nRGV2ZWxvcGVycyc/IDEgOiAwKVxuICAgICAgICAuYXQoJ3RyYW5zZm9ybScsIGQ9PntcbiAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnK2ludHJvWUF4aXNMb2NhdGlvbisnLCcrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICtzY2FsZXNPYmplY3QueVNjYWxlKGQuYXV0b21hdGFiaWxpdHkpKycpJ1xuICAgICAgICB9KVxuXG4gICAgICAkY2hhcnRDb250YWluZXJcbiAgICAgICAgLnNlbGVjdCgnaW1nLmltYWdlcy10d28tam9icy10d28tc2tpbGxzJylcbiAgICAgICAgLnN0KCdkaXNwbGF5Jywnbm9uZScpXG5cbiAgICAgIHJldmVyc2VUcmFuc2l0aW9uVHJpZ2dlcl9fdHdvSm9ic3R3b1NraWxsc0RldmVsb3BlcnMgPSBmYWxzZTtcbiAgfVxuICBlbHNlIGlmKHN0ZXAgPT09J2ltYWdlcy10d28tam9icy10d28tc2tpbGxzLWRldmVsb3BlcnMnKXtcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdCgnZy5sZWdlbmRfX3dhZ2VzJylcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLmFubm8tZ3JvdXAnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCd0ZXh0LmF4aXMtbGFiZWwnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLmFsbC1qb2JzJylcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5zaW1pbGFyaXR5LWFubm90YXRpb24nKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLnNjYXR0ZXIteS1heGlzJylcbiAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICRjaGFydFN2Z1xuICAgICAgLnNlbGVjdEFsbCgnZy5za2lsbC1zZWN0aW9uX190d28tam9icycpXG4gICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAkY2hhcnRTdmdcbiAgICAgIC5zZWxlY3RBbGwoJ2cuYmlzZWN0aW5nLWF1dG9tYXRpb24tZ3JvdXAnKVxuICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgY29uc3QgbnVtU2tpbGxzID0gJGNoYXJ0U3ZnXG4gICAgICAuc2VsZWN0QWxsKCdnLnNraWxsLXNlY3Rpb25fX3R3by1qb2JzJylcbiAgICAgIC5zaXplKClcblxuICAgIGNvbnN0IFRJTUVfSU5URVJWQUwgPSAxNTtcbiAgICBjb25zdCBza2lsbFRpdGxlX3RyYW5zaXRpb25SZXR1cm5fZGVsYXk9ODAwO1xuXG4gICAgJGV4YW1wbGVTa2lsbFRpdGxlXG4gICAgICAuY2xhc3NlZCgnaW52aXNpYmxlJyxmYWxzZSlcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kZWxheSgoKT0+e1xuICAgICAgICBpZihyZXZlcnNlVHJhbnNpdGlvblRyaWdnZXJfX3R3b0pvYnN0d29Ta2lsbHNEZXZlbG9wZXJzPT09dHJ1ZSl7cmV0dXJuIHNraWxsVGl0bGVfdHJhbnNpdGlvblJldHVybl9kZWxheX1cbiAgICAgICAgZWxzZSB7cmV0dXJuIDB9XG4gICAgICB9KVxuICAgICAgLnN0eWxlKCdvcGFjaXR5JywxKVxuXG4gICAgZDMuc2VsZWN0KCcuY2hhcnQtdGl0bGUtZGl2JylcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5zdCgndmlzaWJpbGl0eScsJ2hpZGRlbicpXG5cbiAgICAkY2hhcnRTdmcuc2VsZWN0QWxsKCdnLnRydWNrZXItZGV2ZWxvcGVyLWdyb3VwcycpXG4gICAgICAuY2xhc3NlZCgnaW52aXNpYmxlJywgZmFsc2UpXG5cbiAgICAgIGpvYnNOYW1lX0xBQkVMU1xuICAgICAgICAuYXQoJ3gnLDApXG4gICAgICAgIC5hdCgneScsam9iQ2lyY2xlX21hcmdpbl94KVxuICAgICAgICAuc3QoJ3RleHQtYW5jaG9yJywnc3RhcnQnKVxuXG4gICAgICAkY2hhcnRTdmdcbiAgICAgICAgLnNlbGVjdEFsbCgnLnNraWxsLXNlY3Rpb25fX3R3by1qb2JzJylcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oKGQsaSk9PntcbiAgICAgICAgICBpZihyZXZlcnNlVHJhbnNpdGlvblRyaWdnZXJfX3R3b0pvYnN0d29Ta2lsbHNEZXZlbG9wZXJzPT09dHJ1ZSl7XG4gICAgICAgICAgICByZXR1cm4gKG51bVNraWxscypUSU1FX0lOVEVSVkFMKSAtIChpKlRJTUVfSU5URVJWQUwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtyZXR1cm4gMjUwfVxuICAgICAgICB9KVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLDApXG5cbiAgICAgIGNvbnN0IG1pZGRsZUNvb3JkID0gc2NhbGVzT2JqZWN0LnlTY2FsZSgwLjUpO1xuXG4gICAgICAkY2hhcnRTdmdcbiAgICAgICAgLnNlbGVjdEFsbCgndGV4dC55LWF4aXMtbGFiZWwnKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsMClcblxuICAgICAgJGNoYXJ0U3ZnXG4gICAgICAgIC5zZWxlY3RBbGwoJy5pbnRyby1hdXRvbWF0YWJpbGl0eS12YWx1ZXMnKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsMClcblxuICAgICAgY29uc3QgZm9ybWF0UGVyY2VudHYyID0gZDMuZm9ybWF0KFwiZFwiKTtcblxuICAgICAgY29uc3QgVHJ1Y2tlckRldmVsb3BlcnNfdHJhbnNpdGlvblZlcnRpY2FsX2R1cmF0aW9uID0gNDAwO1xuXG4gICAgICAkdHJ1Y2tlckRldmVsb3BlclhBeGlzXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmRlbGF5KCgpPT57XG4gICAgICAgICAgaWYocmV2ZXJzZVRyYW5zaXRpb25UcmlnZ2VyX190d29Kb2JzdHdvU2tpbGxzRGV2ZWxvcGVycz09PXRydWUpe3JldHVybiBUcnVja2VyRGV2ZWxvcGVyc190cmFuc2l0aW9uVmVydGljYWxfZHVyYXRpb259XG4gICAgICAgICAgZWxzZSB7cmV0dXJuIDB9XG4gICAgICAgIH0pXG4gICAgICAgIC5kdXJhdGlvbihUcnVja2VyRGV2ZWxvcGVyc190cmFuc2l0aW9uVmVydGljYWxfZHVyYXRpb24pXG4gICAgICAgIC5jYWxsKHRydWNrZXJEZXZlbG9wZXJYQXhpc0Z1bmN0aW9uKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLDEpXG4gICAgICAgIC5hdCgndHJhbnNmb3JtJywoKT0+e1xuICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJysgbWlkZGxlQ29vcmQrJyknXG4gICAgICAgIH0pXG5cblxuICAgICAgJHRydWNrZXJEZXZlbG9wZXJYQXhpc1xuICAgICAgICAuc2VsZWN0QWxsKCcuaW50cm8teC1heGlzIC50aWNrIHRleHQnKVxuICAgICAgICAuYXQoJ3knLDApXG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiQlVNUDogXCIgKyB0aWNrc1lCdW1wKTtcblxuXG4gICAgICAkdHJ1Y2tlckRldmVsb3BlclhBeGlzXG4gICAgICAgIC5zZWxlY3RBbGwoJ2cudGljaycpXG4gICAgICAgIC5zZWxlY3RBbGwoJ3RleHQnKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdCgndGV4dC1hbmNob3InLChkLGkpPT57XG4gICAgICAgICAgaWYoZD09PTApe3JldHVybiAnZW5kJ31cbiAgICAgICAgICBlbHNlIHJldHVybiAnc3RhcnQnXG4gICAgICAgIH0pXG4gICAgICAgIC5hdCgneScsKCk9PiB7cmV0dXJuIDB9KVxuICAgICAgICAuYXQoJ3gnLCAoZCxpKT0+e1xuICAgICAgICAgIGlmKGQ9PT0wKXsgcmV0dXJuIC0yfVxuICAgICAgICAgIGVsc2UgcmV0dXJuIDJcbiAgICAgICAgfSlcbiAgICAgICAgLy8gLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgwLCR7LXRpY2tzWUJ1bXB9KWApXG4gICAgICAgIC5hdCgneScsMClcbiAgICAgICAgLnN0KCdmb250LXNpemUnLCgpPT57XG4gICAgICAgICAgaWYoaXNNb2JpbGUpe3JldHVybiAxMn1cbiAgICAgICAgICBlbHNle3JldHVybiAxNn1cbiAgICAgICAgfSlcblxuXG4gICAgICB0cnVja2VyRGV2ZWxvcGVyWUF4aXNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5zdHlsZSgnb3BhY2l0eScsMClcblxuICAgICAgam9ic0dyb3Vwc1xuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmRlbGF5KCgpPT57XG4gICAgICAgIGlmIChyZXZlcnNlVHJhbnNpdGlvblRyaWdnZXJfX3R3b0pvYnN0d29Ta2lsbHNEZXZlbG9wZXJzID09PSB0cnVlKXtyZXR1cm4gc2tpbGxUaXRsZV90cmFuc2l0aW9uUmV0dXJuX2RlbGF5fVxuICAgICAgICBlbHNlIHtyZXR1cm4gMH1cbiAgICAgIH0pXG4gICAgICAvLyAuZHVyYXRpb24oMTAwMClcbiAgICAgIC5hdCgndHJhbnNmb3JtJyxkPT57XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcrc2NhbGVzT2JqZWN0LnhTY2FsZShkLnNraWxsRGV2ZWxvcGVyU2NvcmUpKycsJyttaWRkbGVDb29yZCArJyknXG4gICAgICB9KVxuICAgICAgLnN0eWxlKCdvcGFjaXR5JywgZD0+ZC5qb2I9PT0nVHJ1Y2tlcnMnIHx8IGQuam9iPT09J0RldmVsb3BlcnMnPyAxIDogMClcblxuICAgICAgJGNoYXJ0U3ZnXG4gICAgICAgIC5zZWxlY3RBbGwoJ2cuc2tpbGwtc2VjdGlvbicpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywwKVxuXG4gICAgcmV2ZXJzZVRyYW5zaXRpb25UcmlnZ2VyX190d29Kb2JzdHdvU2tpbGxzRGV2ZWxvcGVycz0gdHJ1ZTtcblxuICB9XG4gIGVsc2UgaWYoc3RlcD09PSdpbWFnZXMtdHdvLWpvYnMtdHdvLXNraWxscycpe1xuXG4gICAgICAkY2hhcnRTdmdcbiAgICAgICAgLnNlbGVjdEFsbCgnZy5hbGwtam9icycpXG4gICAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICAgJGNoYXJ0U3ZnXG4gICAgICAgIC5zZWxlY3RBbGwoJ2cuc2ltaWxhcml0eS1hbm5vdGF0aW9uJylcbiAgICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgICAkY2hhcnRTdmdcbiAgICAgICAgLnNlbGVjdEFsbCgnZy5zY2F0dGVyLXktYXhpcycpXG4gICAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICAgJGNoYXJ0U3ZnXG4gICAgICAgIC5zZWxlY3RBbGwoJ2cuc2tpbGwtc2VjdGlvbl9fdHdvLWpvYnMnKVxuICAgICAgICAuc3QoJ29wYWNpdHknLDApXG5cbiAgICAgICRjaGFydFN2Z1xuICAgICAgICAuc2VsZWN0QWxsKCdnLmJpc2VjdGluZy1hdXRvbWF0aW9uLWdyb3VwJylcbiAgICAgICAgLnN0KCdvcGFjaXR5JywwKVxuXG4gICAgICBjb25zdCBtaWRkbGVDb29yZCA9IHNjYWxlc09iamVjdC55U2NhbGUoMC41KTtcblxuICAgICAgJGNoYXJ0U3ZnXG4gICAgICAgIC5zZWxlY3RBbGwoJ3RleHQueS1heGlzLWxhYmVsJylcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLDApXG5cbiAgICAgICRjaGFydFN2Z1xuICAgICAgICAuc2VsZWN0QWxsKCcuaW50cm8tYXV0b21hdGFiaWxpdHktdmFsdWVzJylcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLDApXG5cblxuICAgICAgJHRydWNrZXJEZXZlbG9wZXJYQXhpc1xuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsMSlcbiAgICAgICAgLmF0KCd0cmFuc2Zvcm0nLCgpPT57XG4gICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnKyBtaWRkbGVDb29yZCsnKSdcbiAgICAgICAgfSlcblxuICAgICAgdHJ1Y2tlckRldmVsb3BlcllBeGlzXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuc3R5bGUoJ29wYWNpdHknLDApXG5cblxuICAgICAgam9ic0dyb3Vwc1xuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmF0KCd0cmFuc2Zvcm0nLGQ9PntcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJytzY2FsZXNPYmplY3QueFNjYWxlKGQuc2tpbGxUcnVja2VyU2NvcmUpKycsJyttaWRkbGVDb29yZCArJyknXG4gICAgICB9KVxuXG5cbiAgfVxuICBlbHNlIGlmKHN0ZXA9PT0naW1hZ2VzLXR3by1qb2JzLW1hbnktc2tpbGxzJyl7XG5cbiAgICAgICRjaGFydFN2Z1xuICAgICAgICAuc2VsZWN0QWxsKCdnLnNpbWlsYXJpdHktYW5ub3RhdGlvbicpXG4gICAgICAgIC5zdCgnb3BhY2l0eScsMClcblxuICAgICAgJGNoYXJ0U3ZnXG4gICAgICAgIC5zZWxlY3RBbGwoJ2cuc2ltaWxhcml0eS1hbm5vdGF0aW9uJylcbiAgICAgICAgLmNsYXNzZWQoJ2ludmlzaWJsZScsdHJ1ZSlcblxuICAgICAgJGNoYXJ0Q29udGFpbmVyXG4gICAgICAgIC5zZWxlY3QoJ2ltZy5pbWFnZXMtdHdvLWpvYnMtdHdvLXNraWxscycpXG4gICAgICAgIC5zdCgnZGlzcGxheScsJ25vbmUnKVxuXG4gICAgICAkY2hhcnRDb250YWluZXJcbiAgICAgICAgLnNlbGVjdCgnaW1nLmltYWdlcy10d28tam9icy1zdGFja2VkLXNraWxscycpXG4gICAgICAgIC5zdCgnZGlzcGxheScsJ25vbmUnKVxuXG4gICAgICAgY29uc3QgJHN0YXRpY0ltYWdlRGl2ID0gJGNoYXJ0Q29udGFpbmVyXG4gICAgICAgIC5zZWxlY3QoJ2ltZy5pbWFnZXMtdHdvLWpvYnMtbWFueS1za2lsbHMnKVxuXG4gICAgICAkc3RhdGljSW1hZ2VEaXZcbiAgICAgICAgLnN0KCdkaXNwbGF5JywnYmxvY2snKVxuICAgICAgICAuc3QoJ3Zpc2liaWxpdHknLCd2aXNpYmxlJylcbiAgfVxuICBlbHNlIGlmKHN0ZXA9PT0naW1hZ2VzLXR3by1qb2JzLWFsbC1za2lsbHMnKXtcbiAgICByZXZlcnNlVHJhbnNpdGlvblRyaWdnZXJfX3R3b0pvYnN0d29Ta2lsbHNEZXZlbG9wZXJzID0gdHJ1ZTtcbiAgfVxuXG59XG5cbmZ1bmN0aW9uIGluaXQoKXtcblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT57XG5cbiAgICBzZXR1cENpcmNsZVBhdHRlcm5zKHRydWNrZXJzRGV2ZWxvcGVycylcbiAgICByZXNpemUoKVxuICAgIHNldHVwU2NhbGVzKClcbiAgICBzZXR1cERPTUVsZW1lbnRzKClcblxuICAgIHJlc29sdmUoKVxuXG4gIH0pXG59XG5cblxuZXhwb3J0IGRlZmF1bHQge2luaXQsIHVwZGF0ZVN0ZXB9XG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBTUE7QUFDQTtBQU1BO0FBQ0E7QUFLQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQWJBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n")},function(module,exports,__webpack_require__){"use strict";eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;!function(e){ true?!(__WEBPACK_AMD_DEFINE_FACTORY__ = (e),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):undefined}(function(){var e=function(e){function n(){g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}}function t(){if(h&&"number"==typeof h){var e=Math.min(Math.max(0,h),1);return q-e*q}return q}function i(){var e=document.documentElement.clientHeight,n=window.innerHeight||0;q=Math.max(e,n)}function o(){y=!1;var e=t();A=A.filter(function(n){var t=n.getBoundingClientRect(),i=t.top,o=i<e;if(o&&!n.__enter_view){if(m(n),_)return!1}else!o&&n.__enter_view&&w&&w(n);return n.__enter_view=o,!0}),A.length||window.removeEventListener("scroll",r,!0)}function r(){y||(y=!0,g(o))}function u(){i(),o()}function f(e){for(var n=e.length,t=[],i=0;i<n;i+=1)t.push(e[i]);return t}function c(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?f(n.querySelectorAll(e)):e instanceof NodeList?f(e):e instanceof Array?e:void 0}function d(){A=c(l)}function a(){window.addEventListener("resize",u,!0),window.addEventListener("scroll",r,!0),u()}function s(){var e=l&&m;e||console.error("must set selector and enter options"),n(),d(),a(),o()}var l=e.selector,m=e.enter,w=e.exit,v=e.offset,h=void 0===v?0:v,p=e.once,_=void 0!==p&&p,g=null,y=!1,A=[],q=0;s()};return e});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9lbnRlci12aWV3L2VudGVyLXZpZXcubWluLmpzPzM4ZWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7IWZ1bmN0aW9uKGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSgpOndpbmRvdy5lbnRlclZpZXc9ZS5jYWxsKHRoaXMpfShmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4oKXtnPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSwxZTMvNjApfX1mdW5jdGlvbiB0KCl7aWYoaCYmXCJudW1iZXJcIj09dHlwZW9mIGgpe3ZhciBlPU1hdGgubWluKE1hdGgubWF4KDAsaCksMSk7cmV0dXJuIHEtZSpxfXJldHVybiBxfWZ1bmN0aW9uIGkoKXt2YXIgZT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LG49d2luZG93LmlubmVySGVpZ2h0fHwwO3E9TWF0aC5tYXgoZSxuKX1mdW5jdGlvbiBvKCl7eT0hMTt2YXIgZT10KCk7QT1BLmZpbHRlcihmdW5jdGlvbihuKXt2YXIgdD1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9dC50b3Asbz1pPGU7aWYobyYmIW4uX19lbnRlcl92aWV3KXtpZihtKG4pLF8pcmV0dXJuITF9ZWxzZSFvJiZuLl9fZW50ZXJfdmlldyYmdyYmdyhuKTtyZXR1cm4gbi5fX2VudGVyX3ZpZXc9bywhMH0pLEEubGVuZ3RofHx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHIsITApfWZ1bmN0aW9uIHIoKXt5fHwoeT0hMCxnKG8pKX1mdW5jdGlvbiB1KCl7aSgpLG8oKX1mdW5jdGlvbiBmKGUpe2Zvcih2YXIgbj1lLmxlbmd0aCx0PVtdLGk9MDtpPG47aSs9MSl0LnB1c2goZVtpXSk7cmV0dXJuIHR9ZnVuY3Rpb24gYyhlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06ZG9jdW1lbnQ7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/ZihuLnF1ZXJ5U2VsZWN0b3JBbGwoZSkpOmUgaW5zdGFuY2VvZiBOb2RlTGlzdD9mKGUpOmUgaW5zdGFuY2VvZiBBcnJheT9lOnZvaWQgMH1mdW5jdGlvbiBkKCl7QT1jKGwpfWZ1bmN0aW9uIGEoKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHUsITApLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsciwhMCksdSgpfWZ1bmN0aW9uIHMoKXt2YXIgZT1sJiZtO2V8fGNvbnNvbGUuZXJyb3IoXCJtdXN0IHNldCBzZWxlY3RvciBhbmQgZW50ZXIgb3B0aW9uc1wiKSxuKCksZCgpLGEoKSxvKCl9dmFyIGw9ZS5zZWxlY3RvcixtPWUuZW50ZXIsdz1lLmV4aXQsdj1lLm9mZnNldCxoPXZvaWQgMD09PXY/MDp2LHA9ZS5vbmNlLF89dm9pZCAwIT09cCYmcCxnPW51bGwseT0hMSxBPVtdLHE9MDtzKCl9O3JldHVybiBlfSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _enterView = __webpack_require__(3);\n\nvar _enterView2 = _interopRequireDefault(_enterView);\n\nvar _truckersAndDevs = __webpack_require__(2);\n\nvar _truckersAndDevs2 = _interopRequireDefault(_truckersAndDevs);\n\nvar _skillStacking = __webpack_require__(1);\n\nvar _skillStacking2 = _interopRequireDefault(_skillStacking);\n\nvar _scatter = __webpack_require__(0);\n\nvar _scatter2 = _interopRequireDefault(_scatter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar viewportWidth = window.innerWidth;\nvar viewportHeight = window.innerHeight;\nvar isMobile = viewportWidth < 700 ? true : false;\n\nfunction getCurrentStep(index) {\n  var sel = d3.select('[data-index=\\'' + index + '\\']');\n  var step = sel.attr('data-step');\n  // stepSel.classed('is-active', (d, i) => i === index);\n\n  // console.log({step});\n  _truckersAndDevs2.default.updateStep(step);\n  _skillStacking2.default.updateStep(step);\n  _scatter2.default.updateStep(step);\n}\n\nfunction setupScrollTriggers() {\n  (0, _enterView2.default)({\n    selector: '.section__scene',\n    offset: -0.05,\n    enter: function enter(el) {\n      var index = +d3.select(el).attr('data-index');\n      getCurrentStep(index);\n    },\n    exit: function exit(el) {\n      var index = +d3.select(el).attr('data-index');\n      index = Math.max(0, index - 1);\n      getCurrentStep(index);\n    }\n  });\n}\n\nfunction resize() {}\n\nfunction init() {\n  var VIEWPORT_RATIO_HEIGHT = 1;\n  var VIEWPORT_RATIO_WIDTH = 0.9;\n\n  var JOB_LABEL_MARGIN_LEFT = isMobile ? 10 : 60;\n\n  var paddingChartTitleDiv = (1 - VIEWPORT_RATIO_WIDTH) / 2 * viewportWidth + JOB_LABEL_MARGIN_LEFT;\n\n  var chartSvg = d3.select(\"body\").select(\"figure.svg-container\").select(\"svg.scatter\");\n\n  d3.select('.chart-title-div').st('padding-left', paddingChartTitleDiv);\n\n  var heightMiscElDiv = document.getElementById('misc-chart-elements-container').offsetHeight;\n  var heightSvg = viewportHeight - heightMiscElDiv;\n\n  // console.log(\"full viewport height: \"+viewportHeight);\n  // console.log(\"misc el div height: \"+heightMiscElDiv);\n  // console.log(\"svg height (leftovers): \"+heightSvg);\n\n  chartSvg\n  // .at('height', (viewportHeight * VIEWPORT_RATIO_HEIGHT))\n  .at('height', heightSvg).at('width', viewportWidth * VIEWPORT_RATIO_WIDTH).st('fill', '#00000');\n\n  var tmpHt = d3.select('svg.scatter').at('height');\n\n  // console.log(\"svg height actual: \"+tmpHt);\n\n  d3.select('img.images-two-jobs-two-skills').st('width', viewportWidth * (VIEWPORT_RATIO_WIDTH - 0.3));\n\n  d3.select('img.images-two-jobs-many-skills').st('width', viewportWidth * (VIEWPORT_RATIO_WIDTH - 0.3));\n\n  d3.select('img.images-two-jobs-stacked-skills').st('width', viewportWidth * (VIEWPORT_RATIO_WIDTH - 0.3));\n\n  d3.select('img.images-many-jobs-many-skills').st('width', viewportWidth * (VIEWPORT_RATIO_WIDTH - 0.3));\n\n  _truckersAndDevs2.default.init().then(function () {\n    setupScrollTriggers();\n  }).catch(function (err) {\n    console.log(err);\n  });\n\n  _skillStacking2.default.init().then(function () {\n    setupScrollTriggers();\n  }).catch(function (err) {\n    console.log(err);\n  });\n\n  _scatter2.default.init().then(function () {\n    // set up scroll triggers\n    setupScrollTriggers();\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n\nexports.default = { init: init, resize: resize };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvZ3JhcGhpYy5qcz8xYzIyIl0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IGVudGVyVmlldyBmcm9tICdlbnRlci12aWV3JztcbmltcG9ydCBpbnRybyBmcm9tICcuL3RydWNrZXJzQW5kRGV2cyc7XG5pbXBvcnQgc2tpbGxTdGFja2luZyBmcm9tICcuL3NraWxsU3RhY2tpbmcnO1xuaW1wb3J0IHNjYXR0ZXIgZnJvbSAnLi9zY2F0dGVyJztcblxuXG5sZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xubGV0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xubGV0IGlzTW9iaWxlID0gdmlld3BvcnRXaWR0aCA8IDcwMD8gdHJ1ZSA6IGZhbHNlO1xuXG5mdW5jdGlvbiBnZXRDdXJyZW50U3RlcChpbmRleCl7XG4gIGNvbnN0IHNlbCA9IGQzLnNlbGVjdChgW2RhdGEtaW5kZXg9JyR7aW5kZXh9J11gKTtcblx0Y29uc3Qgc3RlcCA9IHNlbC5hdHRyKCdkYXRhLXN0ZXAnKTtcblx0Ly8gc3RlcFNlbC5jbGFzc2VkKCdpcy1hY3RpdmUnLCAoZCwgaSkgPT4gaSA9PT0gaW5kZXgpO1xuICBcbiAgLy8gY29uc29sZS5sb2coe3N0ZXB9KTtcbiAgaW50cm8udXBkYXRlU3RlcChzdGVwKVxuICBza2lsbFN0YWNraW5nLnVwZGF0ZVN0ZXAoc3RlcClcbiAgc2NhdHRlci51cGRhdGVTdGVwKHN0ZXApXG59XG5cblxuZnVuY3Rpb24gc2V0dXBTY3JvbGxUcmlnZ2Vycygpe1xuICBlbnRlclZpZXcoe1xuICAgIHNlbGVjdG9yOiAnLnNlY3Rpb25fX3NjZW5lJyxcbiAgICBvZmZzZXQ6IC0wLjA1LFxuICAgIGVudGVyOiBlbCA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9ICtkMy5zZWxlY3QoZWwpLmF0dHIoJ2RhdGEtaW5kZXgnKTtcbiAgICAgIGdldEN1cnJlbnRTdGVwKGluZGV4KTtcbiAgICB9LFxuICBleGl0OiBlbCA9PiB7XG4gICAgbGV0IGluZGV4ID0gK2QzLnNlbGVjdChlbCkuYXR0cignZGF0YS1pbmRleCcpO1xuICAgIGluZGV4ID0gTWF0aC5tYXgoMCwgaW5kZXggLSAxKTtcbiAgICBnZXRDdXJyZW50U3RlcChpbmRleCk7XG4gIH1cbn0pO1xuXG59XG5cbmZ1bmN0aW9uIHJlc2l6ZSgpIHt9XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIGNvbnN0IFZJRVdQT1JUX1JBVElPX0hFSUdIVCA9IDFcbiAgY29uc3QgVklFV1BPUlRfUkFUSU9fV0lEVEggPSAwLjlcblxuICBjb25zdCBKT0JfTEFCRUxfTUFSR0lOX0xFRlQgPSBpc01vYmlsZT8gMTAgOiAgNjBcblxuXG4gIGNvbnN0IHBhZGRpbmdDaGFydFRpdGxlRGl2ID0gKCgxLVZJRVdQT1JUX1JBVElPX1dJRFRIKS8yKSAqIHZpZXdwb3J0V2lkdGggKyBKT0JfTEFCRUxfTUFSR0lOX0xFRlRcblxuICBjb25zdCBjaGFydFN2ZyA9IGQzLnNlbGVjdChcImJvZHlcIilcbiAgICAuc2VsZWN0KFwiZmlndXJlLnN2Zy1jb250YWluZXJcIilcbiAgICAuc2VsZWN0KFwic3ZnLnNjYXR0ZXJcIilcblxuICBkMy5zZWxlY3QoJy5jaGFydC10aXRsZS1kaXYnKVxuICAgIC5zdCgncGFkZGluZy1sZWZ0JyxwYWRkaW5nQ2hhcnRUaXRsZURpdilcblxuXG4gIGNvbnN0IGhlaWdodE1pc2NFbERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaXNjLWNoYXJ0LWVsZW1lbnRzLWNvbnRhaW5lcicpLm9mZnNldEhlaWdodDtcbiAgY29uc3QgaGVpZ2h0U3ZnID0gdmlld3BvcnRIZWlnaHQtaGVpZ2h0TWlzY0VsRGl2O1xuXG4gIC8vIGNvbnNvbGUubG9nKFwiZnVsbCB2aWV3cG9ydCBoZWlnaHQ6IFwiK3ZpZXdwb3J0SGVpZ2h0KTtcbiAgLy8gY29uc29sZS5sb2coXCJtaXNjIGVsIGRpdiBoZWlnaHQ6IFwiK2hlaWdodE1pc2NFbERpdik7XG4gIC8vIGNvbnNvbGUubG9nKFwic3ZnIGhlaWdodCAobGVmdG92ZXJzKTogXCIraGVpZ2h0U3ZnKTtcblxuICBjaGFydFN2Z1xuICAgIC8vIC5hdCgnaGVpZ2h0JywgKHZpZXdwb3J0SGVpZ2h0ICogVklFV1BPUlRfUkFUSU9fSEVJR0hUKSlcbiAgICAuYXQoJ2hlaWdodCcsIGhlaWdodFN2ZylcbiAgICAuYXQoJ3dpZHRoJywgKHZpZXdwb3J0V2lkdGggKiBWSUVXUE9SVF9SQVRJT19XSURUSCkpXG4gICAgLnN0KCdmaWxsJywnIzAwMDAwJylcblxuICBjb25zdCB0bXBIdCA9IGQzLnNlbGVjdCgnc3ZnLnNjYXR0ZXInKS5hdCgnaGVpZ2h0JylcblxuICAvLyBjb25zb2xlLmxvZyhcInN2ZyBoZWlnaHQgYWN0dWFsOiBcIit0bXBIdCk7XG5cbiAgZDMuc2VsZWN0KCdpbWcuaW1hZ2VzLXR3by1qb2JzLXR3by1za2lsbHMnKVxuICAgIC5zdCgnd2lkdGgnLCAodmlld3BvcnRXaWR0aCAqIChWSUVXUE9SVF9SQVRJT19XSURUSC0wLjMpKSlcblxuICBkMy5zZWxlY3QoJ2ltZy5pbWFnZXMtdHdvLWpvYnMtbWFueS1za2lsbHMnKVxuICAgIC5zdCgnd2lkdGgnLCAodmlld3BvcnRXaWR0aCAqIChWSUVXUE9SVF9SQVRJT19XSURUSC0wLjMpKSlcblxuICBkMy5zZWxlY3QoJ2ltZy5pbWFnZXMtdHdvLWpvYnMtc3RhY2tlZC1za2lsbHMnKVxuICAgIC5zdCgnd2lkdGgnLCAodmlld3BvcnRXaWR0aCAqIChWSUVXUE9SVF9SQVRJT19XSURUSC0wLjMpKSlcblxuICBkMy5zZWxlY3QoJ2ltZy5pbWFnZXMtbWFueS1qb2JzLW1hbnktc2tpbGxzJylcbiAgICAuc3QoJ3dpZHRoJywgKHZpZXdwb3J0V2lkdGggKiAoVklFV1BPUlRfUkFUSU9fV0lEVEgtMC4zKSkpXG5cblxuXG5cblxuICBpbnRyb1xuICAgIC5pbml0KClcbiAgICAudGhlbiggKCk9PntcbiAgICAgIHNldHVwU2Nyb2xsVHJpZ2dlcnMoKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpPT57Y29uc29sZS5sb2coZXJyKTt9KVxuXG4gIHNraWxsU3RhY2tpbmdcbiAgICAuaW5pdCgpXG4gICAgLnRoZW4oICgpPT57XG4gICAgICBzZXR1cFNjcm9sbFRyaWdnZXJzKClcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKT0+e2NvbnNvbGUubG9nKGVycik7fSlcblxuICBzY2F0dGVyXG4gICAgLmluaXQoKVxuICAgIC50aGVuKCAoKSA9PntcbiAgICAgIC8vIHNldCB1cCBzY3JvbGwgdHJpZ2dlcnNcbiAgICAgIHNldHVwU2Nyb2xsVHJpZ2dlcnMoKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpPT57Y29uc29sZS5sb2coZXJyKTt9KVxuXG5cblxufVxuXG5leHBvcnQgZGVmYXVsdCB7IGluaXQsIHJlc2l6ZSB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n\tvalue: true\n});\n// device sniffing for mobile\n\nvar isMobile = {\n\tandroid: function android() {\n\t\treturn navigator.userAgent.match(/Android/i);\n\t},\n\n\tblackberry: function blackberry() {\n\t\treturn navigator.userAgent.match(/BlackBerry/i);\n\t},\n\n\tios: function ios() {\n\t\treturn navigator.userAgent.match(/iPhone|iPad|iPod/i);\n\t},\n\n\topera: function opera() {\n\t\treturn navigator.userAgent.match(/Opera Mini/i);\n\t},\n\n\twindows: function windows() {\n\t\treturn navigator.userAgent.match(/IEMobile/i);\n\t},\n\n\tany: function any() {\n\t\treturn isMobile.android() || isMobile.blackberry() || isMobile.ios() || isMobile.opera() || isMobile.windows();\n\t}\n};\n\nexports.default = isMobile;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdXRpbHMvaXMtbW9iaWxlLmpzP2E5NTAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZGV2aWNlIHNuaWZmaW5nIGZvciBtb2JpbGVcblxuY29uc3QgaXNNb2JpbGUgPSB7XG5cdGFuZHJvaWQ6ICgpID0+IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSksXG5cblx0YmxhY2tiZXJyeTogKCkgPT4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKSxcblxuXHRpb3M6ICgpID0+IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZXxpUGFkfGlQb2QvaSksXG5cblx0b3BlcmE6ICgpID0+IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL09wZXJhIE1pbmkvaSksXG5cblx0d2luZG93czogKCkgPT4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvSUVNb2JpbGUvaSksXG5cblx0YW55OiAoKSA9PiAoXG5cdFx0aXNNb2JpbGUuYW5kcm9pZCgpIHx8XG5cdFx0aXNNb2JpbGUuYmxhY2tiZXJyeSgpIHx8XG5cdFx0aXNNb2JpbGUuaW9zKCkgfHxcblx0XHRpc01vYmlsZS5vcGVyYSgpIHx8XG5cdFx0aXNNb2JpbGUud2luZG93cygpXG5cdCksXG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzTW9iaWxlXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQVhBO0FBQ0E7QUFtQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n')},function(module,exports){eval('var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function("return this")() || (1, eval)("this");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/Y2QwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSwgZXZhbCkoXCJ0aGlzXCIpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n')},function(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function(global) {/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(6)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2Rhc2guZGVib3VuY2UvaW5kZXguanM/ZjdmZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _lodash = __webpack_require__(7);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _isMobile = __webpack_require__(5);\n\nvar _isMobile2 = _interopRequireDefault(_isMobile);\n\nvar _graphic = __webpack_require__(4);\n\nvar _graphic2 = _interopRequireDefault(_graphic);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar bodySel = d3.select('body'); // D3 is included by globally by default\n\nvar previousWidth = 0;\n\nfunction resize() {\n\tvar width = bodySel.node().offsetWidth;\n\tif (previousWidth !== width) {\n\t\tpreviousWidth = width;\n\t\t_graphic2.default.resize();\n\t}\n}\n\nfunction init() {\n\t// add mobile class to body tag\n\tbodySel.classed('is-mobile', _isMobile2.default.any());\n\t// setup resize event\n\twindow.addEventListener('resize', (0, _lodash2.default)(resize, 150));\n\t// kick off graphic code\n\t_graphic2.default.init();\n}\n\ninit();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvZW50cnkuanM/NWM1OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEMyBpcyBpbmNsdWRlZCBieSBnbG9iYWxseSBieSBkZWZhdWx0XG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoLmRlYm91bmNlJztcbmltcG9ydCBpc01vYmlsZSBmcm9tICcuL3V0aWxzL2lzLW1vYmlsZSc7XG5pbXBvcnQgZ3JhcGhpYyBmcm9tICcuL2dyYXBoaWMnO1xuXG5jb25zdCBib2R5U2VsID0gZDMuc2VsZWN0KCdib2R5Jyk7XG5sZXQgcHJldmlvdXNXaWR0aCA9IDA7XG5cbmZ1bmN0aW9uIHJlc2l6ZSgpIHtcblx0Y29uc3Qgd2lkdGggPSBib2R5U2VsLm5vZGUoKS5vZmZzZXRXaWR0aDtcblx0aWYgKHByZXZpb3VzV2lkdGggIT09IHdpZHRoKSB7XG5cdFx0cHJldmlvdXNXaWR0aCA9IHdpZHRoO1xuXHRcdGdyYXBoaWMucmVzaXplKCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gaW5pdCgpIHtcblx0Ly8gYWRkIG1vYmlsZSBjbGFzcyB0byBib2R5IHRhZ1xuXHRib2R5U2VsLmNsYXNzZWQoJ2lzLW1vYmlsZScsIGlzTW9iaWxlLmFueSgpKTtcblx0Ly8gc2V0dXAgcmVzaXplIGV2ZW50XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZShyZXNpemUsIDE1MCkpO1xuXHQvLyBraWNrIG9mZiBncmFwaGljIGNvZGVcblx0Z3JhcGhpYy5pbml0KCk7XG59XG5cbmluaXQoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8\n")}]);