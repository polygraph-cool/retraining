{"code":"!function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},o.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=5)}([function(module,exports,__webpack_require__){\"use strict\";function numberWithCommas(e){return e.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")}function selectJobData(e,t){return e.filter(function(e){return e.id_selected===t})}function setupXScale(e){return d3.scaleLinear().domain(d3.extent(e,function(e){return e.similarity})).range([0,800])}function compare(e,t){return e.imp<t.imp?1:e.imp>t.imp?-1:0}function changeDropDown(e,t,o){}function loadScatterplotUpdated(){var _d,controllerScatter=new ScrollMagic.Controller,allData=null,keyObjectJobName={},keyObjectJobNumber={},keyObjectJobAuto={},keyObjectJobWage={},keyObjectSkillName={},selectedJobSkills=[0,0,0,0,0],skills=[],MAX_AUTO=1,MIN_AUTO=0,pathData=\"assets/data/\",fileNames=[\"crosswalk_jobs\",\"similarity\",\"crosswalk_skills\",\"skills\"],files=[];fileNames.forEach(function(e){files.push(pathData+e+\".csv\")}),(_d=d3).loadData.apply(_d,files.concat([function(err,response){var crosswalk=response[0],similarity=response[1],crosswalkSkills=response[2];skills=response[3],crosswalk.forEach(function(e){e.id=+e.id,e.auto=+e.auto,e.wage=+e.wage,e.number=+e.number}),similarity.forEach(function(e){e.similarity=+e.similarity,e.id_compared=+e.id_compared,e.id_selected=+e.id_selected}),skills.forEach(function(e){e.id_selected=+e.id_selected,e.imp=+e.imp,e.skill_id=+e.skill_id,e.rank=+e.rank}),crosswalkSkills.forEach(function(e){e.skill_id=+e.skill_id}),allData=similarity;var jobSelector=d3.select(\"body\").append(\"div.job-selector\"),currentJobName=d3.select(\"body\").append(\"div.job-selected-name\"),jobSelectedNumber=d3.select(\"body\").append(\"div.job-selected-number\"),svgExists=document.getElementsByClassName(\"scatter\");if(svgExists)var _chartSvg=d3.select(\"svg.scatter\");else var _chartSvg2=d3.select(\"body\").select(\"div.svg-container\").select(\"svg.scatter\");console.log(chartSvg);var selectedJobData=selectJobData(similarity,415),yScale=d3.scaleLinear().domain([MIN_AUTO,MAX_AUTO]).range([0,600]),xScale=setupXScale(selectedJobData),colorScale=d3.scaleLinear().domain([5,2,1.25,1.1,.9,.75,.5,.2]).range([\"#a50026\",\"#d73027\",\"#f46d43\",\"#fee090\",\"#e0f3f8\",\"#74add1\",\"#4575b4\",\"#313695\"]),radiusScale=d3.scaleSqrt().domain([0,d3.max(crosswalk,function(e){return e.wage})]).range([0,6]);crosswalk.forEach(function(e){keyObjectJobName[e.id]=e.job_name}),crosswalk.forEach(function(e){keyObjectJobNumber[e.id]=e.number}),crosswalk.forEach(function(e){keyObjectJobAuto[e.id]=e.auto}),crosswalk.forEach(function(e){keyObjectJobWage[e.id]=e.wage}),crosswalkSkills.forEach(function(e){return keyObjectSkillName[e.skill_id]=e.skill}),d3.selectAll(\"g.all-skills\").st(\"opacity\",0);var jobDropdownMenu=d3.select(\"div.job-selector\").append(\"select.scatter-dropdown-menu\"),jobButtons=jobDropdownMenu.selectAll(\"option.job-button\").data(crosswalk).enter().append(\"option.job-button\").at(\"value\",function(e){return e.id});jobButtons.text(function(e){return e.job_name}),jobDropdownMenu.on(\"change\",function(d,i,n){var selectedJobID=eval(d3.select(n[i]).property(\"value\"));console.log(selectedJobID);var updatedData=selectJobData(allData,selectedJobID),xScale=setupXScale(updatedData);d3.selectAll(\"circle.job\").remove();var jobCircles=d3.select(\"svg.scatter\").selectAll(\"circle.job\").data(updatedData).enter().append(\"circle.job\");jobCircles.at(\"cx\",function(e){return xScale(e.similarity)}).at(\"cy\",50).st(\"fill\",\"white\").st(\"stroke\",\"black\").at(\"r\",\"3\"),jobCircles.on(\"mouseenter\",function(e,t,o){var i=d3.select(\"div.jobTooltip\");i.st(\"visibility\",\"visible\");var n=d3.select(o[t]).at(\"cx\"),r=d3.select(o[t]).at(\"cy\");i.st(\"left\",n+\"px\").st(\"top\",r+\"px\"),selectedJobSkills=(selectedJobSkills=selectJobData(skills,e.id_compared)).sort(compare),d3.select(\"div.job-selected-name\").text(\"Main job: \"+keyObjectJobName[e.id_selected]),d3.select(\"div.job-compared-name\").text(\"Compared job: \"+keyObjectJobName[e.id_compared]),d3.select(\"div.job-selected-number\").text(\"Main job quantity: \"+numberWithCommas(keyObjectJobNumber[e.id_selected])),d3.select(\"div.job-compared-number\").text(\"Compared job quantity: \"+numberWithCommas(keyObjectJobNumber[e.id_compared]));var a=i.select(\"div.job-skills-container\"),l=(a.selectAll(\"div.bar-container\"),a.selectAll(\"div.job-bar-name\").data(selectedJobSkills)),c=a.selectAll(\"div.job-bar\").data(selectedJobSkills),s=a.selectAll(\"div.job-bar-value\").data(selectedJobSkills);console.log(selectedJobSkills),c.st(\"height\",\"20px\").st(\"width\",function(e){return e.imp+\"px\"}).st(\"background\",\"black\"),l.text(function(e){return keyObjectSkillName[e.skill_id]}),s.text(function(e){return e.imp})}).on(\"mouseleave\",function(){jobTooltip.st(\"visibility\",\"hidden\")})});var jobCircles=chartSvg.selectAll(\"circle.job\").data(selectedJobData).enter().append(\"circle.job\");jobCircles.at(\"cx\",function(e){return xScale(e.similarity)}).at(\"cy\",50).st(\"fill\",\"white\").st(\"stroke\",\"black\").at(\"r\",\"3\");var jobTooltip=d3.select(\"div.svg-container\").append(\"div.jobTooltip\"),jobSelectedName=d3.select(\"div.job-selected-name\"),jobComparedName=jobTooltip.append(\"div.job-compared-name\"),jobComparedNumber=jobTooltip.append(\"div.job-compared-number\"),jobSkillsContainer=jobTooltip.append(\"div.job-skills-container\"),jobSkillsBarRow=jobSkillsContainer.selectAll(\"div.job-bar-container\").data(selectedJobSkills).enter().append(\"div.bar-container\"),jobSkillsNames=jobSkillsBarRow.append(\"div.job-bar-name\").data(selectedJobSkills).enter(),jobSkillsBars=jobSkillsBarRow.append(\"div.job-bar\").data(selectedJobSkills).enter(),jobSkillsValues=jobSkillsBarRow.append(\"div.job-bar-value\").data(selectedJobSkills).enter();jobCircles.on(\"mouseenter\",function(e,t,o){selectedJobSkills=(selectedJobSkills=selectJobData(skills,e.id_compared)).sort(compare);var i=d3.select(\"div.jobTooltip\");i.st(\"visibility\",\"visible\");var n=d3.select(o[t]).at(\"cx\"),r=d3.select(o[t]).at(\"cy\");i.st(\"left\",n+\"px\").st(\"top\",r+\"px\"),d3.select(\"div.job-selected-name\").text(\"Main job: \"+keyObjectJobName[e.id_selected]),d3.select(\"div.job-compared-name\").text(\"Compared job: \"+keyObjectJobName[e.id_compared]),d3.select(\"div.job-selected-number\").text(\"Main job quantity: \"+numberWithCommas(keyObjectJobNumber[e.id_selected])),d3.select(\"div.job-compared-number\").text(\"Compared job quantity: \"+numberWithCommas(keyObjectJobNumber[e.id_compared]));var a=i.select(\"div.job-skills-container\"),l=(a.selectAll(\"div.bar-container\"),a.selectAll(\"div.job-bar-name\").data(selectedJobSkills)),c=a.selectAll(\"div.job-bar\").data(selectedJobSkills),s=a.selectAll(\"div.job-bar-value\").data(selectedJobSkills);console.log(selectedJobSkills),c.st(\"height\",\"20px\").st(\"width\",function(e){return e.imp+\"px\"}).st(\"background\",\"black\"),l.text(function(e){return keyObjectSkillName[e.skill_id]}),s.text(function(e){return e.imp})}).on(\"mouseleave\",function(){jobTooltip.st(\"visibility\",\"hidden\")});var $single_XAxis_Similarity_All_Jobs=d3.select(\"div.transition-button.only-similarity-axis\"),$show_XY_Axes_Similarity_All_Jobs=d3.select(\"div.transition-button.automation-similarity-axis\"),$show_Earnings_Comparison=d3.select(\"div.transition-button.earnings\"),$show_Number_Jobs_Available=d3.select(\"div.transition-button.jobs-available\"),sceneJob1=new ScrollMagic.Scene({triggerElement:\".xy-axes-scatter\",offset:0,duration:1,triggerHook:0}).on(\"enter\",function(e){jobCircles.transition().at(\"cy\",function(e){return yScale(keyObjectJobAuto[e.id_compared])})}).on(\"leave\",function(e){e.target.controller().info(\"scrollDirection\")}).addTo(controllerScatter);$show_Earnings_Comparison.on(\"click\",function(){jobCircles.transition().st(\"fill\",function(e){var t=keyObjectJobWage[e.id_selected],o=keyObjectJobWage[e.id_compared];return colorScale(t/o)})});var sceneJob2=new ScrollMagic.Scene({triggerElement:\".show-similarity-auto-wage\",offset:0,duration:1,triggerHook:0}).on(\"enter\",function(e){jobCircles.transition().st(\"fill\",function(e){var t=keyObjectJobWage[e.id_selected],o=keyObjectJobWage[e.id_compared];return colorScale(t/o)})}).on(\"leave\",function(e){e.target.controller().info(\"scrollDirection\")}).addTo(controllerScatter);$show_Number_Jobs_Available.on(\"click\",function(){jobCircles.transition().at(\"r\",function(e){var t=keyObjectJobNumber[e.id_compared];return radiusScale(t)})});var sceneJob3=new ScrollMagic.Scene({triggerElement:\".show-similarity-auto-wage-number\",offset:0,duration:1,triggerHook:0}).on(\"enter\",function(e){jobCircles.transition().at(\"r\",function(e){var t=keyObjectJobNumber[e.id_compared];return radiusScale(t)})}).on(\"leave\",function(e){e.target.controller().info(\"scrollDirection\")}).addTo(controllerScatter)}]))}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=loadScatterplotUpdated},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i,n=(i=o(0))&&i.__esModule?i:{default:i},r=new ScrollMagic.Controller,a=window.innerWidth,l=window.innerHeight;console.log(Math.max(document.documentElement.clientHeight)),t.default={init:function(){d3.select(\"body\").select(\"div.svg-container\").select(\"svg.scatter\").at(\"height\",function(){return l}).at(\"width\",function(){return.8*a}).st(\"fill\",\"#00000\");var e,t,o=(e=\"#content\",t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),d3.select(e).node().getBoundingClientRect().height-t/2),i=(new ScrollMagic.Scene({triggerElement:\".svg-container\",offset:0,duration:o,triggerHook:0}).setPin(\".svg-container\",{pushFollowers:!1}).on(\"enter\",function(e){}).on(\"leave\",function(e){e.target.controller().info(\"scrollDirection\")}).addIndicators({name:\"indicatorScatter\"}).addTo(r),new ScrollMagic.Scene({triggerElement:\".two-jobs-all-skills\",offset:0,duration:1,triggerHook:0}).on(\"enter\",function(e){}).on(\"leave\",function(e){e.target.controller().info(\"scrollDirection\")}).addTo(r),new ScrollMagic.Scene({triggerElement:\".x-axis-scatter\",offset:0,duration:1,triggerHook:0}).on(\"enter\",function(e){(0,n.default)()}).on(\"leave\",function(e){e.target.controller().info(\"scrollDirection\")}).addTo(r),d3.select(\"body\").append(\"div.buttons-container\"));i.append(\"div.transition-button.automation-similarity-axis\").text(\"XY Axes Similarity\"),i.append(\"div.transition-button.earnings\").text(\"Earnings\"),i.append(\"div.transition-button.jobs-available\").text(\"Number of Jobs\")},resize:function(){}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.android()||i.blackberry()||i.ios()||i.opera()||i.windows()}};t.default=i},function(e,t){var o;o=function(){return this}();try{o=o||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"==typeof window&&(o=window)}e.exports=o},function(e,t,o){(function(t){var o=NaN,i=\"[object Symbol]\",n=/^\\s+|\\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,s=\"object\"==typeof t&&t&&t.Object===Object&&t,d=\"object\"==typeof self&&self&&self.Object===Object&&self,u=s||d||Function(\"return this\")(),b=Object.prototype.toString,f=Math.max,m=Math.min,p=function(){return u.Date.now()};function v(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}function j(e){if(\"number\"==typeof e)return e;if(function(e){return\"symbol\"==typeof e||function(e){return!!e&&\"object\"==typeof e}(e)&&b.call(e)==i}(e))return o;if(v(e)){var t=\"function\"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+\"\":t}if(\"string\"!=typeof e)return 0===e?e:+e;e=e.replace(n,\"\");var s=a.test(e);return s||l.test(e)?c(e.slice(2),s?2:8):r.test(e)?o:+e}e.exports=function(e,t,o){var i,n,r,a,l,c,s=0,d=!1,u=!1,b=!0;if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");function g(t){var o=i,r=n;return i=n=void 0,s=t,a=e.apply(r,o)}function k(e){var o=e-c;return void 0===c||o>=t||o<0||u&&e-s>=r}function y(){var e=p();if(k(e))return S(e);l=setTimeout(y,function(e){var o=t-(e-c);return u?m(o,r-(e-s)):o}(e))}function S(e){return l=void 0,b&&i?g(e):(i=n=void 0,a)}function _(){var e=p(),o=k(e);if(i=arguments,n=this,c=e,o){if(void 0===l)return function(e){return s=e,l=setTimeout(y,t),d?g(e):a}(c);if(u)return l=setTimeout(y,t),g(c)}return void 0===l&&(l=setTimeout(y,t)),a}return t=j(t)||0,v(o)&&(d=!!o.leading,r=(u=\"maxWait\"in o)?f(j(o.maxWait)||0,t):r,b=\"trailing\"in o?!!o.trailing:b),_.cancel=function(){void 0!==l&&clearTimeout(l),s=0,i=c=n=l=void 0},_.flush=function(){return void 0===l?a:S(p())},_}}).call(this,o(3))},function(e,t,o){\"use strict\";var i=a(o(4)),n=a(o(2)),r=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var l=d3.select(\"body\"),c=0;l.classed(\"is-mobile\",n.default.any()),window.addEventListener(\"resize\",(0,i.default)(function(){var e=l.node().offsetWidth;c!==e&&(c=e,r.default.resize())},150)),r.default.init()}]);","extractedComments":[]}